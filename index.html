<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SAVVA Â· SolidJS</title>

  <!-- Preload theme to avoid flash -->
  <script>
    (function () {
      try {
        const saved = localStorage.getItem("theme");
        const systemDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
        const theme = saved || (systemDark ? "dark" : "light");
        document.documentElement.classList.toggle("dark", theme === "dark");
      } catch { }
    })();
  </script>

  <script>
    (function () {
      // If there is a real path (e.g., /settings) but no hash, rewrite to hash form
      if (!location.hash) {
        let path = location.pathname;
        let newHash = "";

        // NEW: Check for legacy /content/ URL
        if (path.startsWith("/content/")) {
          const savvaId = path.substring("/content/".length);
          newHash = "#/post/" + savvaId;
        } else if (path !== "/") {
          newHash = "#" + path + location.search;
        }

        if (newHash) {
          history.replaceState(null, "", "/" + newHash);
        }
      }
    })();
  </script>


  <!-- Load app after theme class is set -->
  <script type="module" src="/src/index.jsx"></script>
</head>

<body>
  <div id="root"></div>
</body>

</html>