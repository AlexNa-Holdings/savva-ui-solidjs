# Конфігурація

Розширені параметри конфігурації для вашої інсталяції SAVVA.

## Огляд

Цей документ охоплює розширену конфігурацію, що виходить за межі базового налаштування.

## Налаштування Telegram-бота

SAVVA підтримує інтеграцію з Telegram-ботом для автентифікації користувачів та сповіщень. Кожний домен може мати власного Telegram-бота.

### Створення Telegram-бота

1. **Відкрийте Telegram** і знайдіть `@BotFather`

2. **Створіть нового бота**:
   - Надішліть `/newbot` BotFather
   - Введіть відображуване ім'я для вашого бота (e.g., "SAVVA Network")
   - Введіть ім'я користувача для вашого бота (має закінчуватися на `bot`, e.g., `savva_network_bot`)

3. **Збережіть токен бота**:
   - BotFather надасть API-токен у вигляді: `7123456789:AAHxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx`
   - Зберігайте цей токен у безпеці — будь-хто з цим токеном може керувати вашим ботом

4. **Налаштуйте параметри бота** (необов'язково, але рекомендовано):
   - Надішліть `/setdescription` — додайте опис вашого екземпляру SAVVA
   - Надішліть `/setabouttext` — додайте інформацію, що відображається в профілі бота
   - Надішліть `/setuserpic` — завантажте логотип вашої мережі як аватар бота

### Конфігурація бекенду

Додайте налаштування Telegram-бота у ваш `/etc/savva.yml`:

```yaml
# Telegram Bot Configuration
telegram:
  bot-token: "7123456789:AAHxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
```

### Реєстрація вебхука

Після налаштування бекенду потрібно зареєструвати URL вебхука у Telegram. Це повідомляє Telegram, куди надсилати оновлення, коли користувачі взаємодіють з вашим ботом:

```bash
curl -F "url=https://yourdomain/api/telegram-bot/yourdomain" \
  https://api.telegram.org/bot7123456789:AAHxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx/setWebhook
```

Замініть:
- `yourdomain` на ваш фактичний домен (з'являється двічі в URL)
- `7123456789:AAHxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx` на токен вашого бота

**Очікувана відповідь:**
```json
{"ok":true,"result":true,"description":"Webhook was set"}
```

**Перевірити статус вебхука:**
```bash
curl https://api.telegram.org/bot<your_bot_token>/getWebhookInfo
```

### Як це працює

Після налаштування користувачі можуть:
- Прив'язати свій Telegram-акаунт до профілю SAVVA
- Отримувати сповіщення про нових підписників, коментарі та згадки
- Використовувати Telegram як додатковий метод автентифікації

### Примітки щодо безпеки

- Ніколи не діліться токеном бота публічно
- Токен бота в `savva.yml` повинен мати обмежені права доступу до файлу (`chmod 600`)
- Розгляньте використання змінних оточення для токена в продакшні:
  ```yaml
  telegram:
    bot-token: ${TELEGRAM_BOT_TOKEN}
  ```