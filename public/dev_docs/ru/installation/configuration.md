# Конфигурация

Расширенные параметры конфигурации для вашей установки SAVVA.

## Обзор

В этом документе описана расширенная конфигурация, выходящая за рамки базовой настройки.

## Настройка Telegram-бота

SAVVA поддерживает интеграцию с Telegram-ботом для аутентификации пользователей и уведомлений. У каждого домена может быть свой Telegram-бот.

### Создание Telegram-бота

1. **Откройте Telegram** и найдите `@BotFather`

2. **Создайте нового бота**:
   - Отправьте `/newbot` BotFather
   - Введите отображаемое имя для бота (например, "SAVVA Network")
   - Введите имя пользователя для бота (должно оканчиваться на `bot`, например, `savva_network_bot`)

3. **Сохраните токен бота**:
   - BotFather выдаст API-токен, например: `7123456789:AAHxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx`
   - Храните этот токен в безопасности — любой, у кого есть этот токен, сможет управлять вашим ботом

4. **Настройте параметры бота** (необязательно, но рекомендуется):
   - Отправьте `/setdescription` — добавьте описание вашего экземпляра SAVVA
   - Отправьте `/setabouttext` — добавьте информацию, которая будет показана в профиле бота
   - Отправьте `/setuserpic` — загрузите логотип вашей сети в качестве аватара бота

### Конфигурация бэкенда

Добавьте настройки Telegram-бота в ваш `/etc/savva.yml`:

```yaml
# Telegram Bot Configuration
telegram:
  bot-token: "7123456789:AAHxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
```

### Регистрация вебхука

После настройки бэкенда необходимо зарегистрировать URL вебхука у Telegram. Это указывает Telegram, куда отправлять обновления, когда пользователи взаимодействуют с вашим ботом:

```bash
curl -F "url=https://yourdomain/api/telegram-bot/yourdomain" \
  https://api.telegram.org/bot7123456789:AAHxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx/setWebhook
```

Замените:
- `yourdomain` на ваш реальный домен (в URL встречается дважды)
- `7123456789:AAHxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx` на токен вашего бота

**Ожидаемый ответ:**
```json
{"ok":true,"result":true,"description":"Webhook was set"}
```

**Проверьте статус вебхука:**
```bash
curl https://api.telegram.org/bot<your_bot_token>/getWebhookInfo
```

### Как это работает

После настройки пользователи смогут:
- Привязать свой аккаунт Telegram к профилю SAVVA
- Получать уведомления о новых подписчиках, комментариях и упоминаниях
- Использовать Telegram в качестве дополнительного метода аутентификации

### Примечания по безопасности

- Никогда не публикуйте токен бота
- Токен бота в `savva.yml` должен иметь ограниченные права доступа к файлу (`chmod 600`)
- Рассмотрите возможность использования переменных окружения для токена в продакшне:
  ```yaml
  telegram:
    bot-token: ${TELEGRAM_BOT_TOKEN}
  ```

## Конфигурация бэкенда

### Тонкая настройка базы данных

**Скоро**: оптимизация PostgreSQL для высоконагруженных экземпляров

### Конфигурация IPFS

**Скоро**: стратегии закрепления (pinning) IPFS и оптимизация шлюза

### Кэширование

**Скоро**: интеграция Redis для кэширования сессий

### Ограничение частоты запросов

**Скоро**: конфигурация ограничения частоты запросов API

## Конфигурация UI

### Брендинг

**Скоро**: как настроить цвета, логотипы и фирменный стиль

### Флаги функций

**Скоро**: включение/отключение отдельных функций

### Аналитика

**Скоро**: интеграция инструментов аналитики

## Конфигурация блокчейна

### Пользовательские сети

**Скоро**: подключение к пользовательским EVM-сетям

### Конфигурация контрактов

**Скоро**: расширенные настройки взаимодействия с контрактами

## Оптимизация производительности

### Настройка CDN

**Скоро**: оптимизация доставки ресурсов

### Индексы базы данных

**Скоро**: запросы для оптимизации базы данных

### Стратегии кэширования

**Скоро**: кэширование на стороне бэкенда и фронтенда

## Конфигурация безопасности

### SSL/TLS

**Скоро**: продвинутые настройки HTTPS

### Безопасность API

**Скоро**: конфигурация JWT и лучшие практики безопасности

### Настройки CORS

**Скоро**: тонкая настройка политик CORS

## Мониторинг и логирование

### Управление логами

**Скоро**: настройка централизованного логирования

### Мониторинг производительности

**Скоро**: интеграция APM

### Отслеживание ошибок

**Скоро**: интеграция Sentry или аналогичных инструментов

---

*Этот раздел находится в разработке. Загляните позже за обновлениями.*