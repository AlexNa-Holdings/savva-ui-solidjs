This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
assets/
  chain_logos/
    ethereum.svg
    puilsechain-test-v4.svg
    pulsechain.svg
  icons/
    arrow-back.svg
public/
  dev_docs/
    en/
      core-concepts/
        app-init.md
        domain.md
        index.md
      getting-started.md
      index.md
      sidebar.yaml
    fr/
      core-concepts/
        app-init.md
        domain.md
        index.md
      .i18n-docs-state.json
      getting-started.md
      index.md
      sidebar.yaml
    ru/
      core-concepts/
        app-init.md
        domain.md
        index.md
      .i18n-docs-state.json
      getting-started.md
      index.md
      sidebar.yaml
    sr/
      core-concepts/
        app-init.md
        domain.md
        index.md
      .i18n-docs-state.json
      getting-started.md
      index.md
      sidebar.yaml
    ua/
      core-concepts/
        app-init.md
        domain.md
        index.md
      .i18n-docs-state.json
      getting-started.md
      index.md
      sidebar.yaml
  domain_default/
    favicon/
      browserconfig.xml
      safari-pinned-tab.svg
      site.webmanifest
    html/
      info_block_en.html
      info_block_fr.html
      info_block_ru.html
      info_block_ua.html
      info_block.html
    modules/
      categories.yaml
      content_lists.yaml
      staker_levels.yaml
      tabs.yaml
    config.yaml
    domain.css
  default_connect.yaml
scripts/
  i18n-docs.mjs
  i18n.mjs
  release.mjs
src/
  assets/
    solid.svg
  blockchain/
    abi/
      AuthorOfTheMonth.json
      AuthorsClubs.json
      BuyBurn.json
      Config.json
      ContentFund.json
      ContentNFT.json
      ContentRegistry.json
      Fundraiser.json
      Governance.json
      IContentFund.json
      IPulseXFactory.json
      IPulseXRouter.json
      IStaking.json
      IWPLS.json
      ListMarket.json
      NFTAuction.json
      NFTMarketplace.json
      Promo.json
      RandomOracle.json
      SafeERC20.json
      SavvaFaucet.json
      SavvaNPO.json
      SavvaNPOEvents.json
      SavvaNPOFactory.json
      SavvaSwap.json
      SavvaToken.json
      Staking.json
      UserProfile.json
      utils.json
    auth.js
    chainLogos.js
    chains.js
    contracts.js
    utils.js
    wallet.js
  components/
    auth/
      AuthorizedUser.jsx
    docs/
      DocsContent.jsx
      DocsIndex.jsx
      DocsPager.jsx
      MarkdownView.jsx
    feed/
      ContentFeed.jsx
      PostCard.jsx
      PostInfo.jsx
      PostListView.jsx
    layout/
      Container.jsx
      RightRail.jsx
      TwoColumn.jsx
    main/
      ConnectionError.jsx
      MainView.jsx
      TabsBar.jsx
    settings/
      Assets.jsx
      DeveloperSection.jsx
      LocalIpfsSection.jsx
    tabs/
      ActualTab.jsx
      CommentsTab.jsx
      ForYouTab.jsx
      index.js
      LeadersTab.jsx
      NewTab.jsx
      NILRightPanel.jsx
      NILTab.jsx
      RightRailLayout.jsx
      TabPanelScaffold.jsx
    ui/
      icons/
        FishIcons.jsx
        ReactionIcon.jsx
        SavvaTokenIcon.jsx
        TabIcons.jsx
        UnknownUserIcon.jsx
        VerifiedBadge.jsx
      BrandLogo.jsx
      ClosePageButton.jsx
      IpfsImage.jsx
      LangSelector.jsx
      PostReactions.jsx
      PostTime.jsx
      Spinner.jsx
      StakerLevelIcon.jsx
      Tabs.jsx
      ThemeToggle.jsx
      toast.js
      ToTopButton.jsx
      UserCard.jsx
      ViewModeToggle.jsx
    widgets/
      ContentListBlock.jsx
      HtmlBlock.jsx
    Header.jsx
    RightPane.jsx
    RightPaneFooter.jsx
    SwitchConnectDialog.jsx
    Toaster.jsx
  context/
    AppContext.jsx
  dev/
    AssetDebugTap.jsx
  hooks/
    useConnect.js
    useLocalIpfs.js
    useTheme.js
  i18n/
    en.js
    fr.js
    ru.js
    sr.js
    ua.js
    useI18n.js
  ipfs/
    index.js
  net/
    endpoints.js
    index.js
    wsApi.js
    wsBus.js
    WsClient.js
    WsConnector.jsx
    wsRuntime.js
    wsUrl.js
  pages/
    Docs.jsx
    Settings.jsx
  routing/
    hashRouter.js
    tabRoutes.js
  styles/
    layout.css
    tabs.css
    themed-controls.css
  theme/
    DomainCssLoader.jsx
    FaviconLoader.jsx
    GoogleAnalyticsLoader.jsx
  utils/
    assetLoader.js
    assetsDiagnostics.js
    debug.js
    net.js
  App.jsx
  index.css
  index.jsx
  version.js
  vite-env.d.js
.gitignore
index.html
package.json
postcss.config.js
README.md
tailwind.config.js
tsconfig.app.json
tsconfig.node.json
vite.config.js
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path="src/blockchain/abi/AuthorOfTheMonth.json">
[
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "_config",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "_initialOwner",
        "type": "address"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "constructor"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "owner",
        "type": "address"
      }
    ],
    "name": "OwnableInvalidOwner",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "account",
        "type": "address"
      }
    ],
    "name": "OwnableUnauthorizedAccount",
    "type": "error"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "string",
        "name": "domain",
        "type": "string"
      },
      {
        "indexed": false,
        "internalType": "address",
        "name": "author",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "timestamp",
        "type": "uint256"
      }
    ],
    "name": "Award",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "previousOwner",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "newOwner",
        "type": "address"
      }
    ],
    "name": "OwnershipTransferred",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "string",
        "name": "domain",
        "type": "string"
      },
      {
        "indexed": false,
        "internalType": "address",
        "name": "user",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "address",
        "name": "author",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "amount",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "timestamp",
        "type": "uint256"
      }
    ],
    "name": "Sacrifice",
    "type": "event"
  },
  {
    "inputs": [],
    "name": "awardAll",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "config",
    "outputs": [
      {
        "internalType": "contract IConfig",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "name": "domainList",
    "outputs": [
      {
        "internalType": "string",
        "name": "",
        "type": "string"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "string",
        "name": "_domain",
        "type": "string"
      }
    ],
    "name": "get3Leaders",
    "outputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      },
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      },
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "string",
        "name": "_domain",
        "type": "string"
      },
      {
        "internalType": "address",
        "name": "_nominant",
        "type": "address"
      }
    ],
    "name": "getNominantInfo",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "string",
        "name": "_domain",
        "type": "string"
      }
    ],
    "name": "getTotalSacrificed",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "string",
        "name": "_domain",
        "type": "string"
      }
    ],
    "name": "getWinner",
    "outputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "lastAwardTime",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "nextAwardTime",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "owner",
    "outputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "period",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "renounceOwnership",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "string",
        "name": "_domain",
        "type": "string"
      },
      {
        "internalType": "address",
        "name": "_author",
        "type": "address"
      }
    ],
    "name": "sacrifice",
    "outputs": [],
    "stateMutability": "payable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "_nextAwardTime",
        "type": "uint256"
      }
    ],
    "name": "setNextAwardTime",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "_period",
        "type": "uint256"
      }
    ],
    "name": "setPeriod",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "newOwner",
        "type": "address"
      }
    ],
    "name": "transferOwnership",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  }
]
</file>

<file path="src/blockchain/abi/AuthorsClubs.json">
[
  {
    "inputs": [
      {
        "internalType": "contract IConfig",
        "name": "_config",
        "type": "address"
      },
      {
        "internalType": "bool",
        "name": "test",
        "type": "bool"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "constructor"
  },
  {
    "inputs": [],
    "name": "ReentrancyGuardReentrantCall",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "token",
        "type": "address"
      }
    ],
    "name": "SafeERC20FailedOperation",
    "type": "error"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "string",
        "name": "domain",
        "type": "string"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "user",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "author",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "amountPerWeek",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "n_weeks",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "totalAmount",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "currentFrame",
        "type": "uint256"
      }
    ],
    "name": "Buy",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "string",
        "name": "domain",
        "type": "string"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "author",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "amount",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "currentFrame",
        "type": "uint256"
      }
    ],
    "name": "Claim",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "amount",
        "type": "uint256"
      }
    ],
    "name": "ClaimedStakingGain",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "string",
        "name": "domain",
        "type": "string"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "user",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "author",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "refunded",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "currentFrame",
        "type": "uint256"
      }
    ],
    "name": "Stopped",
    "type": "event"
  },
  {
    "inputs": [
      {
        "internalType": "string",
        "name": "domain",
        "type": "string"
      },
      {
        "internalType": "address",
        "name": "author",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "amountPerWeek",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "n_weeks",
        "type": "uint256"
      }
    ],
    "name": "buy",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "string",
        "name": "domain",
        "type": "string"
      },
      {
        "internalType": "address",
        "name": "author",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "amountPerWeek",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "n_weeks",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "_deadline",
        "type": "uint256"
      },
      {
        "internalType": "uint8",
        "name": "_v",
        "type": "uint8"
      },
      {
        "internalType": "bytes32",
        "name": "_r",
        "type": "bytes32"
      },
      {
        "internalType": "bytes32",
        "name": "_s",
        "type": "bytes32"
      }
    ],
    "name": "buyWithPermit",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "string",
        "name": "domain",
        "type": "string"
      },
      {
        "internalType": "address",
        "name": "author",
        "type": "address"
      },
      {
        "internalType": "bytes32",
        "name": "content_type",
        "type": "bytes32"
      }
    ],
    "name": "claim",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "claimStakingGain",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "string",
        "name": "domain",
        "type": "string"
      },
      {
        "internalType": "address",
        "name": "author",
        "type": "address"
      }
    ],
    "name": "claimableGain",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "string",
        "name": "",
        "type": "string"
      },
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      }
    ],
    "name": "clubs",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "lastClaimedWeek",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "currentFrame",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "string",
        "name": "domain",
        "type": "string"
      },
      {
        "internalType": "address",
        "name": "author",
        "type": "address"
      }
    ],
    "name": "getClub",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      },
      {
        "internalType": "uint256[52]",
        "name": "",
        "type": "uint256[52]"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "string",
        "name": "domain",
        "type": "string"
      },
      {
        "internalType": "address",
        "name": "author",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "frame",
        "type": "uint256"
      }
    ],
    "name": "getFrame",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "string",
        "name": "domain",
        "type": "string"
      },
      {
        "internalType": "address",
        "name": "user",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "author",
        "type": "address"
      }
    ],
    "name": "getSub",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "string",
        "name": "domain",
        "type": "string"
      },
      {
        "internalType": "address",
        "name": "author",
        "type": "address"
      }
    ],
    "name": "stop",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "string",
        "name": "",
        "type": "string"
      },
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      }
    ],
    "name": "subs",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "amountPerWeek",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "til_frame",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  }
]
</file>

<file path="src/blockchain/abi/BuyBurn.json">
[
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "_config",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "_initialOwner",
        "type": "address"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "constructor"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "owner",
        "type": "address"
      }
    ],
    "name": "OwnableInvalidOwner",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "account",
        "type": "address"
      }
    ],
    "name": "OwnableUnauthorizedAccount",
    "type": "error"
  },
  {
    "inputs": [],
    "name": "ReentrancyGuardReentrantCall",
    "type": "error"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "swapped",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "amount",
        "type": "uint256"
      }
    ],
    "name": "Bought",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "amount",
        "type": "uint256"
      }
    ],
    "name": "Burned",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "previousOwner",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "newOwner",
        "type": "address"
      }
    ],
    "name": "OwnershipTransferred",
    "type": "event"
  },
  {
    "inputs": [],
    "name": "burn",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "buy",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "buyAndBurn",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "config",
    "outputs": [
      {
        "internalType": "contract IConfig",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "getBalance",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "getSavvaBalance",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "owner",
    "outputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "renounceOwnership",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "totalBurned",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "newOwner",
        "type": "address"
      }
    ],
    "name": "transferOwnership",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "withdraw",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "stateMutability": "payable",
    "type": "receive"
  }
]
</file>

<file path="src/blockchain/abi/Config.json">
[
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "_initialOwner",
        "type": "address"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "constructor"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "owner",
        "type": "address"
      }
    ],
    "name": "OwnableInvalidOwner",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "account",
        "type": "address"
      }
    ],
    "name": "OwnableUnauthorizedAccount",
    "type": "error"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "bytes32",
        "name": "key",
        "type": "bytes32"
      },
      {
        "indexed": false,
        "internalType": "address",
        "name": "value",
        "type": "address"
      }
    ],
    "name": "ConfigAddressSet",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "bytes32",
        "name": "key",
        "type": "bytes32"
      },
      {
        "indexed": false,
        "internalType": "string",
        "name": "value",
        "type": "string"
      }
    ],
    "name": "ConfigSet",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "bytes32",
        "name": "key",
        "type": "bytes32"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "value",
        "type": "uint256"
      }
    ],
    "name": "ConfigUintSet",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "previousOwner",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "newOwner",
        "type": "address"
      }
    ],
    "name": "OwnershipTransferred",
    "type": "event"
  },
  {
    "inputs": [
      {
        "internalType": "bytes32",
        "name": "",
        "type": "bytes32"
      }
    ],
    "name": "config",
    "outputs": [
      {
        "internalType": "string",
        "name": "",
        "type": "string"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "bytes32",
        "name": "",
        "type": "bytes32"
      }
    ],
    "name": "configAddress",
    "outputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "bytes32",
        "name": "",
        "type": "bytes32"
      }
    ],
    "name": "configUint",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "bytes32",
        "name": "key",
        "type": "bytes32"
      }
    ],
    "name": "get",
    "outputs": [
      {
        "internalType": "string",
        "name": "",
        "type": "string"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "bytes32",
        "name": "key",
        "type": "bytes32"
      }
    ],
    "name": "getAddr",
    "outputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "bytes32",
        "name": "key",
        "type": "bytes32"
      }
    ],
    "name": "getUInt",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "owner",
    "outputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "renounceOwnership",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "bytes32",
        "name": "key",
        "type": "bytes32"
      },
      {
        "internalType": "string",
        "name": "value",
        "type": "string"
      }
    ],
    "name": "set",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "bytes32",
        "name": "key",
        "type": "bytes32"
      },
      {
        "internalType": "address",
        "name": "value",
        "type": "address"
      }
    ],
    "name": "setAddr",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "bytes32",
        "name": "key",
        "type": "bytes32"
      },
      {
        "internalType": "uint256",
        "name": "value",
        "type": "uint256"
      }
    ],
    "name": "setUInt",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "newOwner",
        "type": "address"
      }
    ],
    "name": "transferOwnership",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  }
]
</file>

<file path="src/blockchain/abi/ContentFund.json">
[
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "_config",
        "type": "address"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "constructor"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "address",
        "name": "nft_owner",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "amount",
        "type": "uint256"
      }
    ],
    "name": "ClaimedNFTGain",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "savva_cid",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "address",
        "name": "contributor",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "contributed",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "amount",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "author_share",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "nft_share",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "address",
        "name": "nft_owner",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "round_time",
        "type": "uint256"
      }
    ],
    "name": "ContributeEvent",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "savva_cid",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "address",
        "name": "winner",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "prize",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "amount",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "round_time",
        "type": "uint256"
      }
    ],
    "name": "PrizeEvent",
    "type": "event"
  },
  {
    "inputs": [],
    "name": "SLRoot",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "claimNFTGain",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "user",
        "type": "address"
      }
    ],
    "name": "claimableNftGain",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "config",
    "outputs": [
      {
        "internalType": "contract IConfig",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "author",
        "type": "address"
      },
      {
        "internalType": "string",
        "name": "domain",
        "type": "string"
      },
      {
        "internalType": "string",
        "name": "guid",
        "type": "string"
      },
      {
        "internalType": "uint256",
        "name": "amount",
        "type": "uint256"
      }
    ],
    "name": "contribute",
    "outputs": [],
    "stateMutability": "payable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "author",
        "type": "address"
      },
      {
        "internalType": "string",
        "name": "domain",
        "type": "string"
      },
      {
        "internalType": "string",
        "name": "guid",
        "type": "string"
      },
      {
        "internalType": "uint256",
        "name": "amount",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "deadline",
        "type": "uint256"
      },
      {
        "internalType": "uint8",
        "name": "v",
        "type": "uint8"
      },
      {
        "internalType": "bytes32",
        "name": "r",
        "type": "bytes32"
      },
      {
        "internalType": "bytes32",
        "name": "s",
        "type": "bytes32"
      }
    ],
    "name": "contributeWithPermit",
    "outputs": [],
    "stateMutability": "payable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "name": "funds",
    "outputs": [
      {
        "internalType": "address",
        "name": "author",
        "type": "address"
      },
      {
        "internalType": "string",
        "name": "domain",
        "type": "string"
      },
      {
        "internalType": "string",
        "name": "guid",
        "type": "string"
      },
      {
        "internalType": "uint256",
        "name": "total_contributed",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "amount",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "round_time",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "SLLeft",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "SLRight",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "savva_cid",
        "type": "uint256"
      }
    ],
    "name": "getFund",
    "outputs": [
      {
        "components": [
          {
            "internalType": "address",
            "name": "author",
            "type": "address"
          },
          {
            "internalType": "string",
            "name": "domain",
            "type": "string"
          },
          {
            "internalType": "string",
            "name": "guid",
            "type": "string"
          },
          {
            "components": [
              {
                "internalType": "address",
                "name": "contributor",
                "type": "address"
              },
              {
                "internalType": "uint256",
                "name": "contributed_before",
                "type": "uint256"
              }
            ],
            "internalType": "struct ContentFund.Contribution[]",
            "name": "contributions",
            "type": "tuple[]"
          },
          {
            "internalType": "uint256",
            "name": "total_contributed",
            "type": "uint256"
          },
          {
            "internalType": "uint256",
            "name": "amount",
            "type": "uint256"
          },
          {
            "internalType": "uint256",
            "name": "round_time",
            "type": "uint256"
          },
          {
            "internalType": "uint256",
            "name": "SLLeft",
            "type": "uint256"
          },
          {
            "internalType": "uint256",
            "name": "SLRight",
            "type": "uint256"
          }
        ],
        "internalType": "struct ContentFund.Fund",
        "name": "",
        "type": "tuple"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      }
    ],
    "name": "getNftOwner",
    "outputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "savva_cid",
        "type": "uint256"
      }
    ],
    "name": "getNumberOfContributions",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "savva_cid",
        "type": "uint256"
      }
    ],
    "name": "getTotalContributed",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "isTimeToProcess",
    "outputs": [
      {
        "internalType": "bool",
        "name": "",
        "type": "bool"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      }
    ],
    "name": "nftOwnerGain",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "max_rounds",
        "type": "uint256"
      }
    ],
    "name": "processRounds",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  }
]
</file>

<file path="src/blockchain/abi/ContentNFT.json">
[
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "_config",
        "type": "address"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "constructor"
  },
  {
    "inputs": [],
    "name": "ERC721EnumerableForbiddenBatchMint",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "sender",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      },
      {
        "internalType": "address",
        "name": "owner",
        "type": "address"
      }
    ],
    "name": "ERC721IncorrectOwner",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "operator",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      }
    ],
    "name": "ERC721InsufficientApproval",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "approver",
        "type": "address"
      }
    ],
    "name": "ERC721InvalidApprover",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "operator",
        "type": "address"
      }
    ],
    "name": "ERC721InvalidOperator",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "owner",
        "type": "address"
      }
    ],
    "name": "ERC721InvalidOwner",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "receiver",
        "type": "address"
      }
    ],
    "name": "ERC721InvalidReceiver",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "sender",
        "type": "address"
      }
    ],
    "name": "ERC721InvalidSender",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      }
    ],
    "name": "ERC721NonexistentToken",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "owner",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "index",
        "type": "uint256"
      }
    ],
    "name": "ERC721OutOfBoundsIndex",
    "type": "error"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "owner",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "approved",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      }
    ],
    "name": "Approval",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "owner",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "operator",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "bool",
        "name": "approved",
        "type": "bool"
      }
    ],
    "name": "ApprovalForAll",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "_fromTokenId",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "_toTokenId",
        "type": "uint256"
      }
    ],
    "name": "BatchMetadataUpdate",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "_tokenId",
        "type": "uint256"
      }
    ],
    "name": "MetadataUpdate",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "address",
        "name": "author",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "token_id",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "string",
        "name": "domain",
        "type": "string"
      },
      {
        "indexed": false,
        "internalType": "string",
        "name": "guid",
        "type": "string"
      },
      {
        "indexed": false,
        "internalType": "string",
        "name": "uri",
        "type": "string"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "price",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "timestamp",
        "type": "uint256"
      }
    ],
    "name": "Mint",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "from",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "to",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      }
    ],
    "name": "Transfer",
    "type": "event"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "to",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      }
    ],
    "name": "approve",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "owner",
        "type": "address"
      }
    ],
    "name": "balanceOf",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      }
    ],
    "name": "burn",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "config",
    "outputs": [
      {
        "internalType": "contract IConfig",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      }
    ],
    "name": "getApproved",
    "outputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "owner",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "operator",
        "type": "address"
      }
    ],
    "name": "isApprovedForAll",
    "outputs": [
      {
        "internalType": "bool",
        "name": "",
        "type": "bool"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "author",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      },
      {
        "internalType": "string",
        "name": "domain",
        "type": "string"
      },
      {
        "internalType": "string",
        "name": "guid",
        "type": "string"
      },
      {
        "internalType": "string",
        "name": "uri",
        "type": "string"
      }
    ],
    "name": "mint",
    "outputs": [],
    "stateMutability": "payable",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "name",
    "outputs": [
      {
        "internalType": "string",
        "name": "",
        "type": "string"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      }
    ],
    "name": "ownerOf",
    "outputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "from",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "to",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      }
    ],
    "name": "safeTransferFrom",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "from",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "to",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      },
      {
        "internalType": "bytes",
        "name": "data",
        "type": "bytes"
      }
    ],
    "name": "safeTransferFrom",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "operator",
        "type": "address"
      },
      {
        "internalType": "bool",
        "name": "approved",
        "type": "bool"
      }
    ],
    "name": "setApprovalForAll",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "bytes4",
        "name": "interfaceId",
        "type": "bytes4"
      }
    ],
    "name": "supportsInterface",
    "outputs": [
      {
        "internalType": "bool",
        "name": "",
        "type": "bool"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "symbol",
    "outputs": [
      {
        "internalType": "string",
        "name": "",
        "type": "string"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "index",
        "type": "uint256"
      }
    ],
    "name": "tokenByIndex",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "owner",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "index",
        "type": "uint256"
      }
    ],
    "name": "tokenOfOwnerByIndex",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      }
    ],
    "name": "tokenURI",
    "outputs": [
      {
        "internalType": "string",
        "name": "",
        "type": "string"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "totalSupply",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "from",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "to",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      }
    ],
    "name": "transferFrom",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  }
]
</file>

<file path="src/blockchain/abi/ContentRegistry.json">
[
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "_config",
        "type": "address"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "constructor"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "address",
        "name": "admin",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "string",
        "name": "domain",
        "type": "string"
      },
      {
        "indexed": false,
        "internalType": "string",
        "name": "command",
        "type": "string"
      },
      {
        "indexed": false,
        "internalType": "string",
        "name": "p1",
        "type": "string"
      },
      {
        "indexed": false,
        "internalType": "string",
        "name": "p2",
        "type": "string"
      },
      {
        "indexed": false,
        "internalType": "string",
        "name": "p3",
        "type": "string"
      },
      {
        "indexed": false,
        "internalType": "string",
        "name": "p4",
        "type": "string"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "timestamp",
        "type": "uint256"
      }
    ],
    "name": "Command",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "address",
        "name": "author",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "string",
        "name": "domain",
        "type": "string"
      },
      {
        "indexed": false,
        "internalType": "address",
        "name": "poster",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "string",
        "name": "guid",
        "type": "string"
      },
      {
        "indexed": false,
        "internalType": "string",
        "name": "ipfs",
        "type": "string"
      },
      {
        "indexed": false,
        "internalType": "bytes32",
        "name": "content_type",
        "type": "bytes32"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "savva_cid",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "timestamp",
        "type": "uint256"
      }
    ],
    "name": "RegEvent",
    "type": "event"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "allowed_address",
        "type": "address"
      }
    ],
    "name": "allow",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      }
    ],
    "name": "allowed",
    "outputs": [
      {
        "internalType": "bool",
        "name": "",
        "type": "bool"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "string",
        "name": "domain",
        "type": "string"
      },
      {
        "internalType": "string",
        "name": "cmd",
        "type": "string"
      },
      {
        "internalType": "string",
        "name": "p1",
        "type": "string"
      },
      {
        "internalType": "string",
        "name": "p2",
        "type": "string"
      },
      {
        "internalType": "string",
        "name": "p3",
        "type": "string"
      },
      {
        "internalType": "string",
        "name": "p4",
        "type": "string"
      }
    ],
    "name": "command",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "config",
    "outputs": [
      {
        "internalType": "contract IConfig",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "allowed_address",
        "type": "address"
      }
    ],
    "name": "disallow",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "string",
        "name": "domain",
        "type": "string"
      },
      {
        "internalType": "address",
        "name": "author",
        "type": "address"
      },
      {
        "internalType": "string",
        "name": "guid",
        "type": "string"
      },
      {
        "internalType": "string",
        "name": "ipfs",
        "type": "string"
      },
      {
        "internalType": "bytes32",
        "name": "content_type",
        "type": "bytes32"
      }
    ],
    "name": "reg",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "string[]",
        "name": "domains",
        "type": "string[]"
      },
      {
        "internalType": "string[]",
        "name": "guids",
        "type": "string[]"
      },
      {
        "internalType": "string[]",
        "name": "ipfss",
        "type": "string[]"
      },
      {
        "internalType": "bytes32[]",
        "name": "content_types",
        "type": "bytes32[]"
      }
    ],
    "name": "regArray",
    "outputs": [
      {
        "internalType": "uint256[]",
        "name": "",
        "type": "uint256[]"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "function"
  }
]
</file>

<file path="src/blockchain/abi/Fundraiser.json">
[
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "_config",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "_initialOwner",
        "type": "address"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "constructor"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "owner",
        "type": "address"
      }
    ],
    "name": "OwnableInvalidOwner",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "account",
        "type": "address"
      }
    ],
    "name": "OwnableUnauthorizedAccount",
    "type": "error"
  },
  {
    "inputs": [],
    "name": "ReentrancyGuardReentrantCall",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "token",
        "type": "address"
      }
    ],
    "name": "SafeERC20FailedOperation",
    "type": "error"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "id",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "address",
        "name": "creator",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "totalCollected",
        "type": "uint256"
      }
    ],
    "name": "CampaignClosed",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "id",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "string",
        "name": "title",
        "type": "string"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "targetAmount",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "address",
        "name": "creator",
        "type": "address"
      }
    ],
    "name": "CampaignCreated",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "id",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "address",
        "name": "contributor",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "amount",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "address",
        "name": "creator",
        "type": "address"
      }
    ],
    "name": "ContributionReceived",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "previousOwner",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "newOwner",
        "type": "address"
      }
    ],
    "name": "OwnershipTransferred",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "token",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "bool",
        "name": "status",
        "type": "bool"
      }
    ],
    "name": "TokenAccepted",
    "type": "event"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      }
    ],
    "name": "acceptedTokens",
    "outputs": [
      {
        "internalType": "bool",
        "name": "",
        "type": "bool"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "campaignCounter",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "name": "campaigns",
    "outputs": [
      {
        "internalType": "string",
        "name": "title",
        "type": "string"
      },
      {
        "internalType": "address",
        "name": "creator",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "targetAmount",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "totalContributed",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "campaignId",
        "type": "uint256"
      }
    ],
    "name": "closeCampaign",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "config",
    "outputs": [
      {
        "internalType": "contract IConfig",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "campaignId",
        "type": "uint256"
      },
      {
        "internalType": "address",
        "name": "fromToken",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "amountIn",
        "type": "uint256"
      }
    ],
    "name": "contribute",
    "outputs": [],
    "stateMutability": "payable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "campaignId",
        "type": "uint256"
      },
      {
        "internalType": "address",
        "name": "fromToken",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "amountIn",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "_deadline",
        "type": "uint256"
      },
      {
        "internalType": "uint8",
        "name": "_v",
        "type": "uint8"
      },
      {
        "internalType": "bytes32",
        "name": "_r",
        "type": "bytes32"
      },
      {
        "internalType": "bytes32",
        "name": "_s",
        "type": "bytes32"
      }
    ],
    "name": "contributeWithPermit",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "string",
        "name": "title",
        "type": "string"
      },
      {
        "internalType": "uint256",
        "name": "targetAmount",
        "type": "uint256"
      }
    ],
    "name": "createCampaign",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "getAcceptedTokens",
    "outputs": [
      {
        "internalType": "address[]",
        "name": "",
        "type": "address[]"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "owner",
    "outputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "renounceOwnership",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "token",
        "type": "address"
      },
      {
        "internalType": "bool",
        "name": "status",
        "type": "bool"
      }
    ],
    "name": "setAcceptedToken",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "newOwner",
        "type": "address"
      }
    ],
    "name": "transferOwnership",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  }
]
</file>

<file path="src/blockchain/abi/Governance.json">
[
  {
    "inputs": [
      {
        "internalType": "contract IVotes",
        "name": "_token",
        "type": "address"
      },
      {
        "internalType": "contract IConfig",
        "name": "_config",
        "type": "address"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "constructor"
  },
  {
    "inputs": [],
    "name": "CheckpointUnorderedInsertion",
    "type": "error"
  },
  {
    "inputs": [],
    "name": "FailedCall",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "voter",
        "type": "address"
      }
    ],
    "name": "GovernorAlreadyCastVote",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "proposalId",
        "type": "uint256"
      }
    ],
    "name": "GovernorAlreadyQueuedProposal",
    "type": "error"
  },
  {
    "inputs": [],
    "name": "GovernorDisabledDeposit",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "proposer",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "votes",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "threshold",
        "type": "uint256"
      }
    ],
    "name": "GovernorInsufficientProposerVotes",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "targets",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "calldatas",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "values",
        "type": "uint256"
      }
    ],
    "name": "GovernorInvalidProposalLength",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "quorumNumerator",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "quorumDenominator",
        "type": "uint256"
      }
    ],
    "name": "GovernorInvalidQuorumFraction",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "voter",
        "type": "address"
      }
    ],
    "name": "GovernorInvalidSignature",
    "type": "error"
  },
  {
    "inputs": [],
    "name": "GovernorInvalidVoteParams",
    "type": "error"
  },
  {
    "inputs": [],
    "name": "GovernorInvalidVoteType",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "votingPeriod",
        "type": "uint256"
      }
    ],
    "name": "GovernorInvalidVotingPeriod",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "proposalId",
        "type": "uint256"
      }
    ],
    "name": "GovernorNonexistentProposal",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "proposalId",
        "type": "uint256"
      }
    ],
    "name": "GovernorNotQueuedProposal",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "account",
        "type": "address"
      }
    ],
    "name": "GovernorOnlyExecutor",
    "type": "error"
  },
  {
    "inputs": [],
    "name": "GovernorQueueNotImplemented",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "proposer",
        "type": "address"
      }
    ],
    "name": "GovernorRestrictedProposer",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "proposalId",
        "type": "uint256"
      },
      {
        "internalType": "address",
        "name": "account",
        "type": "address"
      }
    ],
    "name": "GovernorUnableToCancel",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "proposalId",
        "type": "uint256"
      },
      {
        "internalType": "enum IGovernor.ProposalState",
        "name": "current",
        "type": "uint8"
      },
      {
        "internalType": "bytes32",
        "name": "expectedStates",
        "type": "bytes32"
      }
    ],
    "name": "GovernorUnexpectedProposalState",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "account",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "currentNonce",
        "type": "uint256"
      }
    ],
    "name": "InvalidAccountNonce",
    "type": "error"
  },
  {
    "inputs": [],
    "name": "InvalidShortString",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "uint8",
        "name": "bits",
        "type": "uint8"
      },
      {
        "internalType": "uint256",
        "name": "value",
        "type": "uint256"
      }
    ],
    "name": "SafeCastOverflowedUintDowncast",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "string",
        "name": "str",
        "type": "string"
      }
    ],
    "name": "StringTooLong",
    "type": "error"
  },
  {
    "anonymous": false,
    "inputs": [],
    "name": "EIP712DomainChanged",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "proposalId",
        "type": "uint256"
      }
    ],
    "name": "ProposalCanceled",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "proposalId",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "address",
        "name": "proposer",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "address[]",
        "name": "targets",
        "type": "address[]"
      },
      {
        "indexed": false,
        "internalType": "uint256[]",
        "name": "values",
        "type": "uint256[]"
      },
      {
        "indexed": false,
        "internalType": "string[]",
        "name": "signatures",
        "type": "string[]"
      },
      {
        "indexed": false,
        "internalType": "bytes[]",
        "name": "calldatas",
        "type": "bytes[]"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "voteStart",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "voteEnd",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "string",
        "name": "description",
        "type": "string"
      }
    ],
    "name": "ProposalCreated",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "proposalId",
        "type": "uint256"
      }
    ],
    "name": "ProposalExecuted",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "proposalId",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "etaSeconds",
        "type": "uint256"
      }
    ],
    "name": "ProposalQueued",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "oldProposalThreshold",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "newProposalThreshold",
        "type": "uint256"
      }
    ],
    "name": "ProposalThresholdSet",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "oldQuorumNumerator",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "newQuorumNumerator",
        "type": "uint256"
      }
    ],
    "name": "QuorumNumeratorUpdated",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "voter",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "proposalId",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint8",
        "name": "support",
        "type": "uint8"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "weight",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "string",
        "name": "reason",
        "type": "string"
      }
    ],
    "name": "VoteCast",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "voter",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "proposalId",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint8",
        "name": "support",
        "type": "uint8"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "weight",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "string",
        "name": "reason",
        "type": "string"
      },
      {
        "indexed": false,
        "internalType": "bytes",
        "name": "params",
        "type": "bytes"
      }
    ],
    "name": "VoteCastWithParams",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "oldVotingDelay",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "newVotingDelay",
        "type": "uint256"
      }
    ],
    "name": "VotingDelaySet",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "oldVotingPeriod",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "newVotingPeriod",
        "type": "uint256"
      }
    ],
    "name": "VotingPeriodSet",
    "type": "event"
  },
  {
    "inputs": [],
    "name": "BALLOT_TYPEHASH",
    "outputs": [
      {
        "internalType": "bytes32",
        "name": "",
        "type": "bytes32"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "CLOCK_MODE",
    "outputs": [
      {
        "internalType": "string",
        "name": "",
        "type": "string"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "COUNTING_MODE",
    "outputs": [
      {
        "internalType": "string",
        "name": "",
        "type": "string"
      }
    ],
    "stateMutability": "pure",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "EXTENDED_BALLOT_TYPEHASH",
    "outputs": [
      {
        "internalType": "bytes32",
        "name": "",
        "type": "bytes32"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      }
    ],
    "name": "balances",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address[]",
        "name": "targets",
        "type": "address[]"
      },
      {
        "internalType": "uint256[]",
        "name": "values",
        "type": "uint256[]"
      },
      {
        "internalType": "bytes[]",
        "name": "calldatas",
        "type": "bytes[]"
      },
      {
        "internalType": "bytes32",
        "name": "descriptionHash",
        "type": "bytes32"
      }
    ],
    "name": "cancel",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "proposalId",
        "type": "uint256"
      },
      {
        "internalType": "uint8",
        "name": "support",
        "type": "uint8"
      }
    ],
    "name": "castVote",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "proposalId",
        "type": "uint256"
      },
      {
        "internalType": "uint8",
        "name": "support",
        "type": "uint8"
      },
      {
        "internalType": "address",
        "name": "voter",
        "type": "address"
      },
      {
        "internalType": "bytes",
        "name": "signature",
        "type": "bytes"
      }
    ],
    "name": "castVoteBySig",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "proposalId",
        "type": "uint256"
      },
      {
        "internalType": "uint8",
        "name": "support",
        "type": "uint8"
      },
      {
        "internalType": "string",
        "name": "reason",
        "type": "string"
      }
    ],
    "name": "castVoteWithReason",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "proposalId",
        "type": "uint256"
      },
      {
        "internalType": "uint8",
        "name": "support",
        "type": "uint8"
      },
      {
        "internalType": "string",
        "name": "reason",
        "type": "string"
      },
      {
        "internalType": "bytes",
        "name": "params",
        "type": "bytes"
      }
    ],
    "name": "castVoteWithReasonAndParams",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "proposalId",
        "type": "uint256"
      },
      {
        "internalType": "uint8",
        "name": "support",
        "type": "uint8"
      },
      {
        "internalType": "address",
        "name": "voter",
        "type": "address"
      },
      {
        "internalType": "string",
        "name": "reason",
        "type": "string"
      },
      {
        "internalType": "bytes",
        "name": "params",
        "type": "bytes"
      },
      {
        "internalType": "bytes",
        "name": "signature",
        "type": "bytes"
      }
    ],
    "name": "castVoteWithReasonAndParamsBySig",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "clock",
    "outputs": [
      {
        "internalType": "uint48",
        "name": "",
        "type": "uint48"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "config",
    "outputs": [
      {
        "internalType": "contract IConfig",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "deposit",
    "outputs": [],
    "stateMutability": "payable",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "eip712Domain",
    "outputs": [
      {
        "internalType": "bytes1",
        "name": "fields",
        "type": "bytes1"
      },
      {
        "internalType": "string",
        "name": "name",
        "type": "string"
      },
      {
        "internalType": "string",
        "name": "version",
        "type": "string"
      },
      {
        "internalType": "uint256",
        "name": "chainId",
        "type": "uint256"
      },
      {
        "internalType": "address",
        "name": "verifyingContract",
        "type": "address"
      },
      {
        "internalType": "bytes32",
        "name": "salt",
        "type": "bytes32"
      },
      {
        "internalType": "uint256[]",
        "name": "extensions",
        "type": "uint256[]"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address[]",
        "name": "targets",
        "type": "address[]"
      },
      {
        "internalType": "uint256[]",
        "name": "values",
        "type": "uint256[]"
      },
      {
        "internalType": "bytes[]",
        "name": "calldatas",
        "type": "bytes[]"
      },
      {
        "internalType": "bytes32",
        "name": "descriptionHash",
        "type": "bytes32"
      }
    ],
    "name": "execute",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "payable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address[]",
        "name": "targets",
        "type": "address[]"
      },
      {
        "internalType": "uint256[]",
        "name": "values",
        "type": "uint256[]"
      },
      {
        "internalType": "bytes[]",
        "name": "calldatas",
        "type": "bytes[]"
      },
      {
        "internalType": "bytes32",
        "name": "descriptionHash",
        "type": "bytes32"
      }
    ],
    "name": "getProposalId",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "account",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "timepoint",
        "type": "uint256"
      }
    ],
    "name": "getVotes",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "account",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "timepoint",
        "type": "uint256"
      },
      {
        "internalType": "bytes",
        "name": "params",
        "type": "bytes"
      }
    ],
    "name": "getVotesWithParams",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "proposalId",
        "type": "uint256"
      },
      {
        "internalType": "address",
        "name": "account",
        "type": "address"
      }
    ],
    "name": "hasVoted",
    "outputs": [
      {
        "internalType": "bool",
        "name": "",
        "type": "bool"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address[]",
        "name": "targets",
        "type": "address[]"
      },
      {
        "internalType": "uint256[]",
        "name": "values",
        "type": "uint256[]"
      },
      {
        "internalType": "bytes[]",
        "name": "calldatas",
        "type": "bytes[]"
      },
      {
        "internalType": "bytes32",
        "name": "descriptionHash",
        "type": "bytes32"
      }
    ],
    "name": "hashProposal",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "pure",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "name",
    "outputs": [
      {
        "internalType": "string",
        "name": "",
        "type": "string"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "owner",
        "type": "address"
      }
    ],
    "name": "nonces",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      },
      {
        "internalType": "uint256[]",
        "name": "",
        "type": "uint256[]"
      },
      {
        "internalType": "uint256[]",
        "name": "",
        "type": "uint256[]"
      },
      {
        "internalType": "bytes",
        "name": "",
        "type": "bytes"
      }
    ],
    "name": "onERC1155BatchReceived",
    "outputs": [
      {
        "internalType": "bytes4",
        "name": "",
        "type": "bytes4"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      },
      {
        "internalType": "bytes",
        "name": "",
        "type": "bytes"
      }
    ],
    "name": "onERC1155Received",
    "outputs": [
      {
        "internalType": "bytes4",
        "name": "",
        "type": "bytes4"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      },
      {
        "internalType": "bytes",
        "name": "",
        "type": "bytes"
      }
    ],
    "name": "onERC721Received",
    "outputs": [
      {
        "internalType": "bytes4",
        "name": "",
        "type": "bytes4"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "proposalId",
        "type": "uint256"
      }
    ],
    "name": "proposalDeadline",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "proposalId",
        "type": "uint256"
      }
    ],
    "name": "proposalEta",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "name": "proposalNeedsQueuing",
    "outputs": [
      {
        "internalType": "bool",
        "name": "",
        "type": "bool"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "proposalId",
        "type": "uint256"
      }
    ],
    "name": "proposalProposer",
    "outputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "proposalId",
        "type": "uint256"
      }
    ],
    "name": "proposalSnapshot",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "proposalThreshold",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "proposalId",
        "type": "uint256"
      }
    ],
    "name": "proposalVotes",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "againstVotes",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "forVotes",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "abstainVotes",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address[]",
        "name": "targets",
        "type": "address[]"
      },
      {
        "internalType": "uint256[]",
        "name": "values",
        "type": "uint256[]"
      },
      {
        "internalType": "bytes[]",
        "name": "calldatas",
        "type": "bytes[]"
      },
      {
        "internalType": "string",
        "name": "description",
        "type": "string"
      }
    ],
    "name": "propose",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address[]",
        "name": "targets",
        "type": "address[]"
      },
      {
        "internalType": "uint256[]",
        "name": "values",
        "type": "uint256[]"
      },
      {
        "internalType": "bytes[]",
        "name": "calldatas",
        "type": "bytes[]"
      },
      {
        "internalType": "bytes32",
        "name": "descriptionHash",
        "type": "bytes32"
      }
    ],
    "name": "queue",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "blockNumber",
        "type": "uint256"
      }
    ],
    "name": "quorum",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "quorumDenominator",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "timepoint",
        "type": "uint256"
      }
    ],
    "name": "quorumNumerator",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "quorumNumerator",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "target",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "value",
        "type": "uint256"
      },
      {
        "internalType": "bytes",
        "name": "data",
        "type": "bytes"
      }
    ],
    "name": "relay",
    "outputs": [],
    "stateMutability": "payable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "newProposalThreshold",
        "type": "uint256"
      }
    ],
    "name": "setProposalThreshold",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint48",
        "name": "newVotingDelay",
        "type": "uint48"
      }
    ],
    "name": "setVotingDelay",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint32",
        "name": "newVotingPeriod",
        "type": "uint32"
      }
    ],
    "name": "setVotingPeriod",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "proposalId",
        "type": "uint256"
      }
    ],
    "name": "state",
    "outputs": [
      {
        "internalType": "enum IGovernor.ProposalState",
        "name": "",
        "type": "uint8"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "bytes4",
        "name": "interfaceId",
        "type": "bytes4"
      }
    ],
    "name": "supportsInterface",
    "outputs": [
      {
        "internalType": "bool",
        "name": "",
        "type": "bool"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "token",
    "outputs": [
      {
        "internalType": "contract IERC5805",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "newQuorumNumerator",
        "type": "uint256"
      }
    ],
    "name": "updateQuorumNumerator",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "version",
    "outputs": [
      {
        "internalType": "string",
        "name": "",
        "type": "string"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "votingDelay",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "votingPeriod",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "amount",
        "type": "uint256"
      }
    ],
    "name": "withdraw",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "stateMutability": "payable",
    "type": "receive"
  }
]
</file>

<file path="src/blockchain/abi/IContentFund.json">
[
  {
    "inputs": [],
    "name": "claimNFTGain",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "owner",
        "type": "address"
      }
    ],
    "name": "nftOwnerGain",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  }
]
</file>

<file path="src/blockchain/abi/IPulseXFactory.json">
[
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "tokenA",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "tokenB",
        "type": "address"
      }
    ],
    "name": "getPair",
    "outputs": [
      {
        "internalType": "address",
        "name": "pair",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  }
]
</file>

<file path="src/blockchain/abi/IPulseXRouter.json">
[
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "amountIn",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "amountOutMin",
        "type": "uint256"
      },
      {
        "internalType": "address[]",
        "name": "path",
        "type": "address[]"
      },
      {
        "internalType": "address",
        "name": "to",
        "type": "address"
      }
    ],
    "name": "swapExactTokensForTokens",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "amountOut",
        "type": "uint256"
      }
    ],
    "stateMutability": "payable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "amountIn",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "amountOutMin",
        "type": "uint256"
      },
      {
        "internalType": "address[]",
        "name": "path",
        "type": "address[]"
      },
      {
        "internalType": "address",
        "name": "to",
        "type": "address"
      }
    ],
    "name": "swapExactTokensForTokensV1",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "amountOut",
        "type": "uint256"
      }
    ],
    "stateMutability": "payable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "amountIn",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "amountOutMin",
        "type": "uint256"
      },
      {
        "internalType": "address[]",
        "name": "path",
        "type": "address[]"
      },
      {
        "internalType": "address",
        "name": "to",
        "type": "address"
      }
    ],
    "name": "swapExactTokensForTokensV2",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "amountOut",
        "type": "uint256"
      }
    ],
    "stateMutability": "payable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "amountIn",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "amountOutMin",
        "type": "uint256"
      },
      {
        "internalType": "address[]",
        "name": "path",
        "type": "address[]"
      },
      {
        "internalType": "address",
        "name": "to",
        "type": "address"
      }
    ],
    "name": "swapExactTokensForTokensV3",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "amountOut",
        "type": "uint256"
      }
    ],
    "stateMutability": "payable",
    "type": "function"
  }
]
</file>

<file path="src/blockchain/abi/IStaking.json">
[
  {
    "inputs": [],
    "name": "claimGain",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "user",
        "type": "address"
      }
    ],
    "name": "claimable",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  }
]
</file>

<file path="src/blockchain/abi/IWPLS.json">
[
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "owner",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "spender",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "value",
        "type": "uint256"
      }
    ],
    "name": "Approval",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "from",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "to",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "value",
        "type": "uint256"
      }
    ],
    "name": "Transfer",
    "type": "event"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "owner",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "spender",
        "type": "address"
      }
    ],
    "name": "allowance",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "spender",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "value",
        "type": "uint256"
      }
    ],
    "name": "approve",
    "outputs": [
      {
        "internalType": "bool",
        "name": "",
        "type": "bool"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "account",
        "type": "address"
      }
    ],
    "name": "balanceOf",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "deposit",
    "outputs": [],
    "stateMutability": "payable",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "totalSupply",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "to",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "value",
        "type": "uint256"
      }
    ],
    "name": "transfer",
    "outputs": [
      {
        "internalType": "bool",
        "name": "",
        "type": "bool"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "from",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "to",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "value",
        "type": "uint256"
      }
    ],
    "name": "transferFrom",
    "outputs": [
      {
        "internalType": "bool",
        "name": "",
        "type": "bool"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "name": "withdraw",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  }
]
</file>

<file path="src/blockchain/abi/ListMarket.json">
[
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "_config",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "_collector",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "_initialOwner",
        "type": "address"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "constructor"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "owner",
        "type": "address"
      }
    ],
    "name": "OwnableInvalidOwner",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "account",
        "type": "address"
      }
    ],
    "name": "OwnableUnauthorizedAccount",
    "type": "error"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "string",
        "name": "list_name",
        "type": "string"
      },
      {
        "indexed": false,
        "internalType": "address",
        "name": "buyer",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "price",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "timestamp",
        "type": "uint256"
      }
    ],
    "name": "Bought",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "previousOwner",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "newOwner",
        "type": "address"
      }
    ],
    "name": "OwnershipTransferred",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "string",
        "name": "list_name",
        "type": "string"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "price",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "timestamp",
        "type": "uint256"
      }
    ],
    "name": "PriceSet",
    "type": "event"
  },
  {
    "inputs": [
      {
        "internalType": "string",
        "name": "domain",
        "type": "string"
      },
      {
        "internalType": "string",
        "name": "list_name",
        "type": "string"
      },
      {
        "internalType": "string",
        "name": "savva_cid",
        "type": "string"
      }
    ],
    "name": "buy",
    "outputs": [],
    "stateMutability": "payable",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "collector",
    "outputs": [
      {
        "internalType": "address payable",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "config",
    "outputs": [
      {
        "internalType": "contract IConfig",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "string",
        "name": "list_name",
        "type": "string"
      }
    ],
    "name": "getPrice",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "owner",
    "outputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "string",
        "name": "",
        "type": "string"
      }
    ],
    "name": "prices",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "renounceOwnership",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address payable",
        "name": "_collector",
        "type": "address"
      }
    ],
    "name": "setCollector",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "string",
        "name": "list_name",
        "type": "string"
      },
      {
        "internalType": "uint256",
        "name": "price",
        "type": "uint256"
      }
    ],
    "name": "setPrice",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "newOwner",
        "type": "address"
      }
    ],
    "name": "transferOwnership",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  }
]
</file>

<file path="src/blockchain/abi/NFTAuction.json">
[
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "_config",
        "type": "address"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "constructor"
  },
  {
    "inputs": [],
    "name": "ReentrancyGuardReentrantCall",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "token",
        "type": "address"
      }
    ],
    "name": "SafeERC20FailedOperation",
    "type": "error"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      }
    ],
    "name": "AuctionCancelled",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "seller",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "startingPrice",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "endTime",
        "type": "uint256"
      }
    ],
    "name": "AuctionCreated",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "seller",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "winner",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "winningBid",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "address",
        "name": "bidToken",
        "type": "address"
      }
    ],
    "name": "AuctionFinalized",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "seller",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "bidder",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "bidAmount",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "address",
        "name": "bidToken",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "address",
        "name": "refundAddress",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "refundAmount",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "address",
        "name": "refundToken",
        "type": "address"
      }
    ],
    "name": "BidPlaced",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "amount",
        "type": "uint256"
      }
    ],
    "name": "ClaimedNftGain",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "amount",
        "type": "uint256"
      }
    ],
    "name": "ClaimedStakingGain",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "user",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "token",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "amount",
        "type": "uint256"
      }
    ],
    "name": "RefundWithdrawn",
    "type": "event"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "name": "auctions",
    "outputs": [
      {
        "internalType": "address",
        "name": "seller",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "startingPrice",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "highestBid",
        "type": "uint256"
      },
      {
        "internalType": "address",
        "name": "highestBidder",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "endTime",
        "type": "uint256"
      },
      {
        "internalType": "bool",
        "name": "active",
        "type": "bool"
      },
      {
        "internalType": "address",
        "name": "bidToken",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      }
    ],
    "name": "cancelAuction",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "claimNftGain",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "claimStakingGain",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "config",
    "outputs": [
      {
        "internalType": "contract IConfig",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "startingPrice",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "duration",
        "type": "uint256"
      }
    ],
    "name": "createAuction",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      }
    ],
    "name": "finalizeAuction",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      },
      {
        "internalType": "bytes",
        "name": "",
        "type": "bytes"
      }
    ],
    "name": "onERC721Received",
    "outputs": [
      {
        "internalType": "bytes4",
        "name": "",
        "type": "bytes4"
      }
    ],
    "stateMutability": "pure",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "bidAmount",
        "type": "uint256"
      },
      {
        "internalType": "address",
        "name": "tokenAddress",
        "type": "address"
      }
    ],
    "name": "placeBid",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "bidAmount",
        "type": "uint256"
      },
      {
        "internalType": "address",
        "name": "tokenAddress",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "deadline",
        "type": "uint256"
      },
      {
        "internalType": "uint8",
        "name": "v",
        "type": "uint8"
      },
      {
        "internalType": "bytes32",
        "name": "r",
        "type": "bytes32"
      },
      {
        "internalType": "bytes32",
        "name": "s",
        "type": "bytes32"
      }
    ],
    "name": "placeBidWithPermit",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      }
    ],
    "name": "refunds",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "tokenAddress",
        "type": "address"
      }
    ],
    "name": "withdrawRefund",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  }
]
</file>

<file path="src/blockchain/abi/NFTMarketplace.json">
[
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "_config",
        "type": "address"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "constructor"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "token_id",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "address",
        "name": "owner",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "price",
        "type": "uint256"
      }
    ],
    "name": "NFTAddedToMarket",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "token_id",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "address",
        "name": "old_owner",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "address",
        "name": "new_owner",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "price",
        "type": "uint256"
      }
    ],
    "name": "NFTBought",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "token_id",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "address",
        "name": "old_owner",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "address",
        "name": "new_owner",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "price",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "new_price",
        "type": "uint256"
      }
    ],
    "name": "NFTOwnerChanged",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "token_id",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "address",
        "name": "owner",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "price",
        "type": "uint256"
      }
    ],
    "name": "NFTPriceChanged",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "token_id",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "address",
        "name": "owner",
        "type": "address"
      }
    ],
    "name": "NFTRemovedFromMarket",
    "type": "event"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "price",
        "type": "uint256"
      }
    ],
    "name": "addToMarket",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "amount",
        "type": "uint256"
      }
    ],
    "name": "buy",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "amount",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "new_price",
        "type": "uint256"
      }
    ],
    "name": "buyAndLeaveOnMarket",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "amount",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "deadline",
        "type": "uint256"
      },
      {
        "internalType": "uint8",
        "name": "v",
        "type": "uint8"
      },
      {
        "internalType": "bytes32",
        "name": "r",
        "type": "bytes32"
      },
      {
        "internalType": "bytes32",
        "name": "s",
        "type": "bytes32"
      }
    ],
    "name": "buyWithPermit",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "price",
        "type": "uint256"
      }
    ],
    "name": "changePrice",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "config",
    "outputs": [
      {
        "internalType": "contract IConfig",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      }
    ],
    "name": "getNFTOwner",
    "outputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      }
    ],
    "name": "getPrice",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "name": "nfts",
    "outputs": [
      {
        "internalType": "address",
        "name": "owner",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "price",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "name": "nftsByOwner",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      },
      {
        "internalType": "bytes",
        "name": "",
        "type": "bytes"
      }
    ],
    "name": "onERC721Received",
    "outputs": [
      {
        "internalType": "bytes4",
        "name": "",
        "type": "bytes4"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "tokenId",
        "type": "uint256"
      }
    ],
    "name": "removeFromMarket",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  }
]
</file>

<file path="src/blockchain/abi/Promo.json">
[
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "_config",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "_initialOwner",
        "type": "address"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "constructor"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "owner",
        "type": "address"
      }
    ],
    "name": "OwnableInvalidOwner",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "account",
        "type": "address"
      }
    ],
    "name": "OwnableUnauthorizedAccount",
    "type": "error"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "previousOwner",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "newOwner",
        "type": "address"
      }
    ],
    "name": "OwnershipTransferred",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "address",
        "name": "donator",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "savva_amount",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "bytes32",
        "name": "hash",
        "type": "bytes32"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "pls_amount",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "valid_till",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "timestamp",
        "type": "uint256"
      }
    ],
    "name": "PromoCodeCreated",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "address",
        "name": "donator",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "address",
        "name": "user",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "savva_amount",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "bytes32",
        "name": "hash",
        "type": "bytes32"
      },
      {
        "indexed": false,
        "internalType": "string",
        "name": "secret",
        "type": "string"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "pls_amount",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "valid_till",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "timestamp",
        "type": "uint256"
      }
    ],
    "name": "PromoCodeRedeemed",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "address",
        "name": "donator",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "savva_amount",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "bytes32",
        "name": "hash",
        "type": "bytes32"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "pls_amount",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "valid_till",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "timestamp",
        "type": "uint256"
      }
    ],
    "name": "PromoCodeReturned",
    "type": "event"
  },
  {
    "inputs": [],
    "name": "config",
    "outputs": [
      {
        "internalType": "contract IConfig",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "_savva_amount",
        "type": "uint256"
      },
      {
        "internalType": "bytes32",
        "name": "_hash",
        "type": "bytes32"
      },
      {
        "internalType": "uint256",
        "name": "_valid_till",
        "type": "uint256"
      }
    ],
    "name": "createPromoCode",
    "outputs": [],
    "stateMutability": "payable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "_savva_amount",
        "type": "uint256"
      },
      {
        "internalType": "bytes32",
        "name": "_hash",
        "type": "bytes32"
      },
      {
        "internalType": "uint256",
        "name": "_valid_till",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "_deadline",
        "type": "uint256"
      },
      {
        "internalType": "uint8",
        "name": "_v",
        "type": "uint8"
      },
      {
        "internalType": "bytes32",
        "name": "_r",
        "type": "bytes32"
      },
      {
        "internalType": "bytes32",
        "name": "_s",
        "type": "bytes32"
      }
    ],
    "name": "createPromoCodeWithPermit",
    "outputs": [],
    "stateMutability": "payable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "bytes32",
        "name": "_hash",
        "type": "bytes32"
      }
    ],
    "name": "getPromoCode",
    "outputs": [
      {
        "components": [
          {
            "internalType": "address",
            "name": "donator",
            "type": "address"
          },
          {
            "internalType": "uint256",
            "name": "savva_amount",
            "type": "uint256"
          },
          {
            "internalType": "bytes32",
            "name": "hash",
            "type": "bytes32"
          },
          {
            "internalType": "uint256",
            "name": "pls_amount",
            "type": "uint256"
          },
          {
            "internalType": "uint256",
            "name": "valid_till",
            "type": "uint256"
          },
          {
            "internalType": "uint256",
            "name": "index",
            "type": "uint256"
          }
        ],
        "internalType": "struct Promo.PromoCode",
        "name": "",
        "type": "tuple"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "getPromoCodesCount",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "hasExpiredPromoCodes",
    "outputs": [
      {
        "internalType": "bool",
        "name": "",
        "type": "bool"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "bytes32",
        "name": "_hash",
        "type": "bytes32"
      }
    ],
    "name": "isHashValid",
    "outputs": [
      {
        "internalType": "bool",
        "name": "",
        "type": "bool"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "owner",
    "outputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "processor_fee",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "name": "promoCodes",
    "outputs": [
      {
        "internalType": "bytes32",
        "name": "",
        "type": "bytes32"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "bytes32",
        "name": "",
        "type": "bytes32"
      }
    ],
    "name": "promoCodesMap",
    "outputs": [
      {
        "internalType": "address",
        "name": "donator",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "savva_amount",
        "type": "uint256"
      },
      {
        "internalType": "bytes32",
        "name": "hash",
        "type": "bytes32"
      },
      {
        "internalType": "uint256",
        "name": "pls_amount",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "valid_till",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "index",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "bytes32",
        "name": "_hash",
        "type": "bytes32"
      },
      {
        "internalType": "string",
        "name": "_secret",
        "type": "string"
      },
      {
        "internalType": "address payable",
        "name": "_user",
        "type": "address"
      }
    ],
    "name": "redeemPromoCode",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "renounceOwnership",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "maxDeletes",
        "type": "uint256"
      }
    ],
    "name": "returnAllExpired",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "bytes32",
        "name": "_hash",
        "type": "bytes32"
      }
    ],
    "name": "returnExpired",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address payable",
        "name": "_processor",
        "type": "address"
      }
    ],
    "name": "setProcessor",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "_fee",
        "type": "uint256"
      }
    ],
    "name": "setProcessorFee",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "newOwner",
        "type": "address"
      }
    ],
    "name": "transferOwnership",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  }
]
</file>

<file path="src/blockchain/abi/RandomOracle.json">
[
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "_initialOwner",
        "type": "address"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "constructor"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "owner",
        "type": "address"
      }
    ],
    "name": "OwnableInvalidOwner",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "account",
        "type": "address"
      }
    ],
    "name": "OwnableUnauthorizedAccount",
    "type": "error"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "previousOwner",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "newOwner",
        "type": "address"
      }
    ],
    "name": "OwnershipTransferred",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "random",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "db_index",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "timestamp",
        "type": "uint256"
      }
    ],
    "name": "RandomUpdated",
    "type": "event"
  },
  {
    "inputs": [],
    "name": "db_index",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "getLastUpdateTime",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "getRandom",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "lastUpdateTime",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "owner",
    "outputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "random",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "renounceOwnership",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "_updaterAccount",
        "type": "address"
      }
    ],
    "name": "setUpdaterAccount",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "newOwner",
        "type": "address"
      }
    ],
    "name": "transferOwnership",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "_random",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "_db_index",
        "type": "uint256"
      }
    ],
    "name": "update",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "updaterAccount",
    "outputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  }
]
</file>

<file path="src/blockchain/abi/SafeERC20.json">
[]
</file>

<file path="src/blockchain/abi/SavvaFaucet.json">
[
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "_config",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "_round_seconds",
        "type": "uint256"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "constructor"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "address",
        "name": "user",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "amount",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "timestamp",
        "type": "uint256"
      }
    ],
    "name": "Deposit",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "round",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "tokensToShare",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "timestamp",
        "type": "uint256"
      }
    ],
    "name": "RoundFinished",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "address",
        "name": "user",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "amount",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "timestamp",
        "type": "uint256"
      }
    ],
    "name": "TokensSent",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "address",
        "name": "user",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "amount",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "timestamp",
        "type": "uint256"
      }
    ],
    "name": "claimed",
    "type": "event"
  },
  {
    "inputs": [
      {
        "internalType": "address payable",
        "name": "newOrigin",
        "type": "address"
      }
    ],
    "name": "ChangeOrigin",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "IsRoundFinished",
    "outputs": [
      {
        "internalType": "bool",
        "name": "",
        "type": "bool"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "NumberOfDepositors",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "ORIGIN_ADDRESS",
    "outputs": [
      {
        "internalType": "address payable",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "TokensToShare",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "claim",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "user",
        "type": "address"
      }
    ],
    "name": "claimable",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "config",
    "outputs": [
      {
        "internalType": "contract IConfig",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "deposit",
    "outputs": [],
    "stateMutability": "payable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      }
    ],
    "name": "deposited",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "finishRound",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "name": "finishedRounds",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "total",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "perShare",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "getRoundLength",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "user",
        "type": "address"
      }
    ],
    "name": "get_deposited",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "lastRoundPayWeek",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      }
    ],
    "name": "pay_week",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "roundPayWeek",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "roundTokensToShare",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "roundTotalDepositors",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "roundTotalDeposits",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "stateMutability": "payable",
    "type": "receive"
  }
]
</file>

<file path="src/blockchain/abi/SavvaNPO.json">
[
  {
    "inputs": [],
    "stateMutability": "nonpayable",
    "type": "constructor"
  },
  {
    "inputs": [],
    "name": "ReentrancyGuardReentrantCall",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "user",
        "type": "address"
      }
    ],
    "name": "addAdmin",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "member",
        "type": "address"
      },
      {
        "internalType": "bytes32[]",
        "name": "roleNames_",
        "type": "bytes32[]"
      }
    ],
    "name": "addMember",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "token",
        "type": "address"
      }
    ],
    "name": "addSupportedToken",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "member",
        "type": "address"
      },
      {
        "internalType": "bytes32[]",
        "name": "newRoles",
        "type": "bytes32[]"
      }
    ],
    "name": "changeMemberRoles",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "config",
    "outputs": [
      {
        "internalType": "contract IConfig",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "confirmMembership",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "getAdmins",
    "outputs": [
      {
        "internalType": "address[]",
        "name": "",
        "type": "address[]"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "getMemberList",
    "outputs": [
      {
        "internalType": "address[]",
        "name": "",
        "type": "address[]"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "member",
        "type": "address"
      }
    ],
    "name": "getMemberRoles",
    "outputs": [
      {
        "internalType": "bytes32[]",
        "name": "",
        "type": "bytes32[]"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "member",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "token",
        "type": "address"
      }
    ],
    "name": "getMemberWeeklyLimit",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "getRoleList",
    "outputs": [
      {
        "internalType": "bytes32[]",
        "name": "",
        "type": "bytes32[]"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "bytes32",
        "name": "roleName",
        "type": "bytes32"
      }
    ],
    "name": "getRolePermissions",
    "outputs": [
      {
        "components": [
          {
            "internalType": "address",
            "name": "targetContract",
            "type": "address"
          },
          {
            "internalType": "bytes4[]",
            "name": "allowedFunctions",
            "type": "bytes4[]"
          }
        ],
        "internalType": "struct SavvaNPO.Permission[]",
        "name": "",
        "type": "tuple[]"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "member",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "token",
        "type": "address"
      }
    ],
    "name": "getSpentByTokenAndWeek",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "getSupportedTokens",
    "outputs": [
      {
        "internalType": "address[]",
        "name": "",
        "type": "address[]"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "addr",
        "type": "address"
      },
      {
        "internalType": "bytes32",
        "name": "roleName",
        "type": "bytes32"
      }
    ],
    "name": "hasRole",
    "outputs": [
      {
        "internalType": "bool",
        "name": "",
        "type": "bool"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "_conf",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "first_admin",
        "type": "address"
      }
    ],
    "name": "initialize",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "user",
        "type": "address"
      }
    ],
    "name": "isAdmin",
    "outputs": [
      {
        "internalType": "bool",
        "name": "",
        "type": "bool"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "isConfirmed",
    "outputs": [
      {
        "internalType": "bool",
        "name": "",
        "type": "bool"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "addr",
        "type": "address"
      }
    ],
    "name": "isMember",
    "outputs": [
      {
        "internalType": "bool",
        "name": "",
        "type": "bool"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "member",
        "type": "address"
      }
    ],
    "name": "isMemberConfirmed",
    "outputs": [
      {
        "internalType": "bool",
        "name": "",
        "type": "bool"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      }
    ],
    "name": "members",
    "outputs": [
      {
        "internalType": "address",
        "name": "account",
        "type": "address"
      },
      {
        "internalType": "bool",
        "name": "confirmed",
        "type": "bool"
      },
      {
        "internalType": "uint256",
        "name": "lastWeekChecked",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "components": [
          {
            "internalType": "address",
            "name": "target",
            "type": "address"
          },
          {
            "internalType": "bytes",
            "name": "data",
            "type": "bytes"
          },
          {
            "internalType": "uint256",
            "name": "value",
            "type": "uint256"
          }
        ],
        "internalType": "struct SavvaNPO.Call[]",
        "name": "calls",
        "type": "tuple[]"
      }
    ],
    "name": "multicall",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      },
      {
        "internalType": "bytes",
        "name": "",
        "type": "bytes"
      }
    ],
    "name": "onERC721Received",
    "outputs": [
      {
        "internalType": "bytes4",
        "name": "",
        "type": "bytes4"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "user",
        "type": "address"
      }
    ],
    "name": "removeAdmin",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "member",
        "type": "address"
      }
    ],
    "name": "removeMember",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "bytes32",
        "name": "roleName",
        "type": "bytes32"
      }
    ],
    "name": "removeRole",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "token",
        "type": "address"
      }
    ],
    "name": "removeSupportedToken",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "bytes32",
        "name": "roleName",
        "type": "bytes32"
      },
      {
        "components": [
          {
            "internalType": "address",
            "name": "targetContract",
            "type": "address"
          },
          {
            "internalType": "bytes4[]",
            "name": "allowedFunctions",
            "type": "bytes4[]"
          }
        ],
        "internalType": "struct SavvaNPO.Permission[]",
        "name": "perms",
        "type": "tuple[]"
      }
    ],
    "name": "setRole",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "unconfirmMembership",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "member",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "token",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "newLimit",
        "type": "uint256"
      }
    ],
    "name": "updateWeeklyLimit",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "token",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "to",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "amount",
        "type": "uint256"
      }
    ],
    "name": "withdrawERC20",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "to",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "amount",
        "type": "uint256"
      }
    ],
    "name": "withdrawNative",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "stateMutability": "payable",
    "type": "receive"
  }
]
</file>

<file path="src/blockchain/abi/SavvaNPOEvents.json">
[
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "npo",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "member",
        "type": "address"
      }
    ],
    "name": "AdminAdded",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "npo",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "member",
        "type": "address"
      }
    ],
    "name": "AdminRemoved",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "npo",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "member",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "target",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "bytes4",
        "name": "selector",
        "type": "bytes4"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "value",
        "type": "uint256"
      }
    ],
    "name": "FunctionCalled",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "npo",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "member",
        "type": "address"
      }
    ],
    "name": "MemberAdded",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "npo",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "member",
        "type": "address"
      }
    ],
    "name": "MemberConfirmed",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "npo",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "member",
        "type": "address"
      }
    ],
    "name": "MemberRemoved",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "npo",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "member",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "bytes32[]",
        "name": "newRoles",
        "type": "bytes32[]"
      }
    ],
    "name": "MemberRolesChanged",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "npo",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "member",
        "type": "address"
      }
    ],
    "name": "MemberUnconfirmed",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "npo",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "firstAdmin",
        "type": "address"
      }
    ],
    "name": "NPOCreated",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "npo",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "member",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "bytes32",
        "name": "roleName",
        "type": "bytes32"
      }
    ],
    "name": "RoleCreated",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "npo",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "member",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "bytes32",
        "name": "roleName",
        "type": "bytes32"
      }
    ],
    "name": "RoleModified",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "npo",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "bytes32",
        "name": "roleName",
        "type": "bytes32"
      }
    ],
    "name": "RoleRemoved",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "npo",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "address",
        "name": "token",
        "type": "address"
      }
    ],
    "name": "SupportedTokenAdded",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "npo",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "address",
        "name": "token",
        "type": "address"
      }
    ],
    "name": "SupportedTokenRemoved",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "npo",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "member",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "address",
        "name": "token",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "amount",
        "type": "uint256"
      }
    ],
    "name": "TokenSpent",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "npo",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "address",
        "name": "token",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "to",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "amount",
        "type": "uint256"
      }
    ],
    "name": "TokenWithdrawn",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "npo",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "member",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "address",
        "name": "token",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "newLimit",
        "type": "uint256"
      }
    ],
    "name": "WeeklyLimitUpdated",
    "type": "event"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "npo",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "member",
        "type": "address"
      }
    ],
    "name": "emitAdminAdded",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "npo",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "member",
        "type": "address"
      }
    ],
    "name": "emitAdminRemoved",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "npo",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "member",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "target",
        "type": "address"
      },
      {
        "internalType": "bytes4",
        "name": "selector",
        "type": "bytes4"
      },
      {
        "internalType": "uint256",
        "name": "value",
        "type": "uint256"
      }
    ],
    "name": "emitFunctionCalled",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "npo",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "member",
        "type": "address"
      }
    ],
    "name": "emitMemberAdded",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "npo",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "member",
        "type": "address"
      }
    ],
    "name": "emitMemberConfirmed",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "npo",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "member",
        "type": "address"
      }
    ],
    "name": "emitMemberRemoved",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "npo",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "member",
        "type": "address"
      },
      {
        "internalType": "bytes32[]",
        "name": "newRoles",
        "type": "bytes32[]"
      }
    ],
    "name": "emitMemberRolesChanged",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "npo",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "member",
        "type": "address"
      }
    ],
    "name": "emitMemberUnconfirmed",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "npo",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "firstAdmin",
        "type": "address"
      }
    ],
    "name": "emitNPOCreated",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "npo",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "member",
        "type": "address"
      },
      {
        "internalType": "bytes32",
        "name": "roleName",
        "type": "bytes32"
      }
    ],
    "name": "emitRoleCreated",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "npo",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "member",
        "type": "address"
      },
      {
        "internalType": "bytes32",
        "name": "roleName",
        "type": "bytes32"
      }
    ],
    "name": "emitRoleModified",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "npo",
        "type": "address"
      },
      {
        "internalType": "bytes32",
        "name": "roleName",
        "type": "bytes32"
      }
    ],
    "name": "emitRoleRemoved",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "npo",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "token",
        "type": "address"
      }
    ],
    "name": "emitSupportedTokenAdded",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "npo",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "token",
        "type": "address"
      }
    ],
    "name": "emitSupportedTokenRemoved",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "npo",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "member",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "token",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "amount",
        "type": "uint256"
      }
    ],
    "name": "emitTokenSpent",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "npo",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "token",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "to",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "amount",
        "type": "uint256"
      }
    ],
    "name": "emitTokenWithdrawn",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "npo",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "member",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "token",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "newLimit",
        "type": "uint256"
      }
    ],
    "name": "emitWeeklyLimitUpdated",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  }
]
</file>

<file path="src/blockchain/abi/SavvaNPOFactory.json">
[
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "_conf",
        "type": "address"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "constructor"
  },
  {
    "inputs": [],
    "name": "FailedDeployment",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "balance",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "needed",
        "type": "uint256"
      }
    ],
    "name": "InsufficientBalance",
    "type": "error"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "clone",
        "type": "address"
      }
    ],
    "name": "SavvaNPOCloned",
    "type": "event"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "first_admin",
        "type": "address"
      }
    ],
    "name": "cloneSavvaNPO",
    "outputs": [
      {
        "internalType": "address",
        "name": "clone",
        "type": "address"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "bytes32",
        "name": "salt",
        "type": "bytes32"
      },
      {
        "internalType": "address",
        "name": "first_admin",
        "type": "address"
      }
    ],
    "name": "cloneSavvaNPODeterministic",
    "outputs": [
      {
        "internalType": "address",
        "name": "clone",
        "type": "address"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "conf",
    "outputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "savvaNPOImplementation",
    "outputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  }
]
</file>

<file path="src/blockchain/abi/SavvaSwap.json">
[
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "_config",
        "type": "address"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "constructor"
  },
  {
    "inputs": [],
    "name": "ReentrancyGuardReentrantCall",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "token",
        "type": "address"
      }
    ],
    "name": "SafeERC20FailedOperation",
    "type": "error"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "caller",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "fromToken",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "toToken",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "amountIn",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "amountOut",
        "type": "uint256"
      }
    ],
    "name": "Swapped",
    "type": "event"
  },
  {
    "inputs": [],
    "name": "config",
    "outputs": [
      {
        "internalType": "contract IConfig",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "last_amount_out",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "last_error",
    "outputs": [
      {
        "internalType": "string",
        "name": "",
        "type": "string"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "last_error_reason",
    "outputs": [
      {
        "internalType": "bytes",
        "name": "",
        "type": "bytes"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "fromToken",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "amountIn",
        "type": "uint256"
      },
      {
        "internalType": "address",
        "name": "toToken",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "to",
        "type": "address"
      }
    ],
    "name": "swapExact",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "amountOut",
        "type": "uint256"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "toToken",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "to",
        "type": "address"
      }
    ],
    "name": "swapExactNative",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "amountOut",
        "type": "uint256"
      }
    ],
    "stateMutability": "payable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "fromToken",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "amountIn",
        "type": "uint256"
      },
      {
        "internalType": "address",
        "name": "toToken",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "to",
        "type": "address"
      }
    ],
    "name": "swapExactTest",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "stateMutability": "payable",
    "type": "receive"
  }
]
</file>

<file path="src/blockchain/abi/SavvaToken.json">
[
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "_config",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "_initialOwner",
        "type": "address"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "constructor"
  },
  {
    "inputs": [],
    "name": "ECDSAInvalidSignature",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "length",
        "type": "uint256"
      }
    ],
    "name": "ECDSAInvalidSignatureLength",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "bytes32",
        "name": "s",
        "type": "bytes32"
      }
    ],
    "name": "ECDSAInvalidSignatureS",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "spender",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "allowance",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "needed",
        "type": "uint256"
      }
    ],
    "name": "ERC20InsufficientAllowance",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "sender",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "balance",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "needed",
        "type": "uint256"
      }
    ],
    "name": "ERC20InsufficientBalance",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "approver",
        "type": "address"
      }
    ],
    "name": "ERC20InvalidApprover",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "receiver",
        "type": "address"
      }
    ],
    "name": "ERC20InvalidReceiver",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "sender",
        "type": "address"
      }
    ],
    "name": "ERC20InvalidSender",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "spender",
        "type": "address"
      }
    ],
    "name": "ERC20InvalidSpender",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "deadline",
        "type": "uint256"
      }
    ],
    "name": "ERC2612ExpiredSignature",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "signer",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "owner",
        "type": "address"
      }
    ],
    "name": "ERC2612InvalidSigner",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "account",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "currentNonce",
        "type": "uint256"
      }
    ],
    "name": "InvalidAccountNonce",
    "type": "error"
  },
  {
    "inputs": [],
    "name": "InvalidShortString",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "owner",
        "type": "address"
      }
    ],
    "name": "OwnableInvalidOwner",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "account",
        "type": "address"
      }
    ],
    "name": "OwnableUnauthorizedAccount",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "string",
        "name": "str",
        "type": "string"
      }
    ],
    "name": "StringTooLong",
    "type": "error"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "owner",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "spender",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "value",
        "type": "uint256"
      }
    ],
    "name": "Approval",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [],
    "name": "EIP712DomainChanged",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "previousOwner",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "newOwner",
        "type": "address"
      }
    ],
    "name": "OwnershipTransferred",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "from",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "to",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "value",
        "type": "uint256"
      }
    ],
    "name": "Transfer",
    "type": "event"
  },
  {
    "inputs": [],
    "name": "DOMAIN_SEPARATOR",
    "outputs": [
      {
        "internalType": "bytes32",
        "name": "",
        "type": "bytes32"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "owner",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "spender",
        "type": "address"
      }
    ],
    "name": "allowance",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "spender",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "value",
        "type": "uint256"
      }
    ],
    "name": "approve",
    "outputs": [
      {
        "internalType": "bool",
        "name": "",
        "type": "bool"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "account",
        "type": "address"
      }
    ],
    "name": "balanceOf",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "value",
        "type": "uint256"
      }
    ],
    "name": "burn",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "account",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "value",
        "type": "uint256"
      }
    ],
    "name": "burnFrom",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "config",
    "outputs": [
      {
        "internalType": "contract IConfig",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "decimals",
    "outputs": [
      {
        "internalType": "uint8",
        "name": "",
        "type": "uint8"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "eip712Domain",
    "outputs": [
      {
        "internalType": "bytes1",
        "name": "fields",
        "type": "bytes1"
      },
      {
        "internalType": "string",
        "name": "name",
        "type": "string"
      },
      {
        "internalType": "string",
        "name": "version",
        "type": "string"
      },
      {
        "internalType": "uint256",
        "name": "chainId",
        "type": "uint256"
      },
      {
        "internalType": "address",
        "name": "verifyingContract",
        "type": "address"
      },
      {
        "internalType": "bytes32",
        "name": "salt",
        "type": "bytes32"
      },
      {
        "internalType": "uint256[]",
        "name": "extensions",
        "type": "uint256[]"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "amount",
        "type": "uint256"
      }
    ],
    "name": "mint",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "name",
    "outputs": [
      {
        "internalType": "string",
        "name": "",
        "type": "string"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "owner",
        "type": "address"
      }
    ],
    "name": "nonces",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "owner",
    "outputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "owner",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "spender",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "value",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "deadline",
        "type": "uint256"
      },
      {
        "internalType": "uint8",
        "name": "v",
        "type": "uint8"
      },
      {
        "internalType": "bytes32",
        "name": "r",
        "type": "bytes32"
      },
      {
        "internalType": "bytes32",
        "name": "s",
        "type": "bytes32"
      }
    ],
    "name": "permit",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "renounceOwnership",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "symbol",
    "outputs": [
      {
        "internalType": "string",
        "name": "",
        "type": "string"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "totalSupply",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "to",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "value",
        "type": "uint256"
      }
    ],
    "name": "transfer",
    "outputs": [
      {
        "internalType": "bool",
        "name": "",
        "type": "bool"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "from",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "to",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "value",
        "type": "uint256"
      }
    ],
    "name": "transferFrom",
    "outputs": [
      {
        "internalType": "bool",
        "name": "",
        "type": "bool"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "newOwner",
        "type": "address"
      }
    ],
    "name": "transferOwnership",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  }
]
</file>

<file path="src/blockchain/abi/Staking.json">
[
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "_conf",
        "type": "address"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "constructor"
  },
  {
    "inputs": [],
    "name": "CheckpointUnorderedInsertion",
    "type": "error"
  },
  {
    "inputs": [],
    "name": "ECDSAInvalidSignature",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "length",
        "type": "uint256"
      }
    ],
    "name": "ECDSAInvalidSignatureLength",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "bytes32",
        "name": "s",
        "type": "bytes32"
      }
    ],
    "name": "ECDSAInvalidSignatureS",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "increasedSupply",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "cap",
        "type": "uint256"
      }
    ],
    "name": "ERC20ExceededSafeSupply",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "spender",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "allowance",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "needed",
        "type": "uint256"
      }
    ],
    "name": "ERC20InsufficientAllowance",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "sender",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "balance",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "needed",
        "type": "uint256"
      }
    ],
    "name": "ERC20InsufficientBalance",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "approver",
        "type": "address"
      }
    ],
    "name": "ERC20InvalidApprover",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "receiver",
        "type": "address"
      }
    ],
    "name": "ERC20InvalidReceiver",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "sender",
        "type": "address"
      }
    ],
    "name": "ERC20InvalidSender",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "spender",
        "type": "address"
      }
    ],
    "name": "ERC20InvalidSpender",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "deadline",
        "type": "uint256"
      }
    ],
    "name": "ERC2612ExpiredSignature",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "signer",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "owner",
        "type": "address"
      }
    ],
    "name": "ERC2612InvalidSigner",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "timepoint",
        "type": "uint256"
      },
      {
        "internalType": "uint48",
        "name": "clock",
        "type": "uint48"
      }
    ],
    "name": "ERC5805FutureLookup",
    "type": "error"
  },
  {
    "inputs": [],
    "name": "ERC6372InconsistentClock",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "account",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "currentNonce",
        "type": "uint256"
      }
    ],
    "name": "InvalidAccountNonce",
    "type": "error"
  },
  {
    "inputs": [],
    "name": "InvalidShortString",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "uint8",
        "name": "bits",
        "type": "uint8"
      },
      {
        "internalType": "uint256",
        "name": "value",
        "type": "uint256"
      }
    ],
    "name": "SafeCastOverflowedUintDowncast",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "string",
        "name": "str",
        "type": "string"
      }
    ],
    "name": "StringTooLong",
    "type": "error"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "expiry",
        "type": "uint256"
      }
    ],
    "name": "VotesExpiredSignature",
    "type": "error"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "owner",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "spender",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "value",
        "type": "uint256"
      }
    ],
    "name": "Approval",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "user",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "amount",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "staked",
        "type": "uint256"
      }
    ],
    "name": "ClaimUnstaked",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "user",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "amount",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "staked",
        "type": "uint256"
      }
    ],
    "name": "Compounded",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "delegator",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "fromDelegate",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "toDelegate",
        "type": "address"
      }
    ],
    "name": "DelegateChanged",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "delegate",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "previousVotes",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "newVotes",
        "type": "uint256"
      }
    ],
    "name": "DelegateVotesChanged",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [],
    "name": "EIP712DomainChanged",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "user",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "amount",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "staked",
        "type": "uint256"
      }
    ],
    "name": "GainClaimed",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "user",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "address",
        "name": "event_contract",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "bytes32",
        "name": "event_id",
        "type": "bytes32"
      },
      {
        "indexed": false,
        "internalType": "address",
        "name": "author",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "amount",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "staked",
        "type": "uint256"
      }
    ],
    "name": "PatronPaid",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "author",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "address",
        "name": "event_contract",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "bytes32",
        "name": "event_id",
        "type": "bytes32"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "amount",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "staked",
        "type": "uint256"
      }
    ],
    "name": "PatronPaymentClaimed",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "user",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "address",
        "name": "event_contract",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "bytes32",
        "name": "event_id",
        "type": "bytes32"
      },
      {
        "indexed": false,
        "internalType": "address",
        "name": "author",
        "type": "address"
      }
    ],
    "name": "PayRecordDeleted",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "user",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "address",
        "name": "event_contract",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "bytes32",
        "name": "event_id",
        "type": "bytes32"
      },
      {
        "indexed": false,
        "internalType": "address",
        "name": "author",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "amount",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "user_staked",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "author_staked",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "paid",
        "type": "uint256"
      }
    ],
    "name": "PayRecordSet",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "amount",
        "type": "uint256"
      }
    ],
    "name": "RewardDistribution",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "user",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "amount",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "staked",
        "type": "uint256"
      }
    ],
    "name": "Staked",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "from",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "to",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "value",
        "type": "uint256"
      }
    ],
    "name": "Transfer",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "from",
        "type": "address"
      },
      {
        "indexed": true,
        "internalType": "address",
        "name": "to",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "amount",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "staked_from",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "staked_to",
        "type": "uint256"
      }
    ],
    "name": "Transferred",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "user",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "amount",
        "type": "uint256"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "staked",
        "type": "uint256"
      }
    ],
    "name": "Unstaked",
    "type": "event"
  },
  {
    "inputs": [],
    "name": "CLOCK_MODE",
    "outputs": [
      {
        "internalType": "string",
        "name": "",
        "type": "string"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "DOMAIN_SEPARATOR",
    "outputs": [
      {
        "internalType": "bytes32",
        "name": "",
        "type": "bytes32"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "owner",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "spender",
        "type": "address"
      }
    ],
    "name": "allowance",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "spender",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "value",
        "type": "uint256"
      }
    ],
    "name": "approve",
    "outputs": [
      {
        "internalType": "bool",
        "name": "",
        "type": "bool"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "account",
        "type": "address"
      }
    ],
    "name": "balanceOf",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "account",
        "type": "address"
      },
      {
        "internalType": "uint32",
        "name": "pos",
        "type": "uint32"
      }
    ],
    "name": "checkpoints",
    "outputs": [
      {
        "components": [
          {
            "internalType": "uint48",
            "name": "_key",
            "type": "uint48"
          },
          {
            "internalType": "uint208",
            "name": "_value",
            "type": "uint208"
          }
        ],
        "internalType": "struct Checkpoints.Checkpoint208",
        "name": "",
        "type": "tuple"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "claimGain",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "author",
        "type": "address"
      },
      {
        "internalType": "bytes32",
        "name": "event_id",
        "type": "bytes32"
      }
    ],
    "name": "claimPayment",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "claimUnstaked",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "user",
        "type": "address"
      }
    ],
    "name": "claimable",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "clock",
    "outputs": [
      {
        "internalType": "uint48",
        "name": "",
        "type": "uint48"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "compoundGain",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "config",
    "outputs": [
      {
        "internalType": "contract IConfig",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "decimals",
    "outputs": [
      {
        "internalType": "uint8",
        "name": "",
        "type": "uint8"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "delegatee",
        "type": "address"
      }
    ],
    "name": "delegate",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "delegatee",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "nonce",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "expiry",
        "type": "uint256"
      },
      {
        "internalType": "uint8",
        "name": "v",
        "type": "uint8"
      },
      {
        "internalType": "bytes32",
        "name": "r",
        "type": "bytes32"
      },
      {
        "internalType": "bytes32",
        "name": "s",
        "type": "bytes32"
      }
    ],
    "name": "delegateBySig",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "account",
        "type": "address"
      }
    ],
    "name": "delegates",
    "outputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "event_contract",
        "type": "address"
      },
      {
        "internalType": "bytes32",
        "name": "event_id",
        "type": "bytes32"
      },
      {
        "internalType": "address",
        "name": "author",
        "type": "address"
      }
    ],
    "name": "deletePayRecord",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "amount",
        "type": "uint256"
      }
    ],
    "name": "distribute",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "eip712Domain",
    "outputs": [
      {
        "internalType": "bytes1",
        "name": "fields",
        "type": "bytes1"
      },
      {
        "internalType": "string",
        "name": "name",
        "type": "string"
      },
      {
        "internalType": "string",
        "name": "version",
        "type": "string"
      },
      {
        "internalType": "uint256",
        "name": "chainId",
        "type": "uint256"
      },
      {
        "internalType": "address",
        "name": "verifyingContract",
        "type": "address"
      },
      {
        "internalType": "bytes32",
        "name": "salt",
        "type": "bytes32"
      },
      {
        "internalType": "uint256[]",
        "name": "extensions",
        "type": "uint256[]"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "_user",
        "type": "address"
      }
    ],
    "name": "getAvailableUnstaked",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "author",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "contract_address",
        "type": "address"
      },
      {
        "internalType": "bytes32",
        "name": "event_id",
        "type": "bytes32"
      }
    ],
    "name": "getExpectedPatronPayment",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "timepoint",
        "type": "uint256"
      }
    ],
    "name": "getPastTotalSupply",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "account",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "timepoint",
        "type": "uint256"
      }
    ],
    "name": "getPastVotes",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "_user",
        "type": "address"
      },
      {
        "internalType": "bytes32",
        "name": "key",
        "type": "bytes32"
      }
    ],
    "name": "getPayRecord",
    "outputs": [
      {
        "components": [
          {
            "internalType": "address",
            "name": "author",
            "type": "address"
          },
          {
            "internalType": "address",
            "name": "event_contract",
            "type": "address"
          },
          {
            "internalType": "bytes32",
            "name": "event_id",
            "type": "bytes32"
          },
          {
            "internalType": "uint256",
            "name": "amount",
            "type": "uint256"
          },
          {
            "internalType": "uint256",
            "name": "index",
            "type": "uint256"
          }
        ],
        "internalType": "struct Staking.PayRecord",
        "name": "",
        "type": "tuple"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "_user",
        "type": "address"
      }
    ],
    "name": "getPayRecordsKeys",
    "outputs": [
      {
        "internalType": "bytes32[]",
        "name": "",
        "type": "bytes32[]"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "_user",
        "type": "address"
      }
    ],
    "name": "getUnstakeRequests",
    "outputs": [
      {
        "components": [
          {
            "internalType": "uint256",
            "name": "amount",
            "type": "uint256"
          },
          {
            "internalType": "uint256",
            "name": "timestamp",
            "type": "uint256"
          }
        ],
        "internalType": "struct Staking.UnstakeRequest[]",
        "name": "",
        "type": "tuple[]"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "account",
        "type": "address"
      }
    ],
    "name": "getVotes",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "name",
    "outputs": [
      {
        "internalType": "string",
        "name": "",
        "type": "string"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "owner",
        "type": "address"
      }
    ],
    "name": "nonces",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "account",
        "type": "address"
      }
    ],
    "name": "numCheckpoints",
    "outputs": [
      {
        "internalType": "uint32",
        "name": "",
        "type": "uint32"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "owner",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "spender",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "value",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "deadline",
        "type": "uint256"
      },
      {
        "internalType": "uint8",
        "name": "v",
        "type": "uint8"
      },
      {
        "internalType": "bytes32",
        "name": "r",
        "type": "bytes32"
      },
      {
        "internalType": "bytes32",
        "name": "s",
        "type": "bytes32"
      }
    ],
    "name": "permit",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "event_contract",
        "type": "address"
      },
      {
        "internalType": "bytes32",
        "name": "event_id",
        "type": "bytes32"
      },
      {
        "internalType": "address",
        "name": "author",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "amount",
        "type": "uint256"
      }
    ],
    "name": "setPayRecord",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "amount",
        "type": "uint256"
      }
    ],
    "name": "stake",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "_amount",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "_deadline",
        "type": "uint256"
      },
      {
        "internalType": "uint8",
        "name": "_v",
        "type": "uint8"
      },
      {
        "internalType": "bytes32",
        "name": "_r",
        "type": "bytes32"
      },
      {
        "internalType": "bytes32",
        "name": "_s",
        "type": "bytes32"
      }
    ],
    "name": "stakeWithPermit",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      }
    ],
    "name": "stakers",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "accruedGain",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "tokensPerShareFrom",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "nextUnstakeRequestId",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "stake_frame",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "event_contract",
        "type": "uint256"
      },
      {
        "internalType": "uint256",
        "name": "last_paid_by_patrons",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "symbol",
    "outputs": [
      {
        "internalType": "string",
        "name": "",
        "type": "string"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "tokensPerShare",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "totalAccruedGain",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "totalDistributed",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "totalSupply",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "totalUnstaking",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "to",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "value",
        "type": "uint256"
      }
    ],
    "name": "transfer",
    "outputs": [
      {
        "internalType": "bool",
        "name": "",
        "type": "bool"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "from",
        "type": "address"
      },
      {
        "internalType": "address",
        "name": "to",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "value",
        "type": "uint256"
      }
    ],
    "name": "transferFrom",
    "outputs": [
      {
        "internalType": "bool",
        "name": "",
        "type": "bool"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "to",
        "type": "address"
      },
      {
        "internalType": "uint256",
        "name": "amount",
        "type": "uint256"
      }
    ],
    "name": "transferStake",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "amount",
        "type": "uint256"
      }
    ],
    "name": "unstake",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  }
]
</file>

<file path="src/blockchain/abi/UserProfile.json">
[
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "address",
        "name": "user",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "string",
        "name": "avatar",
        "type": "string"
      }
    ],
    "name": "AvatarSet",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "address",
        "name": "user",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "string",
        "name": "name",
        "type": "string"
      }
    ],
    "name": "NameSet",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "address",
        "name": "user",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "bytes32",
        "name": "domain",
        "type": "bytes32"
      },
      {
        "indexed": false,
        "internalType": "bytes32",
        "name": "key",
        "type": "bytes32"
      },
      {
        "indexed": false,
        "internalType": "string",
        "name": "value",
        "type": "string"
      }
    ],
    "name": "StringSet",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": false,
        "internalType": "address",
        "name": "user",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "bytes32",
        "name": "domain",
        "type": "bytes32"
      },
      {
        "indexed": false,
        "internalType": "bytes32",
        "name": "key",
        "type": "bytes32"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "value",
        "type": "uint256"
      }
    ],
    "name": "UIntSet",
    "type": "event"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      }
    ],
    "name": "avatars",
    "outputs": [
      {
        "internalType": "string",
        "name": "",
        "type": "string"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "user",
        "type": "address"
      },
      {
        "internalType": "bytes32",
        "name": "domain",
        "type": "bytes32"
      },
      {
        "internalType": "bytes32",
        "name": "key",
        "type": "bytes32"
      }
    ],
    "name": "getString",
    "outputs": [
      {
        "internalType": "string",
        "name": "",
        "type": "string"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "user",
        "type": "address"
      },
      {
        "internalType": "bytes32",
        "name": "domain",
        "type": "bytes32"
      },
      {
        "internalType": "bytes32",
        "name": "key",
        "type": "bytes32"
      }
    ],
    "name": "getUInt",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      }
    ],
    "name": "names",
    "outputs": [
      {
        "internalType": "string",
        "name": "",
        "type": "string"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "string",
        "name": "",
        "type": "string"
      }
    ],
    "name": "owners",
    "outputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      },
      {
        "internalType": "bytes32",
        "name": "",
        "type": "bytes32"
      },
      {
        "internalType": "bytes32",
        "name": "",
        "type": "bytes32"
      }
    ],
    "name": "profileString",
    "outputs": [
      {
        "internalType": "string",
        "name": "",
        "type": "string"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      },
      {
        "internalType": "bytes32",
        "name": "",
        "type": "bytes32"
      },
      {
        "internalType": "bytes32",
        "name": "",
        "type": "bytes32"
      }
    ],
    "name": "profileUInt",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "removeName",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "string",
        "name": "name",
        "type": "string"
      },
      {
        "internalType": "string",
        "name": "avatar",
        "type": "string"
      },
      {
        "internalType": "bytes32",
        "name": "domain",
        "type": "bytes32"
      },
      {
        "internalType": "string",
        "name": "profile",
        "type": "string"
      }
    ],
    "name": "setAll",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "string",
        "name": "avatar",
        "type": "string"
      }
    ],
    "name": "setAvatar",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "string",
        "name": "name",
        "type": "string"
      }
    ],
    "name": "setName",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "string",
        "name": "_modifier",
        "type": "string"
      },
      {
        "internalType": "string",
        "name": "_pub_key",
        "type": "string"
      }
    ],
    "name": "setPubKey",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "bytes32",
        "name": "domain",
        "type": "bytes32"
      },
      {
        "internalType": "bytes32",
        "name": "key",
        "type": "bytes32"
      },
      {
        "internalType": "string",
        "name": "value",
        "type": "string"
      }
    ],
    "name": "setString",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "bytes32",
        "name": "domain",
        "type": "bytes32"
      },
      {
        "internalType": "bytes32",
        "name": "key",
        "type": "bytes32"
      },
      {
        "internalType": "uint256",
        "name": "value",
        "type": "uint256"
      }
    ],
    "name": "setUInt",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "to",
        "type": "address"
      }
    ],
    "name": "transferName",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  }
]
</file>

<file path="src/blockchain/abi/utils.json">
[
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "author",
        "type": "address"
      },
      {
        "internalType": "string",
        "name": "domain",
        "type": "string"
      },
      {
        "internalType": "string",
        "name": "guid",
        "type": "string"
      }
    ],
    "name": "SavvaID",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "pure",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "bytes32",
        "name": "a",
        "type": "bytes32"
      },
      {
        "internalType": "bytes32",
        "name": "b",
        "type": "bytes32"
      }
    ],
    "name": "concat",
    "outputs": [
      {
        "internalType": "bytes32",
        "name": "",
        "type": "bytes32"
      }
    ],
    "stateMutability": "pure",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "string",
        "name": "source",
        "type": "string"
      }
    ],
    "name": "str2bytes32",
    "outputs": [
      {
        "internalType": "bytes32",
        "name": "result",
        "type": "bytes32"
      }
    ],
    "stateMutability": "pure",
    "type": "function"
  }
]
</file>

<file path="src/blockchain/auth.js">
// src/blockchain/auth.js
import { createWalletClient, custom, hexToString } from "viem";
import { getSavvaContract } from "./contracts.js";
import { toHexBytes32, toChecksumAddress } from "./utils.js";
import { walletAccount } from "./wallet.js";
import { httpBase } from "../net/endpoints.js";

export async function authorize(app) {
  const account = walletAccount();
  if (!account) throw new Error("Wallet is not connected.");
  const checksummedAccount = toChecksumAddress(account);

  const info = app.info();
  if (!info) throw new Error("Backend /info not loaded yet.");

  const userProfileContract = await getSavvaContract(app, 'UserProfile');
  const domainHex = toHexBytes32("");
  const keyHex = toHexBytes32("auth_modifier");
  const modifierHex = await userProfileContract.read.getString([account, domainHex, keyHex]);
  const modifierString = hexToString(modifierHex, { size: 32 });
  
  const textToSign = info.auth_text_to_sign;
  if (!textToSign) throw new Error("auth_text_to_sign not found in /info response.");

  const messageToSign = textToSign + modifierString;
  
  const walletClient = createWalletClient({
    chain: app.desiredChain(),
    transport: custom(window.ethereum)
  });
  const signature = await walletClient.signMessage({ account, message: messageToSign });
  
  const currentDomain = app.config().domain;
  
  const authUrl = new URL(`${httpBase()}auth`);
  authUrl.searchParams.set('user_addr', checksummedAccount);
  authUrl.searchParams.set('domain', currentDomain);
  authUrl.searchParams.set('signature', signature);
  
  const authRes = await fetch(authUrl.toString(), { credentials: 'include' });
  if (!authRes.ok) throw new Error(`Authorization failed with status: ${authRes.status}`);

  // Reconnect the WebSocket *after* the auth call and *before* the first wsCall.
  app.ws?.reconnect('user-authorized');

  const isAdminUrl = new URL(`${httpBase()}is-admin`);
  isAdminUrl.searchParams.set('address', checksummedAccount);
  isAdminUrl.searchParams.set('domain', currentDomain);
  
  const adminRes = await fetch(isAdminUrl.toString(), { credentials: 'include' });
  if (!adminRes.ok) throw new Error(`/is-admin check failed with status: ${adminRes.status}`);
  const isAdminData = await adminRes.json();
  const isAdmin = !!isAdminData?.is_admin;

  // MODIFICATION: Fetch user profile via WebSocket after successful auth.
  const userProfile = await app.wsCall('get-user', {
    domain: currentDomain,
    user_addr: checksummedAccount,
  });

  const userData = {
    address: account,
    domain: currentDomain,
    isAdmin: isAdmin,
    ...userProfile, // Merge the profile data (avatar, name, etc.)
  };
  
  app.login(userData);
  
  return userData;
}
</file>

<file path="src/blockchain/contracts.js">
// src/blockchain/contracts.js
import { createPublicClient, http, getContract } from "viem";
import { CHAINS } from "./chains.js";

// A cache to hold instantiated viem clients per chainId.
const clientCache = new Map();

/**
 * Gets a memoized viem public client for a given chain ID.
 * @param {number} chainId - The ID of the chain.
 * @returns {import("viem").PublicClient} A viem public client instance.
 */
function getPublicClient(chainId) {
  if (clientCache.has(chainId)) {
    return clientCache.get(chainId);
  }

  const chainInfo = CHAINS[chainId];
  if (!chainInfo || !chainInfo.rpcUrls?.[0]) {
    throw new Error(`Configuration for chainId ${chainId} not found.`);
  }

  const client = createPublicClient({
    chain: chainInfo,
    transport: http(chainInfo.rpcUrls[0]),
  });

  clientCache.set(chainId, client);
  return client;
}

/**
 * Dynamically loads an ABI and creates a viem contract instance.
 * @param {object} app - The application context from useApp().
 * @param {string} contractName - The name of the contract (e.g., "Post", "Config").
 * @returns {Promise<import("viem").Contract>} A promise that resolves to a viem contract instance.
 */
export async function getSavvaContract(app, contractName) {
  const info = app.info();
  if (!info) {
    throw new Error("Backend /info not loaded yet.");
  }
  
  const chainId = info.blockchain_id;
  if (!chainId) {
    throw new Error("blockchain_id not found in /info response.");
  }

  const contractInfo = info.savva_contracts?.[contractName];
  if (!contractInfo?.address) {
    throw new Error(`Address for contract "${contractName}" not found in /info response.`);
  }

  // Dynamically import the ABI JSON file from the new folder.
  const abiModule = await import(`./abi/${contractName}.json`);
  const abi = abiModule.default;

  const publicClient = getPublicClient(chainId);

  return getContract({
    address: contractInfo.address,
    abi,
    client: publicClient,
  });
}
</file>

<file path="src/blockchain/utils.js">
// src/blockchain/utils.js
import { stringToBytes, bytesToHex, getAddress } from "viem";

/**
 * Converts a JavaScript string into a hex-formatted bytes32 string.
 * The string is padded with null characters to 32 bytes.
 * @param {string} str The string to convert.
 * @returns {`0x${string}`} The hex-formatted bytes32 string.
 */
export function toHexBytes32(str) {
  const bytes = stringToBytes(str, { size: 32 });
  return bytesToHex(bytes);
}

/**
 * Converts an Ethereum address to its EIP-55 checksummed format.
 * Throws an error if the address is invalid.
 * @param {string} address The address to convert.
 * @returns {`0x${string}`} The checksummed address.
 */
export function toChecksumAddress(address) {
  if (!address) return address;
  return getAddress(address);
}
</file>

<file path="src/components/auth/AuthorizedUser.jsx">
// src/components/auth/AuthorizedUser.jsx
import { createSignal, Show, onMount, onCleanup } from "solid-js";
import { useApp } from "../../context/AppContext.jsx";
import { walletAccount } from "../../blockchain/wallet.js";
import { authorize } from "../../blockchain/auth.js";
import { pushErrorToast } from "../ui/toast.js";
import IpfsImage from "../ui/IpfsImage.jsx";
import UnknownUserIcon from "../ui/icons/UnknownUserIcon.jsx";

function ChevronDownIcon(props) {
  return (
    <svg viewBox="0 0 16 16" class={props.class || "w-4 h-4"} aria-hidden="true" fill="currentColor">
      <path d="M8 11.25a.75.75 0 01-.53-.22l-4-4a.75.75 0 111.06-1.06L8 9.94l3.47-3.47a.75.75 0 111.06 1.06l-4 4a.75.75 0 01-.53.22z"></path>
    </svg>
  );
}

export default function AuthorizedUser() {
  const app = useApp();
  const { t } = app;
  const [menuOpen, setMenuOpen] = createSignal(false);
  const [isLoggingIn, setIsLoggingIn] = createSignal(false);
  let menuRef;

  const handleLoginClick = async () => {
    setIsLoggingIn(true);
    try {
      await authorize(app);
    } catch (e) {
      console.error("Authorization failed:", e);
      pushErrorToast(e, { context: "Login failed" });
    } finally {
      setIsLoggingIn(false);
    }
  };

  const handleLogoutClick = () => {
    app.logout();
    setMenuOpen(false);
  };
  
  const handleClickOutside = (event) => {
    if (menuRef && !menuRef.contains(event.target)) {
      setMenuOpen(false);
    }
  };

  onMount(() => {
    document.addEventListener("mousedown", handleClickOutside);
  });

  onCleanup(() => {
    document.removeEventListener("mousedown", handleClickOutside);
  });

  return (
    <div class="relative" ref={menuRef}>
      <Show
        when={app.authorizedUser()}
        fallback={
          <Show when={walletAccount()}>
            <button
              class="px-3 py-1.5 text-sm rounded bg-[hsl(var(--primary))] text-[hsl(var(--primary-foreground))] hover:opacity-90 disabled:opacity-70"
              onClick={handleLoginClick}
              disabled={isLoggingIn()}
            >
              {isLoggingIn() ? t("common.checking") : "Login"}
            </button>
          </Show>
        }
      >
        {(user) => (
          <button
            class="flex items-center gap-1 p-0.5 rounded-full border-2 border-transparent hover:border-[hsl(var(--primary))]"
            onClick={() => setMenuOpen(!menuOpen())}
            aria-haspopup="true"
            aria-expanded={menuOpen()}
          >
            <div class="w-7 h-7 rounded-full overflow-hidden shrink-0 bg-[hsl(var(--muted))]">
              <IpfsImage
                src={user().avatar}
                alt="User Avatar"
                class="w-full h-full object-cover"
                fallback={<UnknownUserIcon class="w-full h-full object-cover" />}
              />
            </div>
            <ChevronDownIcon class="w-4 h-4 text-[hsl(var(--muted-foreground))]" />
          </button>
        )}
      </Show>

      <Show when={menuOpen()}>
        <div class="absolute top-full right-0 mt-2 w-48 rounded-md shadow-lg bg-[hsl(var(--popover))] text-[hsl(var(--popover-foreground))] ring-1 ring-black ring-opacity-5 z-50">
          <div class="py-1" role="menu" aria-orientation="vertical">
            <a
              href="#"
              class="block px-4 py-2 text-sm hover:bg-[hsl(var(--accent))]"
              role="menuitem"
              onClick={(e) => { e.preventDefault(); handleLogoutClick(); }}
            >
              Logout
            </a>
          </div>
        </div>
      </Show>
    </div>
  );
}
</file>

<file path="assets/chain_logos/ethereum.svg">
<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 540 879.4">
  <path d="m269.9 325.2-269.9 122.7 269.9 159.6 270-159.6z" opacity=".6"/>
  <path d="m0.1 447.8 269.9 159.6v-607.4z" opacity=".45"/>
  <path d="m270 0v607.4l269.9-159.6z" opacity=".8"/>
  <path d="m0 499 269.9 380.4v-220.9z" opacity=".45"/>
  <path d="m269.9 658.5v220.9l270.1-380.4z" opacity=".8"/>
</svg>
</file>

<file path="assets/chain_logos/puilsechain-test-v4.svg">
<svg width="433" height="402" viewBox="0 0 433 402" xmlns="http://www.w3.org/2000/svg">
  <title>PulseChain Logo  Testnet (monochrome)</title>
  <g fill="#000000" fill-rule="evenodd" transform="translate(-133, -149)">
    <path d="M565.598765,372.951028 C565.598765,375.002407 565.123895,376.952504 564.22332,378.644848 L471.558363,539.145156 C467.628442,545.95198 460.365648,550.145156 452.505805,550.145156 L246.592961,550.145156 C238.733118,550.145156 231.470323,545.95198 227.540402,539.145156 L134.86679,378.629552 C133.968844,376.940022 133.5,374.999302 133.5,372.951028 C133.5,366.307901 138.885318,360.922583 145.528445,360.922583 L247.199342,360.922583 L272.965382,404.687949 L273.123755,404.949452 C276.56213,410.470142 283.796681,412.269462 289.433324,408.951035 L289.725027,408.773687 C292.323961,407.142692 294.205446,404.576775 294.976025,401.597905 L327.807505,274.677705 L355.998349,479.011885 C357.082331,485.72482 363.072426,490.1783 369.557845,489.283548 L369.85245,489.239203 C374.548041,488.473143 378.362876,485.004494 379.559058,480.380352 L419.133013,327.39653 L435.381735,354.996566 C437.735954,358.77701 441.59028,360.922583 445.747249,360.922583 L553.57032,360.922583 C560.213447,360.922583 565.598765,366.307901 565.598765,372.951028 Z M452.505805,149.493649 C460.365648,149.493649 467.628442,153.686825 471.558363,160.493649 L564.229106,321.001259 C565.125282,322.691832 565.598765,324.640838 565.598765,326.687777 C565.598765,333.330904 560.213447,338.716222 553.57032,338.716222 L451.566328,338.716222 L425.800288,294.950856 C423.991945,292.060218 421.426028,290.178734 418.447158,289.408155 L418.167463,289.339295 C411.826545,287.85703 405.429227,291.702682 403.789645,298.040901 L370.95724,424.960175 L342.767321,220.62692 C341.956916,215.636723 338.488267,211.821889 333.864125,210.625707 C327.432698,208.962014 320.870306,212.827026 319.206612,219.258453 L279.631731,372.24135 L263.383935,344.64224 C261.029716,340.861796 257.17539,338.716222 253.018421,338.716222 L145.528445,338.716222 C138.885318,338.716222 133.5,333.330904 133.5,326.687777 C133.5,324.65653 133.956256,322.735416 134.837658,321.056157 L227.540402,160.493649 C231.470323,153.686825 238.733118,149.493649 246.592961,149.493649 L452.505805,149.493649 Z"/>
  </g>
</svg>
</file>

<file path="assets/chain_logos/pulsechain.svg">
<svg width="433px" height="402px" viewBox="0 0 433 402" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <title>PulseChain Logo Shape</title>
    <defs>
        <linearGradient x1="76.2262818%" y1="7.45934826%" x2="23.6511094%" y2="92.5655852%" id="linearGradient-1">
            <stop stop-color="#00EAFF" offset="0%"></stop>
            <stop stop-color="#0080FF" offset="25.2530882%"></stop>
            <stop stop-color="#8000FF" offset="49.7394282%"></stop>
            <stop stop-color="#E619E6" offset="74.9912298%"></stop>
            <stop stop-color="#FF0000" offset="99.9136118%"></stop>
        </linearGradient>
    </defs>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="Logo" transform="translate(-133.000000, -149.000000)" fill="url(#linearGradient-1)">
            <path d="M565.598765,372.951028 C565.598765,375.002407 565.123895,376.952504 564.22332,378.644848 L471.558363,539.145156 C467.628442,545.95198 460.365648,550.145156 452.505805,550.145156 L246.592961,550.145156 C238.733118,550.145156 231.470323,545.95198 227.540402,539.145156 L134.86679,378.629552 C133.968844,376.940022 133.5,374.999302 133.5,372.951028 C133.5,366.307901 138.885318,360.922583 145.528445,360.922583 L247.199342,360.922583 L272.965382,404.687949 L273.123755,404.949452 C276.56213,410.470142 283.796681,412.269462 289.433324,408.951035 L289.433324,408.951035 L289.725027,408.773687 C292.323961,407.142692 294.205446,404.576775 294.976025,401.597905 L294.976025,401.597905 L327.807505,274.677705 L355.998349,479.011885 L356.041062,479.296747 C357.082331,485.72482 363.072426,490.1783 369.557845,489.283548 L369.557845,489.283548 L369.85245,489.239203 C374.548041,488.473143 378.362876,485.004494 379.559058,480.380352 L379.559058,480.380352 L419.133013,327.39653 L435.381735,354.996566 L435.543066,355.262694 C437.735954,358.77701 441.59028,360.922583 445.747249,360.922583 L445.747249,360.922583 L553.57032,360.922583 L553.57032,360.922583 C560.213447,360.922583 565.598765,366.307901 565.598765,372.951028 Z M452.505805,149.493649 C460.365648,149.493649 467.628442,153.686825 471.558363,160.493649 L564.229106,321.001259 C565.125282,322.691832 565.598765,324.640838 565.598765,326.687777 C565.598765,333.330904 560.213447,338.716222 553.57032,338.716222 L451.566328,338.716222 L425.800288,294.950856 L425.62294,294.659153 C423.991945,292.060218 421.426028,290.178734 418.447158,289.408155 L418.447158,289.408155 L418.167463,289.339295 C411.826545,287.85703 405.429227,291.702682 403.789645,298.040901 L403.789645,298.040901 L370.95724,424.960175 L342.767321,220.62692 L342.722976,220.332314 C341.956916,215.636723 338.488267,211.821889 333.864125,210.625707 C327.432698,208.962014 320.870306,212.827026 319.206612,219.258453 L319.206612,219.258453 L279.631731,372.24135 L263.383935,344.64224 L263.222604,344.376112 C261.029716,340.861796 257.17539,338.716222 253.018421,338.716222 L253.018421,338.716222 L145.528445,338.716222 L145.528445,338.716222 C138.885318,338.716222 133.5,333.330904 133.5,326.687777 C133.5,324.65653 133.956256,322.735416 134.837658,321.056157 L227.540402,160.493649 C231.470323,153.686825 238.733118,149.493649 246.592961,149.493649 L452.505805,149.493649 Z" id="PulseChain-Logo-Shape"></path>
        </g>
    </g>
</svg>
</file>

<file path="assets/icons/arrow-back.svg">
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
  <path fill="none" stroke="#000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7"/>
  <path fill="none" stroke="#000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M4 12h14"/>
</svg>
</file>

<file path="public/dev_docs/en/core-concepts/app-init.md">
# App initialization & backend connect

## What is the SAVVA backend (SAVVA node)?
A SAVVA backend is a server component that **indexes/caches data sourced from blockchain activity** and exposes fast, UIfriendly APIs & WebSocket methods. A single backend can serve **multiple SAVVA domains**think of a domain as a distinct SAVVA social network (branding, tabs, assets, defaults), all backed by one node.

## What the app needs at boot
On startup the web app needs two inputs:

1. **Backend URL**  the base URL of the SAVVA backend.
2. **Domain name**  which SAVVA domain (social network) to render by default.

Defaults come from a tiny YAML file at the web root:

### `/default_connect.yaml`
```yaml
# /default_connect.yaml
domain: savva.app
backendLink: https://ui.savva.app/api/
gear: true
# optional:
# default_ipfs_link: ipfs://bafy.../something.json
````

* `backendLink`  base HTTP endpoint of the SAVVA backend (the app normalizes it).
* `domain`  initial domain to render; can be switched later in the UI.
* `gear`  enables developer gear in the UI (optional).
* `default_ipfs_link`  optional convenience default used in some flows.

> **Production note**
> In production this file is usually served by your HTTP server (e.g., Nginx) and effectively **chooses which domain** a deployed web app shows by default. One common pattern is to serve a specific file from disk:
>
> ```nginx
> # example: serve a static default_connect.yaml
> location = /default_connect.yaml {
>   default_type text/yaml;
>   alias /etc/savva/default_connect.yaml;
> }
> ```
>
> Adjust to your infra; the key is that the app can `GET /default_connect.yaml`.

---

## Boot sequence

1. **Load `/default_connect.yaml`**
   The app fetches the YAML file, validates `backendLink`, and stores `domain`. It immediately **configures endpoints** (HTTP base + WS URL) using those values. &#x20;

2. **Configure endpoints**

   * `httpBase` is a normalized version of `backendLink` (guaranteed trailing slash).
   * `ws` URL is derived from the same base, pointing to `.../ws` (protocol switched to `ws:` or `wss:`) and includes `?domain=...` in the query.
     This keeps **one source of truth** for both HTTP and WS.&#x20;

3. **Fetch `/info`**
   With endpoints set, the app calls `GET <httpBase>info` and stores the JSON. From that moment, **/info drives runtime behavior** (domains, chain, IPFS, assets).&#x20;

4. **Derive runtime state from `/info`**
   The following fields are used (see sample below):

   * **`domains`**  Available domain list. The UI prefers the explicit `domain` from the YAML/override; if its not present in `/info`, it still uses it.&#x20;
   * **`blockchain_id`**  Target EVM chain ID. The wallet helper can switch/add this network.&#x20;
   * **`ipfs_gateways`**  Remote IPFS gateways to try in order (unless a local IPFS override is enabled).&#x20;
   * **`assets_url`** and **`temp_assets_url`**  The **assets base** (prod vs test). The app computes the **active domain assets prefix** as
     `(<assets base> + <domain> + "/")` with a **fallback** to `/domain_default/` if the remote `config.yaml` is missing. &#x20;

5. **Load domain assets & config**
   The app tries `(<active prefix>/config.yaml)` with a short timeout; on failure it falls back to the default pack at `/domain_default/config.yaml`. The resulting parsed config (logos, tabs, locales, etc.) is stored and the UI renders accordingly.&#x20;

6. **WebSocket runtime**
   The WS client uses the computed `ws` URL from endpoints; when backend/domain changes, endpoints recalculate and the WS layer picks it up.&#x20;

---

## Sample `/info` (illustrative)

```json
{
  "domains": [
    "savva.app",
    {"name": "art.savva"},
    "dev.savva"
  ],
  "blockchain_id": 369,
  "ipfs_gateways": [
    "https://cloudflare-ipfs.com/ipfs/",
    "https://ipfs.io/ipfs/"
  ],
  "assets_url": "https://cdn.savva.network/assets/",
  "temp_assets_url": "https://cdn.savva.network/assets-test/"
}
```

### Field-by-field (what the app does with it)

* **domains**  list of selectable domains. The **Switch backend / domain** dialog populates from `/info`, but the configured domain still takes precedence if `/info` is behind. &#x20;
* **blockchain\_id**  numeric EVM chain ID; used to build `switch/add chain` metadata and to ensure the wallet is on the **required network**. &#x20;
* **ipfs\_gateways**  ordered list of remote gateways; combined with an optional **Local IPFS** override (when enabled in settings) to form the **active** gateway order.&#x20;
* **assets\_url / temp\_assets\_url**  the app maintains an **assets env** (`prod`/`test`) and picks the matching base. It then computes `/<base>/<domain>/` and loads `config.yaml`. If the remote pack is missing or slow, it uses the **default** `/domain_default/`.&#x20;

---

## Where this lives in the code (for quick reference)

* Boot & `/default_connect.yaml` load, then `/info`: **`src/context/AppContext.jsx`** and **`src/hooks/useConnect.js`**. &#x20;
* Endpoint source of truth (HTTP base + WS URL): **`src/net/endpoints.js`**.&#x20;
* Domain list resolution, chain ID, IPFS gateways, assets env & domain assets loading: **`src/context/AppContext.jsx`**.  &#x20;
* Switch dialog that fetches `/info` and normalizes `domains`: **`src/components/SwitchConnectDialog.jsx`**.&#x20;

---

**Next:** in the following chapter well break down **domain configuration** (`config.yaml`) and how it controls logos, tabs, locales, and other perdomain UI behaviors.
</file>

<file path="public/dev_docs/en/core-concepts/domain.md">
# Working with domains

A **domain** is simply the name of the social network you want to render. Its usually the sites DNS host (e.g. `savva.app`) but it doesnt have to be. Each domain has a **domain pack**  a folder that contains `config.yaml` plus all domainspecific assets (logos, favicon, locales, tabs config, optional `domain.css`, etc.).

## Where does `config.yaml` live?

At runtime the app computes an **assets base URL** from `/info`:
- **Production:** `assets_url`
- **Test:** `temp_assets_url`

The active environment is a simple prod/test toggle in the app (used by admins to test changes). Given the **selected domain name**, the app builds a prefix:

```

<assetsBase>/<domain>/

```

Then the app tries to load:

```

<assetsBase>/<domain>/config.yaml

```

If that fails (missing pack, 404, etc.), the UI **falls back** to the builtin default pack:

```

/domain\_default/config.yaml

```

> This lookup and diagnostics are centralized; youll see the same paths in the diagnostics UI.  
> The active `domain.css` is loaded from the same prefix and cachebusted with a revision key, so changes apply immediately after upload.

## Why two environments (prod / test)?

The backend serves two base URLs for assets:

- **`assets_url`**  production pack for end users  
- **`temp_assets_url`**  test pack for previewing changes

An administrator (as configured in backend) can push a modified domain pack under the **test** base and verify everything (logos, tabs, GA, colors) without affecting users. When happy, they publish the same pack to **prod**.

## Domain pack layout

Everything for a domain lives under a single folder:

```

<assetsBase>/<domain>/
config.yaml          # main configuration (logos, favicon, locales, modules)
domain.css           # optional theme variables (colors, backgrounds)
i18n/*.yaml          # language dictionaries (per-locale)
images/*             # branding assets
modules/tabs.yaml    # tabs definition for the main screen
modules/*.yaml       # other module configs (optional)
html/*.html          # arbitrary HTML blocks (optional)

````

## Example `config.yaml`

Below is a trimmed example showing the typical fields the app uses:

```yaml
logo:
  light: images/logo_light.png
  dark: images/logo_dark.png
  light_mobile: images/logo_light.png
  dark_mobile: images/logo_dark.png

favicon:
  apple-touch-icon: favicon/apple-touch-icon.png
  16: favicon/favicon-16x16.png
  32: favicon/favicon-32x32.png
  manifest: favicon/site.webmanifest
  mask-icon:
    href: favicon/safari-pinned-tab.svg
    color: '#5bbad5'
  base: favicon/favicon.ico
  meta:
    - name: msapplication-TileColor
      content: '#da532c'
    - name: theme-color
      content: '#ffffff'

GA_tag: G-XXXXXXXXXX   # Google Analytics (gtag) ID

modules:
  tabs: modules/tabs.yaml
  content_lists: modules/content_lists.yaml
  staker_levels: modules/staker_levels.yaml
  categories: modules/categories.yaml

default_locale: en
locales:
  - code: en
    name: English
    title: 'SAVVA.APP - Beyond Likes Social'
    dictionary: i18n/en.yaml
  - code: ru
    name: 
    title: 'SAVVA.APP -   '
    dictionary: i18n/ru.yaml
````

### What these fields control

* **`logo`**  The app chooses the best variant automatically (dark/light + mobile/desktop) and resolves via the active domain prefix.
* **`favicon`**  All favicon links & meta tags are applied dynamically; when the config changes, the app replaces the `<link rel="icon">` set.
* **`GA_tag`**  Enables Google Analytics (gtag.js). When present, the app injects GA scripts and sends SPA `page_view` events on route changes.
* **`modules.tabs`**  Points at the YAML that defines the tabs on the main screen (see below).
* **`locales`**  Language list for the domain (code/name/title + dictionary path). The app can render localized titles/strings per domain.

## Tabs on the main screen

Tabs are configured in a standalone YAML (referenced by `modules.tabs` above). For example:

```yaml
# modules/tabs.yaml
tabs:
  - type: leaders
    title:
      en: Leaders
      ru: 
    right_panel:
      available: true
      blocks:
        - type: html
          en: /html/info_block_en.html
          ru: /html/info_block_ru.html
        - type: content_List
          list_name: main
          count: 7

  - type: new
    title:
      en: New
      ru: 
```

The UI picks the localized tab title, chooses an icon by `type`, and renders optional rightpanel blocks. This file lives in the **same domain folder**, so its versioned and previewed together with `config.yaml`.

## Theme colors via `domain.css`

If present, `domain.css` is fetched from the same domain prefix and applied at runtime. It typically defines CSS custom properties the UI uses (backgrounds, foreground, accents, borders, etc.). Switching **domain** or **environment** reloads this CSS, so admins can finetune branding without rebuilding the app.

Example variables:

```css
:root {
  --gradient: linear-gradient(to top left, #000c40, #607d8b);
  --background: 243 100% 98.26%;
  --foreground: 243 10% 0.52%;
  --muted: 243 10% 91.3%;
  --muted-foreground: 243 5% 41.3%;
  --primary: 243 100% 13%;
  --primary-foreground: 243 2% 98%;
  /* ... */
}
```

## Google Analytics (GA)

Set the `GA_tag` in `config.yaml` to enable GA. The app injects the GA script and initializes `gtag(...)` automatically, and also tracks page views on hashroute changes. Remove or clear `GA_tag` to disable analytics for the domain.

---

### Summary

* The app chooses **prod** or **test** assets base, then loads `<base>/<domain>/config.yaml` with a safe fallback to `/domain_default/config.yaml`.
* **All** domain resources (logos, locales, tabs, `domain.css`) live under the same folder for atomic updates.
* Admins can preview changes in **test** before publishing to **prod**.
* `config.yaml` controls branding (logos, favicon), localization, GA, and where to find UI modules like **tabs**.
</file>

<file path="public/dev_docs/en/core-concepts/index.md">
<!-- public/dev_docs/en/core-concepts/index.md -->
# Core Concepts

This section covers the core architecture of the SAVVA SolidJS app: how it connects to the backend, how domains and assets work, how UI is driven by perdomain configuration, and more.

What well cover:

- How the app boots and finds the correct backend & domain
- How `/info` drives runtime behavior (domains, chain ID, IPFS gateways, assets)
- How domain assets are resolved and when the default pack is used
</file>

<file path="public/dev_docs/fr/core-concepts/app-init.md">
# Initialisation de l'application et connexion au backend

## Qu'est-ce que le backend SAVVA (nud SAVVA) ?
Un backend SAVVA est un composant serveur qui **indexe/cache les donnes provenant de l'activit de la blockchain** et expose des API et des mthodes WebSocket rapides et conviviales pour l'interface utilisateur. Un seul backend peut servir **plusieurs domaines SAVVA**pensez  un  domaine  comme un rseau social SAVVA distinct (branding, onglets, actifs, valeurs par dfaut), tous soutenus par un seul nud.

## Ce dont l'application a besoin au dmarrage
Au dmarrage, l'application web a besoin de deux entres :

1. **URL du backend**  l'URL de base du backend SAVVA.
2. **Nom de domaine**  quel domaine SAVVA (rseau social) rendre par dfaut.

Les valeurs par dfaut proviennent d'un petit fichier YAML  la racine du web :

### `/default_connect.yaml`
```yaml
# /default_connect.yaml
domain: savva.app
backendLink: https://ui.savva.app/api/
gear: true
# optionnel :
# default_ipfs_link: ipfs://bafy.../something.json
```

* `backendLink`  point de terminaison HTTP de base du backend SAVVA (l'application le normalise).
* `domain`  domaine initial  rendre ; peut tre chang plus tard dans l'interface utilisateur.
* `gear`  active les outils de dveloppement dans l'interface utilisateur (optionnel).
* `default_ipfs_link`  valeur par dfaut optionnelle utilise dans certains flux.

> **Remarque de production**
> En production, ce fichier est gnralement servi par votre serveur HTTP (par exemple, Nginx) et choisit effectivement **quel domaine** une application web dploye affiche par dfaut. Un modle courant consiste  servir un fichier spcifique depuis le disque :
>
> ```nginx
> # exemple : servir un fichier statique default_connect.yaml
> location = /default_connect.yaml {
>   default_type text/yaml;
>   alias /etc/savva/default_connect.yaml;
> }
> ```
>
> Ajustez selon votre infrastructure ; l'essentiel est que l'application puisse `GET /default_connect.yaml`.

---

## Squence de dmarrage

1. **Charger `/default_connect.yaml`**
   L'application rcupre le fichier YAML, valide `backendLink`, et stocke `domain`. Elle **configure immdiatement les points de terminaison** (base HTTP + URL WS) en utilisant ces valeurs. &#x20;

2. **Configurer les points de terminaison**

   * `httpBase` est une version normalise de `backendLink` (garantie avec un slash final).
   * L'URL `ws` est drive de la mme base, pointant vers `.../ws` (protocole chang en `ws:` ou `wss:`) et inclut `?domain=...` dans la requte.
     Cela maintient **une source de vrit** pour HTTP et WS.&#x20;

3. **Rcuprer `/info`**
   Avec les points de terminaison dfinis, l'application appelle `GET <httpBase>info` et stocke le JSON.  partir de ce moment, **/info guide le comportement d'excution** (domaines, chane, IPFS, actifs).&#x20;

4. **Driver l'tat d'excution  partir de `/info`**
   Les champs suivants sont utiliss (voir l'exemple ci-dessous) :

   * **`domains`**  Liste des domaines disponibles. L'interface utilisateur prfre le `domain` explicite du YAML/surcharge ; s'il n'est pas prsent dans `/info`, il l'utilise quand mme.&#x20;
   * **`blockchain_id`**  ID de chane EVM cible. L'outil de portefeuille peut changer/ajouter ce rseau.&#x20;
   * **`ipfs_gateways`**  Passerelles IPFS distantes  essayer dans l'ordre (sauf si une surcharge IPFS locale est active).&#x20;
   * **`assets_url`** et **`temp_assets_url`**  La **base des actifs** (prod vs test). L'application calcule le **prfixe des actifs du domaine actif** comme
     `(<base des actifs> + <domaine> + "/")` avec un **repli** sur `/domain_default/` si le `config.yaml` distant est manquant. &#x20;

5. **Charger les actifs et la configuration du domaine**
   L'application essaie `(<prfixe actif>/config.yaml)` avec un court dlai d'attente ; en cas d'chec, elle revient au pack par dfaut  `/domain_default/config.yaml`. La configuration analyse rsultante (logos, onglets, locales, etc.) est stocke et l'interface utilisateur se rend en consquence.&#x20;

6. **Excution WebSocket**
   Le client WS utilise l'URL `ws` calcule  partir des points de terminaison ; lorsque le backend/le domaine changent, les points de terminaison se recalculent et la couche WS le prend en compte.&#x20;

---

## Exemple de `/info` (illustratif)

```json
{
  "domains": [
    "savva.app",
    {"name": "art.savva"},
    "dev.savva"
  ],
  "blockchain_id": 369,
  "ipfs_gateways": [
    "https://cloudflare-ipfs.com/ipfs/",
    "https://ipfs.io/ipfs/"
  ],
  "assets_url": "https://cdn.savva.network/assets/",
  "temp_assets_url": "https://cdn.savva.network/assets-test/"
}
```

### Champ par champ (ce que l'application en fait)

* **domains**  liste des domaines slectionnables. La bote de dialogue **Changer de backend / domaine** se remplit  partir de `/info`, mais le domaine configur prend toujours la priorit si `/info` est en retard. &#x20;
* **blockchain\_id**  ID numrique de la chane EVM ; utilis pour construire les mtadonnes `changer/ajouter une chane` et pour s'assurer que le portefeuille est sur le **rseau requis**. &#x20;
* **ipfs\_gateways**  liste ordonne de passerelles distantes ; combine avec une ventuelle **surcharge IPFS locale** (lorsqu'elle est active dans les paramtres) pour former l'ordre de passerelle **actif**.&#x20;
* **assets\_url / temp\_assets\_url**  l'application maintient un **environnement d'actifs** (`prod`/`test`) et choisit la base correspondante. Elle calcule ensuite `/<base>/<domaine>/` et charge `config.yaml`. Si le pack distant est manquant ou lent, elle utilise le **par dfaut** `/domain_default/`.&#x20;

---

## O cela se trouve dans le code (pour rfrence rapide)

* Dmarrage et chargement de `/default_connect.yaml`, puis `/info` : **`src/context/AppContext.jsx`** et **`src/hooks/useConnect.js`**. &#x20;
* Source de vrit des points de terminaison (base HTTP + URL WS) : **`src/net/endpoints.js`**.&#x20;
* Rsolution de la liste des domaines, ID de chane, passerelles IPFS, environnement d'actifs et chargement des actifs du domaine : **`src/context/AppContext.jsx`**.  &#x20;
* Bote de dialogue de changement qui rcupre `/info` et normalise `domains` : **`src/components/SwitchConnectDialog.jsx`**.&#x20;

---

**Suivant :** dans le chapitre suivant, nous allons dcomposer **la configuration du domaine** (`config.yaml`) et comment elle contrle les logos, les onglets, les locales et d'autres comportements de l'interface utilisateur par domaine.
</file>

<file path="public/dev_docs/fr/core-concepts/domain.md">
# Travailler avec les domaines

Un **domaine** est simplement le nom du rseau social que vous souhaitez rendre. C'est gnralement l'hte DNS du site (par exemple, `savva.app`), mais ce n'est pas obligatoire. Chaque domaine a un **pack de domaine**  un dossier qui contient `config.yaml` ainsi que tous les actifs spcifiques au domaine (logos, favicon, locales, configuration des onglets, `domain.css` optionnel, etc.).

## O se trouve `config.yaml` ?

Au moment de l'excution, l'application calcule une **URL de base des actifs**  partir de `/info` :
- **Production :** `assets_url`
- **Test :** `temp_assets_url`

L'environnement actif est un simple basculement prod/test dans l'application (utilis par les administrateurs pour tester des modifications). tant donn le **nom de domaine slectionn**, l'application construit un prfixe :

```

<assetsBase>/<domain>/

```

Ensuite, l'application essaie de charger :

```

<assetsBase>/<domain>/config.yaml

```

Si cela choue (pack manquant, 404, etc.), l'interface utilisateur **retourne** au pack par dfaut intgr :

```

/domain\_default/config.yaml

```

> Cette recherche et ce diagnostic sont centraliss ; vous verrez les mmes chemins dans l'interface de diagnostic.  
> Le `domain.css` actif est charg  partir du mme prfixe et est mis en cache avec une cl de rvision, donc les modifications s'appliquent immdiatement aprs le tlchargement.

## Pourquoi deux environnements (prod / test) ?

Le backend sert deux URL de base pour les actifs :

- **`assets_url`**  pack de production pour les utilisateurs finaux  
- **`temp_assets_url`**  pack de test pour prvisualiser les modifications

Un administrateur (tel que configur dans le backend) peut pousser un pack de domaine modifi sous la base **test** et vrifier tout (logos, onglets, GA, couleurs) sans affecter les utilisateurs. Lorsqu'il est satisfait, il publie le mme pack en **prod**.

## Structure du pack de domaine

Tout pour un domaine se trouve sous un seul dossier :

```

<assetsBase>/<domain>/
config.yaml          # configuration principale (logos, favicon, locales, modules)
domain.css           # variables de thme optionnelles (couleurs, arrire-plans)
i18n/*.yaml          # dictionnaires de langue (par-locale)
images/*             # actifs de marque
modules/tabs.yaml    # dfinition des onglets pour l'cran principal
modules/*.yaml       # autres configurations de module (optionnelles)
html/*.html          # blocs HTML arbitraires (optionnels)

````

## Exemple de `config.yaml`

Voici un exemple abrg montrant les champs typiques utiliss par l'application :

```yaml
logo:
  light: images/logo_light.png
  dark: images/logo_dark.png
  light_mobile: images/logo_light.png
  dark_mobile: images/logo_dark.png

favicon:
  apple-touch-icon: favicon/apple-touch-icon.png
  16: favicon/favicon-16x16.png
  32: favicon/favicon-32x32.png
  manifest: favicon/site.webmanifest
  mask-icon:
    href: favicon/safari-pinned-tab.svg
    color: '#5bbad5'
  base: favicon/favicon.ico
  meta:
    - name: msapplication-TileColor
      content: '#da532c'
    - name: theme-color
      content: '#ffffff'

GA_tag: G-XXXXXXXXXX   # ID Google Analytics (gtag)

modules:
  tabs: modules/tabs.yaml
  content_lists: modules/content_lists.yaml
  staker_levels: modules/staker_levels.yaml
  categories: modules/categories.yaml

default_locale: en
locales:
  - code: en
    name: English
    title: 'SAVVA.APP - Beyond Likes Social'
    dictionary: i18n/en.yaml
  - code: ru
    name: 
    title: 'SAVVA.APP -   '
    dictionary: i18n/ru.yaml
````

### Ce que ces champs contrlent

* **`logo`**  L'application choisit automatiquement la meilleure variante (sombre/clair + mobile/desktop) et rsout via le prfixe de domaine actif.
* **`favicon`**  Tous les liens de favicon et les balises mta sont appliqus dynamiquement ; lorsque la configuration change, l'application remplace le `<link rel="icon">` dfini.
* **`GA_tag`**  Active Google Analytics (gtag.js). Lorsqu'il est prsent, l'application injecte des scripts GA et envoie des vnements `page_view` SPA lors des changements de route.
* **`modules.tabs`**  Pointe vers le YAML qui dfinit les onglets sur l'cran principal (voir ci-dessous).
* **`locales`**  Liste des langues pour le domaine (code/nom/titre + chemin du dictionnaire). L'application peut rendre des titres/chanes localiss par domaine.

## Onglets sur l'cran principal

Les onglets sont configurs dans un YAML autonome (rfrenc par `modules.tabs` ci-dessus). Par exemple :

```yaml
# modules/tabs.yaml
tabs:
  - type: leaders
    title:
      en: Leaders
      ru: 
    right_panel:
      available: true
      blocks:
        - type: html
          en: /html/info_block_en.html
          ru: /html/info_block_ru.html
        - type: content_List
          list_name: main
          count: 7

  - type: new
    title:
      en: New
      ru: 
```

L'interface utilisateur choisit le titre d'onglet localis, choisit une icne par `type`, et rend les blocs optionnels du panneau de droite. Ce fichier se trouve dans le **mme dossier de domaine**, il est donc versionn et prvisualis avec `config.yaml`.

## Couleurs de thme via `domain.css`

Si prsent, `domain.css` est rcupr  partir du mme prfixe de domaine et appliqu  l'excution. Il dfinit gnralement des proprits CSS personnalises que l'interface utilise (arrire-plans, premier plan, accents, bordures, etc.). Changer de **domaine** ou d'**environnement** recharge ce CSS, permettant aux administrateurs d'ajuster la marque sans reconstruire l'application.

Exemple de variables :

```css
:root {
  --gradient: linear-gradient(to top left, #000c40, #607d8b);
  --background: 243 100% 98.26%;
  --foreground: 243 10% 0.52%;
  --muted: 243 10% 91.3%;
  --muted-foreground: 243 5% 41.3%;
  --primary: 243 100% 13%;
  --primary-foreground: 243 2% 98%;
  /* ... */
}
```

## Google Analytics (GA)

Dfinissez le `GA_tag` dans `config.yaml` pour activer GA. L'application injecte le script GA et initialise `gtag(...)` automatiquement, et suit galement les vues de page lors des changements de route par hachage. Supprimez ou effacez `GA_tag` pour dsactiver l'analyse pour le domaine.

---

### Rsum

* L'application choisit la base d'actifs **prod** ou **test**, puis charge `<base>/<domain>/config.yaml` avec un retour scuris  `/domain_default/config.yaml`.
* **Tous** les ressources de domaine (logos, locales, onglets, `domain.css`) se trouvent sous le mme dossier pour des mises  jour atomiques.
* Les administrateurs peuvent prvisualiser les modifications en **test** avant de publier en **prod**.
* `config.yaml` contrle la marque (logos, favicon), la localisation, GA, et o trouver les modules d'interface utilisateur comme **tabs**.
</file>

<file path="public/dev_docs/fr/core-concepts/index.md">
<!-- public/dev_docs/fr/core-concepts/index.md -->
# Concepts de base

Cette section couvre l'architecture de base de l'application SAVVA SolidJS : comment elle se connecte au backend, comment fonctionnent les domaines et les actifs, comment l'interface utilisateur est pilote par la configuration par domaine, et plus encore.

Ce que nous allons aborder :

- Comment l'application dmarre et trouve le bon backend et domaine
- Comment `/info` influence le comportement  l'excution (domaines, ID de chane, passerelles IPFS, actifs)
- Comment les actifs de domaine sont rsolus et quand le pack par dfaut est utilis
</file>

<file path="public/dev_docs/fr/.i18n-docs-state.json">
{
  "core-concepts/app-init.md": "e0a8526b3460031a2a9794a549b31b18581154e1aa833da535dbca06d58d1f20",
  "core-concepts/domain.md": "62cf574a6555e6db6a9dcf96f1b4456a49ab2d5ad1e40ac86c756c4dbc171644",
  "core-concepts/index.md": "1988a34dc654ca313da81f25d97c40b6d0fc97f4b3e190119af3de83560009a9",
  "getting-started.md": "3249a86adcee7286e9994ec908c92fd979a679dd980c6c47ac89bc08f4a1e86d",
  "index.md": "112d9fcd7baa0934935c9dc58310ba7486b6dc998bf5e1940ca0e75ff1af70d7",
  "sidebar.yaml": "255c4c9c540e752ec367af3e5b5abaa265bac44066c6409a233f42ae30cb5348"
}
</file>

<file path="public/dev_docs/fr/getting-started.md">
# Prise en Main

Bienvenue dans le guide de **Prise en Main** pour la plateforme SAVVA.

Cette page vous guide  travers les tapes de base pour configurer le projet localement et commencer  contribuer.

## Prrequis

Avant de commencer, assurez-vous d'avoir les outils suivants installs :

- **Node.js** (v18 ou version ultrieure recommande)  
- Gestionnaire de paquets **npm** ou **yarn**  
- **Git** pour cloner le dpt  
- Un **navigateur** moderne (Chrome, Firefox, Edge) pour le dveloppement et les tests  

## Cloner le Dpt

Le code source est hberg sur GitHub. Pour obtenir la dernire version :

```bash
git clone https://github.com/AlexNa-Holdings/savva-ui-solidjs
cd savva-ui-solidjs
````

## Installer les Dpendances

Dans le dossier du projet, installez toutes les dpendances requises :

```bash
npm install
# ou
yarn install
```

## Dmarrer le Serveur de Dveloppement

Lancez le serveur de dveloppement avec rechargement  chaud :

```bash
npm run dev
# ou
yarn dev
```

L'application sera disponible  [http://localhost:5173](http://localhost:5173).

## Construire pour la Production

Pour crer une version optimise :

```bash
npm run build
```

La sortie sera dans le dossier `dist/`.

## tapes Suivantes

* Explorez la **Documentation Dveloppeur** pour l'architecture et les modules.
* Essayez de changer de domaines et d'actifs dans le **Panneau de Droite**.
* Contribuez en ouvrant des problmes ou des demandes de tirage sur GitHub.

C'est tout !  Vous tes prt  commencer  travailler avec la **plateforme SAVVA**.

```html
<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SAVVA  SolidJS</title>

  <!-- Prcharger le thme pour viter le flash -->
  <script>
    (function () {
      try {
        const saved = localStorage.getItem("theme");
        const systemDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
        const theme = saved || (systemDark ? "dark" : "light");
        document.documentElement.classList.toggle("dark", theme === "dark");
      } catch { }
    })();
  </script>

  <script>
    (function () {
      // S'il y a un chemin rel (par exemple, /settings) mais pas de hash, rcrire en forme de hash : /#/settings
      if (!location.hash && location.pathname !== "/") {
        var newHash = "#" + location.pathname + location.search + location.hash;
        history.replaceState(null, "", "/" + newHash);
      }
    })();
  </script>


  <!-- Charger l'application aprs que la classe de thme soit dfinie -->
  <script type="module" src="/src/index.jsx"></script>
</head>

<body>
  <div id="root"></div>
</body>

</html>
```
</file>

<file path="public/dev_docs/fr/index.md">
# Documentation des dveloppeurs SAVVA

Bienvenue dans la documentation des dveloppeurs de la **plateforme SAVVA**.


## Qu'est-ce que SAVVA ?

SAVVA est une **plateforme open-source** pour construire des rseaux sociaux de nouvelle gnration.  
Contrairement aux plateformes traditionnelles, SAVVA combine **blockchain** et **IPFS** pour crer une fondation dcentralise, fiable et rsistante  la censure.

- **Publications ancres dans la blockchain**  
  Chaque contenu est enregistr sur la chane et sign avec la cl cryptographique de l'auteur. Cela garantit l'authenticit et permet de faire confiance au fait que la publication provient rellement de l'auteur dclar.

- **Stockage dcentralis avec IPFS**  
  Le contenu est stock dans le systme de fichiers interplantaire plutt que dans la base de donnes d'une seule entreprise. Cela limine les points de dfaillance uniques et rend le systme plus rsilient.

Ensemble, la blockchain et l'IPFS forment un nouveau type de rseau social : un rseau sans contrle centralis, sans entreprise unique derrire lui, et sans point de pression pouvant tre exploit.


##  propos de cette documentation

Ceci est une **documentation pour dveloppeurs**, pas une aide pour les utilisateurs finaux.  
SAVVA est open source, et nous encourageons activement les dveloppeurs  forker, tendre et adapter la base de code.  

Ici, vous trouverez :

- Les **principes fondamentaux** derrire l'architecture.  
- Comment les **interfaces et les API** sont structures.  
- Les meilleures pratiques pour tendre et intgrer la plateforme.

Si vous tes un dveloppeur explorant SAVVA, c'est l'endroit o commencer. 
</file>

<file path="public/dev_docs/fr/sidebar.yaml">
sections:
  - title: Commencer
    items:
      - label: Aperu
        file: index.md
      - label: Configuration
        file: getting-started.md
  - title: Concepts de base
    items:
      - label: Aperu
        file: core-concepts/index.md
      - label: Initialisation de l'application et connexion au backend
        file: core-concepts/app-init.md
      - label: Travailler avec les domaines
        file: core-concepts/domain.md
</file>

<file path="public/dev_docs/ru/core-concepts/app-init.md">
#      

##    SAVVA ( SAVVA)?
 SAVVA    ,  **/ ,    **,   ,    API   WebSocket.     **  SAVVA**   ""     SAVVA (, , ,   ),    .

##     
  -    :

1. **URL **   URL  SAVVA.
2. ** **    SAVVA ( )   .

      YAML-   -:

### `/default_connect.yaml`
```yaml
# /default_connect.yaml
domain: savva.app
backendLink: https://ui.savva.app/api/
gear: true
# :
# default_ipfs_link: ipfs://bafy.../something.json
```

* `backendLink`   HTTP-   SAVVA (  ).
* `domain`     ;      .
* `gear`       ().
* `default_ipfs_link`     ,    .

> **  **
>        HTTP- (, Nginx)   **,  ** -   .          :
>
> ```nginx
> # :   default_connect.yaml
> location = /default_connect.yaml {
>   default_type text/yaml;
>   alias /etc/savva/default_connect.yaml;
> }
> ```
>
>    ;    ,    `GET /default_connect.yaml`.

---

##  

1. ** `/default_connect.yaml`**
     YAML-,  `backendLink`   `domain`.   **  ** ( HTTP + URL WS),   . &#x20;

2. **  **

   * `httpBase`    `backendLink` (   ).
   * URL `ws`     ,   `.../ws` (   `ws:`  `wss:`)   `?domain=...`  .
       **  **   HTTP,    WS.&#x20;

3. ** `/info`**
         `GET <httpBase>info`   JSON.    **/info     ** (, , IPFS, ).&#x20;

4. **      `/info`**
      (.  ):

   * **`domains`**    .    `domain`  YAML/;     `/info`,    .&#x20;
   * **`blockchain_id`**   ID   EVM.    /  .&#x20;
   * **`ipfs_gateways`**   IPFS-,      (    IPFS-).&#x20;
   * **`assets_url`**  **`temp_assets_url`**   **** (  ).   **   ** 
     `(<assets base> + <domain> + "/")`  ** **  `/domain_default/`,   `config.yaml` . &#x20;

5. **    **
     `(<active prefix>/config.yaml)`   -;           `/domain_default/config.yaml`.    (, ,   . .) ,    .&#x20;

6. **  WebSocket**
    WS   `ws` URL   ;  / ,   ,   WS  .&#x20;

---

##  `/info` ()

```json
{
  "domains": [
    "savva.app",
    {"name": "art.savva"},
    "dev.savva"
  ],
  "blockchain_id": 369,
  "ipfs_gateways": [
    "https://cloudflare-ipfs.com/ipfs/",
    "https://ipfs.io/ipfs/"
  ],
  "assets_url": "https://cdn.savva.network/assets/",
  "temp_assets_url": "https://cdn.savva.network/assets-test/"
}
```

###    (    )

* **domains**    .  **  / **   `/info`,       ,  `/info` . &#x20;
* **blockchain\_id**   ID  EVM;     `switch/add chain`    ,     ** **. &#x20;
* **ipfs\_gateways**     ;    ** IPFS**  (   ),   ****  .&#x20;
* **assets\_url / temp\_assets\_url**    ** ** (`prod`/`test`)    .    `/<base>/<domain>/`   `config.yaml`.      ,  **** `/domain_default/`.&#x20;

---

##      (  )

*   `/default_connect.yaml`,  `/info`: **`src/context/AppContext.jsx`**  **`src/hooks/useConnect.js`**. &#x20;
*    ( HTTP + URL WS): **`src/net/endpoints.js`**.&#x20;
*   , ID , IPFS-,      : **`src/context/AppContext.jsx`**.  &#x20;
*  ,   `/info`   `domains`: **`src/components/SwitchConnectDialog.jsx`**.&#x20;

---

**:**      ** ** (`config.yaml`)  ,    , ,        .
</file>

<file path="public/dev_docs/ru/core-concepts/domain.md">
#   

****      ,    .   DNS-  (, `savva.app`),    .     ** **  ,  `config.yaml`       (, , ,  ,  `domain.css`  . .).

##   `config.yaml`?

     ** URL **  `/info`:
- **:** `assets_url`
- **:** `temp_assets_url`

      /   (    ).  **  **,   :

```

<assetsBase>/<domain>/

```

   :

```

<assetsBase>/<domain>/config.yaml

```

    ( , 404  . .),  ****     :

```

/domain\_default/config.yaml

```

>     ;        .  
>  `domain.css`           ,       .

##    ( / )?

    URL  :

- **`assets_url`**        
- **`temp_assets_url`**       

 (   )       ****    (, , GA, )    .   ,       ****.

##   

      :

```

<assetsBase>/<domain>/
config.yaml          #   (, , , )
domain.css           #    (, )
i18n/*.yaml          #   ( )
images/*             #  
modules/tabs.yaml    #     
modules/*.yaml       #    ()
html/*.html          #  HTML- ()

````

##  `config.yaml`

   ,   ,   :

```yaml
logo:
  light: images/logo_light.png
  dark: images/logo_dark.png
  light_mobile: images/logo_light.png
  dark_mobile: images/logo_dark.png

favicon:
  apple-touch-icon: favicon/apple-touch-icon.png
  16: favicon/favicon-16x16.png
  32: favicon/favicon-32x32.png
  manifest: favicon/site.webmanifest
  mask-icon:
    href: favicon/safari-pinned-tab.svg
    color: '#5bbad5'
  base: favicon/favicon.ico
  meta:
    - name: msapplication-TileColor
      content: '#da532c'
    - name: theme-color
      content: '#ffffff'

GA_tag: G-XXXXXXXXXX   # ID Google Analytics (gtag)

modules:
  tabs: modules/tabs.yaml
  content_lists: modules/content_lists.yaml
  staker_levels: modules/staker_levels.yaml
  categories: modules/categories.yaml

default_locale: en
locales:
  - code: en
    name: English
    title: 'SAVVA.APP - Beyond Likes Social'
    dictionary: i18n/en.yaml
  - code: ru
    name: 
    title: 'SAVVA.APP -   '
    dictionary: i18n/ru.yaml
````

###    

* **`logo`**       (/ + /)      .
* **`favicon`**       -  ;   ,    `<link rel="icon">`.
* **`GA_tag`**   Google Analytics (gtag.js).   ,    GA    SPA `page_view`   .
* **`modules.tabs`**    YAML,       (. ).
* **`locales`**      (// +   ).     /   .

##    

    YAML (  `modules.tabs` ). :

```yaml
# modules/tabs.yaml
tabs:
  - type: leaders
    title:
      en: Leaders
      ru: 
    right_panel:
      available: true
      blocks:
        - type: html
          en: /html/info_block_en.html
          ru: /html/info_block_ru.html
        - type: content_List
          list_name: main
          count: 7

  - type: new
    title:
      en: New
      ru: 
```

    ,    `type`      .     **   **,         `config.yaml`.

##    `domain.css`

 , `domain.css`           .     CSS-,    (,  , ,   . .).  ****  ****   CSS,          .

 :

```css
:root {
  --gradient: linear-gradient(to top left, #000c40, #607d8b);
  --background: 243 100% 98.26%;
  --foreground: 243 10% 0.52%;
  --muted: 243 10% 91.3%;
  --muted-foreground: 243 5% 41.3%;
  --primary: 243 100% 13%;
  --primary-foreground: 243 2% 98%;
  /* ... */
}
```

## Google Analytics (GA)

 `GA_tag`  `config.yaml`,   GA.     GA   `gtag(...)`,        -.    `GA_tag`,     .

---

### 

*   ****  ****  ,   `<base>/<domain>/config.yaml`      `/domain_default/config.yaml`.
* ****   (, , , `domain.css`)       .
*       ****    ****.
* `config.yaml`   (, ), , GA     ,   ****.
</file>

<file path="public/dev_docs/ru/core-concepts/index.md">
<!-- public/dev_docs/ru/core-concepts/index.md -->
#  

       SAVVA SolidJS:     ,     ,          .

  :

-         
-  `/info`      (,  ,  IPFS, )
-          
</file>

<file path="public/dev_docs/ru/.i18n-docs-state.json">
{
  "core-concepts/app-init.md": "e0a8526b3460031a2a9794a549b31b18581154e1aa833da535dbca06d58d1f20",
  "core-concepts/domain.md": "62cf574a6555e6db6a9dcf96f1b4456a49ab2d5ad1e40ac86c756c4dbc171644",
  "core-concepts/index.md": "1988a34dc654ca313da81f25d97c40b6d0fc97f4b3e190119af3de83560009a9",
  "getting-started.md": "3249a86adcee7286e9994ec908c92fd979a679dd980c6c47ac89bc08f4a1e86d",
  "index.md": "112d9fcd7baa0934935c9dc58310ba7486b6dc998bf5e1940ca0e75ff1af70d7",
  "sidebar.yaml": "255c4c9c540e752ec367af3e5b5abaa265bac44066c6409a233f42ae30cb5348"
}
</file>

<file path="public/dev_docs/ru/getting-started.md">
#  

    ** **   SAVVA.

              .

##  

   , ,      :

- **Node.js** (  18  )  
-   **npm**  **yarn**  
- **Git**     
-  **** (Chrome, Firefox, Edge)      

##  

    GitHub.    :

```bash
git clone https://github.com/AlexNa-Holdings/savva-ui-solidjs
cd savva-ui-solidjs
````

##  

      :

```bash
npm install
# 
yarn install
```

##   

     :

```bash
npm run dev
# 
yarn dev
```

     [http://localhost:5173](http://localhost:5173).

##   

   :

```bash
npm run build
```

     `dist/`.

##  

*  **  **    .
*       ** **.
*  ,        GitHub.

  !       ** SAVVA**.

```html
<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SAVVA  SolidJS</title>

  <!--   ,    -->
  <script>
    (function () {
      try {
        const saved = localStorage.getItem("theme");
        const systemDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
        const theme = saved || (systemDark ? "dark" : "light");
        document.documentElement.classList.toggle("dark", theme === "dark");
      } catch { }
    })();
  </script>

  <script>
    (function () {
      //     (, /settings),   ,   -: /#/settings
      if (!location.hash && location.pathname !== "/") {
        var newHash = "#" + location.pathname + location.search + location.hash;
        history.replaceState(null, "", "/" + newHash);
      }
    })();
  </script>

  <!--       -->
  <script type="module" src="/src/index.jsx"></script>
</head>

<body>
  <div id="root"></div>
</body>

</html>
```
</file>

<file path="public/dev_docs/ru/index.md">
#    SAVVA

      ** SAVVA**.


##   SAVVA?

SAVVA   **    **      .  
    , SAVVA    ****  **IPFS**,   ,      .

- **,   **  
            .       ,       .

- **   IPFS**  
       ,       .          .

   IPFS     :   ,         ,     .


##   

 **  **,      .  
SAVVA      ,      ,     .  

  :

- ** ** .  
-   **  API**.  
-       .

  ,  SAVVA,  ,    . 
</file>

<file path="public/dev_docs/ru/sidebar.yaml">
sections:
  - title:  
    items:
      - label: 
        file: index.md
      - label: 
        file: getting-started.md
  - title:  
    items:
      - label: 
        file: core-concepts/index.md
      - label:      
        file: core-concepts/app-init.md
      - label:   
        file: core-concepts/domain.md
</file>

<file path="public/dev_docs/sr/core-concepts/app-init.md">
# Inicijalizacija aplikacije i povezivanje sa backend-om

## ta je SAVVA backend (SAVVA vor)?
SAVVA backend je serverska komponenta koja **indeksira/keira podatke dobijene iz blockchain aktivnosti** i izlae brze, UI-prijateljske API-je i WebSocket metode. Jedan backend moe sluiti **vie SAVVA domena**razmislite o "domeni" kao o posebnoj SAVVA drutvenoj mrei (brendiranje, kartice, resursi, podrazumevano), sve podrano jednim vorom.

## ta aplikacija treba pri pokretanju
Pri pokretanju web aplikacija su potrebna dva ulaza:

1. **Backend URL**  osnovni URL SAVVA backend-a.
2. **Ime domena**  koji SAVVA domen (drutvena mrea) da se prikazuje podrazumevano.

Podrazumevane vrednosti dolaze iz male YAML datoteke na web korenu:

### `/default_connect.yaml`
```yaml
# /default_connect.yaml
domain: savva.app
backendLink: https://ui.savva.app/api/
gear: true
# opcionalno:
# default_ipfs_link: ipfs://bafy.../something.json
```

* `backendLink`  osnovna HTTP taka SAVVA backend-a (aplikacija je normalizuje).
* `domain`  inicijalni domen za prikaz; moe se promeniti kasnije u UI.
* `gear`  omoguava developerske alate u UI (opcionalno).
* `default_ipfs_link`  opcionalna pogodnost koja se koristi u nekim tokovima.

> **Napomena za proizvodnju**
> U proizvodnji, ova datoteka se obino slui od strane vaeg HTTP servera (npr., Nginx) i efektivno **biraju koji domen** se prikazuje podrazumevano u implementiranoj web aplikaciji. Jedan uobiajen obrazac je da se slui odreena datoteka sa diska:
>
> ```nginx
> # primer: slui statiku default_connect.yaml
> location = /default_connect.yaml {
>   default_type text/yaml;
>   alias /etc/savva/default_connect.yaml;
> }
> ```
>
> Prilagodite svojoj infrastrukturi; klju je da aplikacija moe `GET /default_connect.yaml`.

---

## Sekvenca pokretanja

1. **Uitaj `/default_connect.yaml`**
   Aplikacija preuzima YAML datoteku, validira `backendLink` i uva `domain`. Odmah **konfigurie take** (HTTP osnovu + WS URL) koristei te vrednosti. &#x20;

2. **Konfigurii take**

   * `httpBase` je normalizovana verzija `backendLink` (garantovano sa zavrnim slash-om).
   * `ws` URL se izvodi iz iste osnove, ukazujui na `.../ws` (protokol prebaen na `ws:` ili `wss:`) i ukljuuje `?domain=...` u upitu.
     Ovo odrava **jedan izvor istine** za HTTP i WS.&#x20;

3. **Preuzmi `/info`**
   Sa postavljenim takama, aplikacija poziva `GET <httpBase>info` i uva JSON. Od tog trenutka, **/info upravlja ponaanjem u vreme izvoenja** (domeni, lanac, IPFS, resursi).&#x20;

4. **Izvedi stanje u vreme izvoenja iz `/info`**
   Sledea polja se koriste (vidi primer ispod):

   * **`domains`**  Lista dostupnih domena. UI preferira eksplicitni `domain` iz YAML/override; ako nije prisutan u `/info`, i dalje ga koristi.&#x20;
   * **`blockchain_id`**  ID ciljnog EVM lanca. Pomonik za novanik moe prebaciti/dodati ovu mreu.&#x20;
   * **`ipfs_gateways`**  Udaljeni IPFS gateway-evi koje treba probati redom (osim ako nije omoguena lokalna IPFS prepravka).&#x20;
   * **`assets_url`** i **`temp_assets_url`**  Osnovna **URL adresa resursa** (proizvod vs test). Aplikacija izraunava **aktivni prefiks resursa domena** kao
     `(<assets base> + <domain> + "/")` sa **rezervom** na `/domain_default/` ako je udaljeni `config.yaml` nedostupan. &#x20;

5. **Uitaj resurse domena i konfiguraciju**
   Aplikacija pokuava `(<active prefix>/config.yaml)` sa kratkim vremenskim ogranienjem; u sluaju neuspeha vraa se na podrazumevani paket na `/domain_default/config.yaml`. Rezultantna analizirana konfiguracija (logotipi, kartice, jezici itd.) se uva i UI se prikazuje u skladu s tim.&#x20;

6. **WebSocket vreme izvoenja**
   WS klijent koristi izraunati `ws` URL iz taaka; kada se backend/domen promene, take se ponovo izraunavaju i WS sloj to preuzima.&#x20;

---

## Primer `/info` (ilustrativno)

```json
{
  "domains": [
    "savva.app",
    {"name": "art.savva"},
    "dev.savva"
  ],
  "blockchain_id": 369,
  "ipfs_gateways": [
    "https://cloudflare-ipfs.com/ipfs/",
    "https://ipfs.io/ipfs/"
  ],
  "assets_url": "https://cdn.savva.network/assets/",
  "temp_assets_url": "https://cdn.savva.network/assets-test/"
}
```

### Polje po polje (ta aplikacija radi s tim)

* **domains**  lista selektabilnih domena. Dijalog **Prebaci backend / domen** se popunjava iz `/info`, ali konfigurisani domen i dalje ima prioritet ako je `/info` iza. &#x20;
* **blockchain\_id**  numeriki EVM ID lanca; koristi se za izgradnju `switch/add chain` metapodataka i za osiguranje da je novanik na **zahtevanoj mrei**. &#x20;
* **ipfs\_gateways**  ureena lista udaljenih gateway-eva; kombinovana sa opcionalnom **Lokalnom IPFS** prepravkom (kada je omoguena u podeavanjima) da formira **aktivni** redosled gateway-a.&#x20;
* **assets\_url / temp\_assets\_url**  aplikacija odrava **okruenje resursa** (`prod`/`test`) i bira odgovarajui osnov. Zatim izraunava `/<base>/<domain>/` i uitava `config.yaml`. Ako udaljeni paket nedostaje ili je spor, koristi **podrazumevani** `/domain_default/`.&#x20;

---

## Gde se ovo nalazi u kodu (za brzu referencu)

* Pokretanje i uitavanje `/default_connect.yaml`, zatim `/info`: **`src/context/AppContext.jsx`** i **`src/hooks/useConnect.js`**. &#x20;
* Izvor take istine (HTTP osnovna + WS URL): **`src/net/endpoints.js`**.&#x20;
* Reavanje liste domena, ID lanca, IPFS gateway-eva, okruenje resursa i uitavanje resursa domena: **`src/context/AppContext.jsx`**.  &#x20;
* Dijalog za prebacivanje koji preuzima `/info` i normalizuje `domains`: **`src/components/SwitchConnectDialog.jsx`**.&#x20;

---

**Sledee:** u sledeem poglavlju razloiemo **konfiguraciju domena** (`config.yaml`) i kako ona kontrolie logotipe, kartice, jezike i drugo ponaanje UI po domenima.
</file>

<file path="public/dev_docs/sr/core-concepts/domain.md">
# Rad sa domenama

**Domena** je jednostavno naziv drutvene mree koju elite da prikaete. Obino je to DNS host sajta (npr. `savva.app`), ali ne mora biti. Svaka domena ima **domen paket**  folder koji sadri `config.yaml` plus sve resurse specifine za domenu (logotipe, favicon, lokalizacije, konfiguraciju tabova, opcioni `domain.css`, itd.).

## Gde se nalazi `config.yaml`?

Tokom izvravanja, aplikacija izraunava **osnovni URL resursa** iz `/info`:
- **Proizvodnja:** `assets_url`
- **Test:** `temp_assets_url`

Aktivno okruenje je jednostavan prekida izmeu produkcije i testa u aplikaciji (koji koriste administratori za testiranje promena). S obzirom na **izabrano ime domene**, aplikacija gradi prefiks:

```

<assetsBase>/<domain>/

```

Zatim aplikacija pokuava da uita:

```

<assetsBase>/<domain>/config.yaml

```

Ako to ne uspe (nedostajui paket, 404, itd.), UI **pada nazad** na ugraeni podrazumevani paket:

```

/domain\_default/config.yaml

```

> Ova pretraga i dijagnostika su centralizovane; videete iste putanje u dijagnostikom UI-u.  
> Aktivni `domain.css` se uitava iz istog prefiksa i keira se sa kljuem revizije, tako da se promene primenjuju odmah nakon uitavanja.

## Zato dva okruenja (proizvodnja / test)?

Backend prua dva osnovna URL-a za resurse:

- **`assets_url`**  paket za proizvodnju za krajnje korisnike  
- **`temp_assets_url`**  test paket za pregled promena

Administrator (kako je podeeno u backendu) moe da gurne izmenjeni domen paket pod **test** osnovu i da proveri sve (logotipe, tabove, GA, boje) bez uticaja na korisnike. Kada su zadovoljni, objavljuju isti paket u **proizvodnju**.

## Raspored domen paketa

Sve za domenu se nalazi u jednom folderu:

```

<assetsBase>/<domain>/
config.yaml          # glavna konfiguracija (logotipi, favicon, lokalizacije, moduli)
domain.css           # opcione teme varijable (boje, pozadine)
i18n/*.yaml          # jeziki renici (po lokalizaciji)
images/*             # resursi za brendiranje
modules/tabs.yaml    # definicija tabova za glavni ekran
modules/*.yaml       # druge konfiguracije modula (opciono)
html/*.html          # proizvoljni HTML blokovi (opciono)

````

## Primer `config.yaml`

Ispod je skraeni primer koji prikazuje tipina polja koja aplikacija koristi:

```yaml
logo:
  light: images/logo_light.png
  dark: images/logo_dark.png
  light_mobile: images/logo_light.png
  dark_mobile: images/logo_dark.png

favicon:
  apple-touch-icon: favicon/apple-touch-icon.png
  16: favicon/favicon-16x16.png
  32: favicon/favicon-32x32.png
  manifest: favicon/site.webmanifest
  mask-icon:
    href: favicon/safari-pinned-tab.svg
    color: '#5bbad5'
  base: favicon/favicon.ico
  meta:
    - name: msapplication-TileColor
      content: '#da532c'
    - name: theme-color
      content: '#ffffff'

GA_tag: G-XXXXXXXXXX   # Google Analytics (gtag) ID

modules:
  tabs: modules/tabs.yaml
  content_lists: modules/content_lists.yaml
  staker_levels: modules/staker_levels.yaml
  categories: modules/categories.yaml

default_locale: en
locales:
  - code: en
    name: English
    title: 'SAVVA.APP - Beyond Likes Social'
    dictionary: i18n/en.yaml
  - code: ru
    name: 
    title: 'SAVVA.APP -   '
    dictionary: i18n/ru.yaml
````

### ta ova polja kontroliu

* **`logo`**  Aplikacija automatski bira najbolju varijantu (tamnu/svetlu + mobilnu/desktop) i reava putem aktivnog prefiksa domene.
* **`favicon`**  Sve favicon veze i meta tagovi se dinamiki primenjuju; kada se konfiguracija promeni, aplikacija zamenjuje set `<link rel="icon">`.
* **`GA_tag`**  Omoguava Google Analytics (gtag.js). Kada je prisutan, aplikacija ubacuje GA skripte i alje SPA `page_view` dogaaje prilikom promena rute.
* **`modules.tabs`**  Ukazuje na YAML koji definie tabove na glavnom ekranu (vidi ispod).
* **`locales`**  Lista jezika za domenu (kod/naziv/naslov + putanja renika). Aplikacija moe da prikae lokalizovane naslove/stringove po domeni.

## Tabovi na glavnom ekranu

Tabovi su konfigurirani u samostalnom YAML-u (na koji se poziva `modules.tabs` iznad). Na primer:

```yaml
# modules/tabs.yaml
tabs:
  - type: leaders
    title:
      en: Leaders
      ru: 
    right_panel:
      available: true
      blocks:
        - type: html
          en: /html/info_block_en.html
          ru: /html/info_block_ru.html
        - type: content_List
          list_name: main
          count: 7

  - type: new
    title:
      en: New
      ru: 
```

UI bira lokalizovani naslov taba, bira ikonu prema `type`, i prikazuje opcionale blokove desnog panela. Ova datoteka se nalazi u **istom folderu domene**, tako da je verzionisana i pregledana zajedno sa `config.yaml`.

## Boje teme putem `domain.css`

Ako je prisutan, `domain.css` se preuzima iz istog prefiksa domene i primenjuje u vreme izvravanja. Obino definie CSS prilagoene osobine koje UI koristi (pozadine, foreground, akcenti, ivice, itd.). Promena **domene** ili **okruenja** ponovo uitava ovaj CSS, tako da administratori mogu fino podeavati brendiranje bez ponovnog izgradnje aplikacije.

Primer varijabli:

```css
:root {
  --gradient: linear-gradient(to top left, #000c40, #607d8b);
  --background: 243 100% 98.26%;
  --foreground: 243 10% 0.52%;
  --muted: 243 10% 91.3%;
  --muted-foreground: 243 5% 41.3%;
  --primary: 243 100% 13%;
  --primary-foreground: 243 2% 98%;
  /* ... */
}
```

## Google Analytics (GA)

Postavite `GA_tag` u `config.yaml` da omoguite GA. Aplikacija automatski ubacuje GA skriptu i inicijalizuje `gtag(...)`, takoe prati pregleda stranica prilikom promena hash-rute. Uklonite ili obriite `GA_tag` da onemoguite analitiku za domenu.

---

### Saetak

* Aplikacija bira **proizvodne** ili **test** osnovne resurse, zatim uitava `<base>/<domain>/config.yaml` sa sigurnim povratkom na `/domain_default/config.yaml`.
* **Svi** resursi domene (logotipi, lokalizacije, tabovi, `domain.css`) se nalaze u istom folderu za atomsku auriranja.
* Administratori mogu pregledati promene u **testu** pre objavljivanja u **proizvodnju**.
* `config.yaml` kontrolie brendiranje (logotipe, favicon), lokalizaciju, GA, i gde da pronae UI module poput **tabova**.
</file>

<file path="public/dev_docs/sr/core-concepts/index.md">
<!-- public/dev_docs/sr/core-concepts/index.md -->
# Osnovni koncepti

Ovaj deo pokriva osnovnu arhitekturu SAVVA SolidJS aplikacije: kako se povezuje sa backend-om, kako funkcioniu domeni i resursi, kako UI zavisi od konfiguracije po domenima, i jo mnogo toga.

ta emo obraditi:

- Kako se aplikacija pokree i pronalazi odgovarajui backend i domen
- Kako `/info` upravlja ponaanjem u vreme izvoenja (domeni, ID lanca, IPFS prolazi, resursi)
- Kako se reavaju resursi domena i kada se koristi podrazumevani paket
</file>

<file path="public/dev_docs/sr/.i18n-docs-state.json">
{
  "core-concepts/app-init.md": "e0a8526b3460031a2a9794a549b31b18581154e1aa833da535dbca06d58d1f20",
  "core-concepts/domain.md": "62cf574a6555e6db6a9dcf96f1b4456a49ab2d5ad1e40ac86c756c4dbc171644",
  "core-concepts/index.md": "1988a34dc654ca313da81f25d97c40b6d0fc97f4b3e190119af3de83560009a9",
  "getting-started.md": "3249a86adcee7286e9994ec908c92fd979a679dd980c6c47ac89bc08f4a1e86d",
  "index.md": "112d9fcd7baa0934935c9dc58310ba7486b6dc998bf5e1940ca0e75ff1af70d7",
  "sidebar.yaml": "255c4c9c540e752ec367af3e5b5abaa265bac44066c6409a233f42ae30cb5348"
}
</file>

<file path="public/dev_docs/sr/getting-started.md">
# Uvod

Dobrodoli u **Uvod** vodi za SAVVA Platformu.

Ova stranica vas vodi kroz osnovne korake za postavljanje projekta lokalno i zapoinjanje doprinosa.

## Preduslovi

Pre nego to ponete, uverite se da imate instalirane sledee alate:

- **Node.js** (preporuena verzija 18 ili novija)  
- **npm** ili **yarn** menader paketa  
- **Git** za kloniranje repozitorijuma  
- Moderni **pregleda** (Chrome, Firefox, Edge) za razvoj i testiranje  

## Kloniranje Repozitorijuma

Izvorni kod je hostovan na GitHub-u. Da biste dobili najnoviju verziju:

```bash
git clone https://github.com/AlexNa-Holdings/savva-ui-solidjs
cd savva-ui-solidjs
````

## Instaliranje Zavisnosti

Unutar foldera projekta, instalirajte sve potrebne zavisnosti:

```bash
npm install
# ili
yarn install
```

## Pokretanje Razvojnog Servera

Pokrenite dev server sa automatskim ponovnim uitavanjem:

```bash
npm run dev
# ili
yarn dev
```

Aplikacija e biti dostupna na [http://localhost:5173](http://localhost:5173).

## Izrada za Proizvodnju

Da biste kreirali optimizovanu verziju:

```bash
npm run build
```

Izlaz e biti u `dist/` folderu.

## Sledei Koraci

* Istraite **Dokumentaciju za Razvijae** za arhitekturu i module.
* Pokuajte da menjate domene i resurse u **Desnom Panelu**.
* Doprinosite otvaranjem problema ili pull zahteva na GitHub-u.

To je to!  Spremni ste da ponete sa radom na **SAVVA Platformi**.

```html
<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SAVVA  SolidJS</title>

  <!-- Preload theme to avoid flash -->
  <script>
    (function () {
      try {
        const saved = localStorage.getItem("theme");
        const systemDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
        const theme = saved || (systemDark ? "dark" : "light");
        document.documentElement.classList.toggle("dark", theme === "dark");
      } catch { }
    })();
  </script>

  <script>
    (function () {
      // If there is a real path (e.g., /settings) but no hash, rewrite to hash form: /#/settings
      if (!location.hash && location.pathname !== "/") {
        var newHash = "#" + location.pathname + location.search + location.hash;
        history.replaceState(null, "", "/" + newHash);
      }
    })();
  </script>


  <!-- Load app after theme class is set -->
  <script type="module" src="/src/index.jsx"></script>
</head>

<body>
  <div id="root"></div>
</body>

</html>
```
</file>

<file path="public/dev_docs/sr/index.md">
# SAVVA Developer Documentation

Dobrodoli u **SAVVA Platform** dokumentaciju za programere.


## ta je SAVVA?

SAVVA je **platforma otvorenog koda** za izgradnju drutvenih mrea nove generacije.  
Za razliku od tradicionalnih platformi, SAVVA kombinuje **blockchain** i **IPFS** kako bi stvorila decentralizovanu, pouzdanu i otpornu na cenzuru osnovu.

- **Objave zasnovane na blockchain-u**  
  Svaki deo sadraja je registrovan na lancu i potpisan kriptografskim kljuem autora. Ovo osigurava autentinost i omoguava poverenje da objava zaista dolazi od navedenog autora.

- **Decentralizovano skladitenje sa IPFS**  
  Sadraj se skladiti u InterPlanetary File System umesto u bazi podataka jedne kompanije. Ovo uklanja jedinstvene take kvara i ini sistem otpornijim.

Zajedno, blockchain i IPFS ine novu vrstu drutvene mree: onu bez centralizovane kontrole, bez jedne kompanije koja stoji iza nje, i bez take pritiska koja se moe iskoristiti.


## O Ovoj Dokumentaciji

Ovo je **dokumentacija za programere**, a ne pomo za krajnje korisnike.  
SAVVA je otvorenog koda, i aktivno podstiemo programere da fork-uju, proiruju i prilagoavaju kodnu bazu.  

Ovde ete pronai:

- **osnovne principe** iza arhitekture.  
- Kako su **interfejsi i API-ji** strukturirani.  
- Najbolje prakse za proirenje i integraciju platforme.

Ako ste programer koji istrauje SAVVA, ovo je mesto za poetak. 
</file>

<file path="public/dev_docs/sr/sidebar.yaml">
sections:
  - title: Uvod
    items:
      - label: Pregled
        file: index.md
      - label: Podeavanje
        file: getting-started.md
  - title: Osnovni koncepti
    items:
      - label: Pregled
        file: core-concepts/index.md
      - label: Inicijalizacija aplikacije i povezivanje sa backend-om
        file: core-concepts/app-init.md
      - label: Rad sa domenima
        file: core-concepts/domain.md
</file>

<file path="public/dev_docs/ua/core-concepts/app-init.md">
#      

##    SAVVA ( SAVVA)?
 SAVVA    ,  **/ ,    **,   ,    API   WebSocket.     **  SAVVA**    ""     SAVVA (, , ,   ),      .

##     
   -   :

1. **URL **   URL  SAVVA.
2. **' **    SAVVA ( )   .

      YAML    -:

### `/default_connect.yaml`
```yaml
# /default_connect.yaml
domain: savva.app
backendLink: https://ui.savva.app/api/
gear: true
# optional:
# default_ipfs_link: ipfs://bafy.../something.json
```

* `backendLink`   HTTP    SAVVA (  ).
* `domain`     ;      .
* `gear`       (').
* `default_ipfs_link`  '    ,     .

> **  **
>        HTTP  (, Nginx)   **,  ** -   .         :
>
> ```nginx
> # :   default_connect.yaml
> location = /default_connect.yaml {
>   default_type text/yaml;
>   alias /etc/savva/default_connect.yaml;
> }
> ```
>
>     ;   ,    `GET /default_connect.yaml`.

---

##  

1. ** `/default_connect.yaml`**
     YAML ,  `backendLink`   `domain`.   **  ** ( HTTP + URL WS),   . &#x20;

2. **  **

   * `httpBase`     `backendLink` (  ).
   * URL `ws`     ,   `.../ws` (   `ws:`  `wss:`)   `?domain=...`  .
       **  **  HTTP  WS.&#x20;

3. ** `/info`**
         `GET <httpBase>info`   JSON.    **/info     ** (, , IPFS, ).&#x20;

4. **      `/info`**
      (.  ):

   * **`domains`**    .     `domain`  YAML/;     `/info`,    .&#x20;
   * **`blockchain_id`**   ID  EVM.     /  .&#x20;
   * **`ipfs_gateways`**   IPFS ,      (     IPFS).&#x20;
   * **`assets_url`**  **`temp_assets_url`**  ** ** (  ).   **   ** 
     `(<assets base> + <domain> + "/")`  ****   `/domain_default/`,   `config.yaml` . &#x20;

5. **    **
     `(<active prefix>/config.yaml)`   ;           `/domain_default/config.yaml`.    (, ,  ) ,    .&#x20;

6. **  WebSocket**
    WS   `ws` URL   ;  / ,   ,   WS  .&#x20;

---

##  `/info` ()

```json
{
  "domains": [
    "savva.app",
    {"name": "art.savva"},
    "dev.savva"
  ],
  "blockchain_id": 369,
  "ipfs_gateways": [
    "https://cloudflare-ipfs.com/ipfs/",
    "https://ipfs.io/ipfs/"
  ],
  "assets_url": "https://cdn.savva.network/assets/",
  "temp_assets_url": "https://cdn.savva.network/assets-test/"
}
```

###    (    )

* **domains**    .  **  / **   `/info`,       ,  `/info` . &#x20;
* **blockchain\_id**   ID  EVM;     `/ `    ,     ** **. &#x20;
* **ipfs\_gateways**     ;    ' ** IPFS**  (   )  ****  .&#x20;
* **assets\_url / temp\_assets\_url**    ** ** (`prod`/`test`)    .    `/<base>/<domain>/`   `config.yaml`.      ,   ** ** `/domain_default/`.&#x20;

---

##      (  )

*     `/default_connect.yaml`,  `/info`: **`src/context/AppContext.jsx`**  **`src/hooks/useConnect.js`**. &#x20;
*      ( HTTP + URL WS): **`src/net/endpoints.js`**.&#x20;
*   , ID ,  IPFS,      : **`src/context/AppContext.jsx`**.  &#x20;
*  ,   `/info`   `domains`: **`src/components/SwitchConnectDialog.jsx`**.&#x20;

---

**:**      ** ** (`config.yaml`)     , ,        .
</file>

<file path="public/dev_docs/ua/core-concepts/domain.md">
#   

****      ,    .   DNS-  (, `savva.app`),    '.    ** **  ,   `config.yaml`       (, , ,  , ' `domain.css` ).

##   `config.yaml`?

     ** URL **  `/info`:
- **:** `assets_url`
- **:** `temp_assets_url`

      /   (    ).   **  **,   :

```

<assetsBase>/<domain>/

```

   :

```

<assetsBase>/<domain>/config.yaml

```

    ( , 404 ),  ****     :

```

/domain\_default/config.yaml

```

>     ;         .  
>  `domain.css`          ,      .

##    ( / )?

    URL  :

- **`assets_url`**        
- **`temp_assets_url`**       

 (   )       ****  URL    (, , GA, )    .    ,       ****.

##   

      :

```

<assetsBase>/<domain>/
config.yaml          #   (, , , )
domain.css           # '   (, )
i18n/*.yaml          #   ( )
images/*             #  
modules/tabs.yaml    #     
modules/*.yaml       #    (')
html/*.html          #  HTML  (')

````

##  `config.yaml`

   ,    ,   :

```yaml
logo:
  light: images/logo_light.png
  dark: images/logo_dark.png
  light_mobile: images/logo_light.png
  dark_mobile: images/logo_dark.png

favicon:
  apple-touch-icon: favicon/apple-touch-icon.png
  16: favicon/favicon-16x16.png
  32: favicon/favicon-32x32.png
  manifest: favicon/site.webmanifest
  mask-icon:
    href: favicon/safari-pinned-tab.svg
    color: '#5bbad5'
  base: favicon/favicon.ico
  meta:
    - name: msapplication-TileColor
      content: '#da532c'
    - name: theme-color
      content: '#ffffff'

GA_tag: G-XXXXXXXXXX   # ID Google Analytics (gtag)

modules:
  tabs: modules/tabs.yaml
  content_lists: modules/content_lists.yaml
  staker_levels: modules/staker_levels.yaml
  categories: modules/categories.yaml

default_locale: en
locales:
  - code: en
    name: English
    title: 'SAVVA.APP - Beyond Likes Social'
    dictionary: i18n/en.yaml
  - code: ru
    name: 
    title: 'SAVVA.APP -   '
    dictionary: i18n/ru.yaml
````

###    

* **`logo`**       (/ + /)      .
* **`favicon`**       -  ;   ,    `<link rel="icon">`.
* **`GA_tag`**   Google Analytics (gtag.js).  ,    GA    SPA `page_view`   .
* **`modules.tabs`**    YAML,       (. ).
* **`locales`**      (/'/ +   ).     /   .

##    

    YAML (   `modules.tabs` ). :

```yaml
# modules/tabs.yaml
tabs:
  - type: leaders
    title:
      en: Leaders
      ru: 
    right_panel:
      available: true
      blocks:
        - type: html
          en: /html/info_block_en.html
          ru: /html/info_block_ru.html
        - type: content_List
          list_name: main
          count: 7

  - type: new
    title:
      en: New
      ru: 
```

    ,    `type`   '   .     **   **,         `config.yaml`.

##    `domain.css`

 , `domain.css`           .    CSS ,    (,  , ,  ).  ****  ****   CSS,          .

 :

```css
:root {
  --gradient: linear-gradient(to top left, #000c40, #607d8b);
  --background: 243 100% 98.26%;
  --foreground: 243 10% 0.52%;
  --muted: 243 10% 91.3%;
  --muted-foreground: 243 5% 41.3%;
  --primary: 243 100% 13%;
  --primary-foreground: 243 2% 98%;
  /* ... */
}
```

## Google Analytics (GA)

 `GA_tag`  `config.yaml`,   GA.     GA   `gtag(...)`,        -.    `GA_tag`,     .

---

### 

*   ****  ****  ,    `<base>/<domain>/config.yaml`      `/domain_default/config.yaml`.
* ****   (, , , `domain.css`)       .
*       ****    ****.
* `config.yaml`   (, ), , GA     ,   ****.
</file>

<file path="public/dev_docs/ua/core-concepts/index.md">
<!-- public/dev_docs/ua/core-concepts/index.md -->
#  

      SAVVA SolidJS:     ,     ,         .

  :

-         
-  `/info`      (, ID ,  IPFS, )
-         
</file>

<file path="public/dev_docs/ua/.i18n-docs-state.json">
{
  "core-concepts/app-init.md": "e0a8526b3460031a2a9794a549b31b18581154e1aa833da535dbca06d58d1f20",
  "core-concepts/domain.md": "62cf574a6555e6db6a9dcf96f1b4456a49ab2d5ad1e40ac86c756c4dbc171644",
  "core-concepts/index.md": "1988a34dc654ca313da81f25d97c40b6d0fc97f4b3e190119af3de83560009a9",
  "getting-started.md": "3249a86adcee7286e9994ec908c92fd979a679dd980c6c47ac89bc08f4a1e86d",
  "index.md": "112d9fcd7baa0934935c9dc58310ba7486b6dc998bf5e1940ca0e75ff1af70d7",
  "sidebar.yaml": "255c4c9c540e752ec367af3e5b5abaa265bac44066c6409a233f42ae30cb5348"
}
</file>

<file path="public/dev_docs/ua/getting-started.md">
#  

    ** **   SAVVA.

              .

##  

  ,      :

- **Node.js** (  18  )  
-   **npm**  **yarn**  
- **Git**     
-  **** (Chrome, Firefox, Edge)      

##  

    GitHub.    :

```bash
git clone https://github.com/AlexNa-Holdings/savva-ui-solidjs
cd savva-ui-solidjs
````

##  

      :

```bash
npm install
# 
yarn install
```

##   

     :

```bash
npm run dev
# 
yarn dev
```

     [http://localhost:5173](http://localhost:5173).

##    

   :

```bash
npm run build
```

     `dist/`.

##  

*   **  **    .
*       ** **.
*   ,        GitHub.

  !       ** SAVVA**.

```html
<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SAVVA  SolidJS</title>

  <!-- Preload theme to avoid flash -->
  <script>
    (function () {
      try {
        const saved = localStorage.getItem("theme");
        const systemDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
        const theme = saved || (systemDark ? "dark" : "light");
        document.documentElement.classList.toggle("dark", theme === "dark");
      } catch { }
    })();
  </script>

  <script>
    (function () {
      // If there is a real path (e.g., /settings) but no hash, rewrite to hash form: /#/settings
      if (!location.hash && location.pathname !== "/") {
        var newHash = "#" + location.pathname + location.search + location.hash;
        history.replaceState(null, "", "/" + newHash);
      }
    })();
  </script>


  <!-- Load app after theme class is set -->
  <script type="module" src="/src/index.jsx"></script>
</head>

<body>
  <div id="root"></div>
</body>

</html>
```
</file>

<file path="public/dev_docs/ua/index.md">
#    SAVVA

      ** SAVVA**.


##   SAVVA?

SAVVA   **   **      .  
    , SAVVA  ****  **IPFS**,   ,      .

- **,   **  
            .      ,       .

- **   IPFS**  
       ,       .          .

   IPFS     :   ,         ,   .


##   

 **  **,      .  
SAVVA     ,      ,     .  

  :

- ** ** .  
-   **  API**.  
-       .

  ,   SAVVA,  ,    . 
</file>

<file path="public/dev_docs/ua/sidebar.yaml">
sections:
  - title:  
    items:
      - label: 
        file: index.md
      - label: 
        file: getting-started.md
  - title:  
    items:
      - label: 
        file: core-concepts/index.md
      - label:      
        file: core-concepts/app-init.md
      - label:   
        file: core-concepts/domain.md
</file>

<file path="public/domain_default/favicon/browserconfig.xml">
<?xml version="1.0" encoding="utf-8"?>
<browserconfig>
    <msapplication>
        <tile>
            <square150x150logo src="/mstile-150x150.png"/>
            <TileColor>#da532c</TileColor>
        </tile>
    </msapplication>
</browserconfig>
</file>

<file path="public/domain_default/favicon/safari-pinned-tab.svg">
<?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN"
 "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">
<svg version="1.0" xmlns="http://www.w3.org/2000/svg"
 width="700.000000pt" height="700.000000pt" viewBox="0 0 700.000000 700.000000"
 preserveAspectRatio="xMidYMid meet">
<metadata>
Created by potrace 1.14, written by Peter Selinger 2001-2017
</metadata>
<g transform="translate(0.000000,700.000000) scale(0.100000,-0.100000)"
fill="#000000" stroke="none">
<path d="M3249 6996 c-2 -2 -37 -7 -78 -10 -113 -10 -269 -33 -351 -52 -14 -3
-38 -7 -55 -10 -111 -19 -539 -150 -570 -174 -5 -4 -21 -11 -35 -15 -14 -4
-51 -20 -82 -36 -32 -15 -58 -25 -58 -22 0 3 -6 1 -12 -5 -7 -5 -66 -37 -131
-71 -65 -33 -131 -70 -147 -81 -15 -11 -31 -20 -34 -20 -10 0 -242 -156 -311
-209 -194 -148 -421 -364 -561 -532 -93 -112 -220 -286 -281 -385 -202 -327
-327 -612 -424 -969 -24 -89 -24 -88 9 -80 15 4 34 8 42 10 29 6 135 36 155
45 11 4 43 16 70 25 204 71 507 216 947 456 70 38 130 69 133 69 3 0 23 11 44
24 21 14 133 72 247 129 181 90 246 121 409 192 215 94 558 186 785 213 85 9
407 9 490 -1 53 -6 221 -39 317 -62 101 -24 343 -127 463 -197 169 -98 385
-302 493 -464 153 -230 225 -449 233 -709 l4 -130 -23 38 c-109 188 -158 265
-217 342 -63 84 -195 222 -265 277 -193 155 -441 266 -679 304 -21 3 -48 8
-60 11 -11 3 -104 7 -206 9 -214 3 -283 -4 -462 -51 -262 -68 -566 -230 -905
-483 -91 -68 -401 -307 -698 -540 -25 -19 -64 -48 -81 -60 -11 -7 -57 -40
-104 -73 -399 -285 -780 -458 -1218 -555 -22 -4 -23 -8 -18 -52 12 -91 17
-127 22 -157 3 -16 7 -39 8 -50 2 -11 6 -33 10 -50 3 -16 8 -39 10 -51 16 -83
63 -259 97 -364 298 -907 926 -1634 1774 -2057 99 -49 188 -90 215 -98 3 -1
19 -7 35 -14 95 -40 325 -117 405 -136 8 -2 56 -13 105 -25 282 -67 450 -85
790 -85 245 0 414 10 520 29 11 2 38 7 60 11 874 149 1654 616 2196 1315 182
235 359 543 471 820 68 168 167 485 155 497 -15 14 -328 -90 -512 -170 -156
-68 -496 -238 -665 -334 -55 -30 -133 -73 -285 -153 -182 -97 -438 -222 -565
-275 -123 -52 -389 -146 -450 -159 -14 -3 -52 -12 -85 -21 -74 -18 -220 -44
-300 -53 -126 -14 -537 -4 -565 13 -3 2 -26 6 -50 10 -25 3 -53 8 -62 11 -9 3
-25 6 -35 8 -126 25 -348 107 -476 177 -38 22 -71 39 -73 39 -6 0 -134 90
-184 129 -79 62 -234 225 -292 307 -161 229 -241 460 -255 727 -4 86 -3 127 5
127 5 0 15 -12 21 -27 21 -56 119 -215 192 -314 151 -203 324 -354 529 -461
47 -24 87 -44 90 -45 3 0 23 -8 45 -17 69 -29 208 -67 300 -81 117 -19 178
-23 310 -23 209 0 360 26 565 100 195 70 363 163 664 368 45 31 296 222 451
344 258 204 453 348 606 451 256 170 323 207 621 343 111 51 314 113 517 158
22 5 23 8 16 57 -4 29 -9 68 -11 87 -5 39 -5 41 -28 165 -92 493 -320 1013
-626 1423 -481 645 -1161 1103 -1935 1302 -82 21 -170 41 -195 45 -24 4 -47 8
-50 10 -3 1 -27 6 -54 9 -27 4 -52 9 -55 11 -3 1 -37 6 -76 10 -38 3 -83 8
-100 11 -34 6 -590 15 -596 10z m412 -2701 c239 -50 445 -207 562 -427 31 -59
62 -153 78 -236 15 -78 6 -255 -16 -337 -42 -157 -130 -299 -250 -404 -271
-237 -668 -267 -968 -74 -465 298 -508 951 -86 1306 102 86 237 150 366 173
15 3 29 7 31 8 9 10 227 3 283 -9z"/>
</g>
</svg>
</file>

<file path="public/domain_default/favicon/site.webmanifest">
{
    "name": "",
    "short_name": "",
    "icons": [
        {
            "src": "./android-chrome-192x192.png",
            "sizes": "192x192",
            "type": "image/png"
        },
        {
            "src": "./android-chrome-512x512.png",
            "sizes": "512x512",
            "type": "image/png"
        }
    ],
    "theme_color": "#ffffff",
    "background_color": "#ffffff",
    "display": "standalone"
}
</file>

<file path="public/domain_default/html/info_block_en.html">
<div style="text-align: center;">
    <h1>Welcome to SAVVA, your affinity network</h1>
    <p>No registration is neededhaving a PulseChain address is enough.</p>
    <p>Feel free to explore, read, and support the authors you like. If you'd like to post content, just stake 5000 SAVVA tokens.</p>
    <p>Remember, SAVVA is an open platform, which means you can create your own site like this one. It's completely free.</p>
    <p>Let us know if you're interested in running your own site!</p>
  </div>
</file>

<file path="public/domain_default/html/info_block_fr.html">
<div style="text-align: center;">
    <h1>Bienvenue sur la plateforme SAVVA, votre rseau par centres d'intrt</h1>
    <p>Aucune inscription n'est requise  il suffit d'avoir une adresse PulseChain.</p>
    <p>Sentez-vous libre : explorez, lisez et soutenez les auteurs qui vous plaisent. Si vous souhaitez publier du contenu, il suffit de staker 5000 tokens SAVVA.</p>
    <p>N'oubliez pas que la plateforme SAVVA est ouverte, et que vous pouvez crer votre propre site, comme celui-ci. C'est compltement gratuit.</p>
    <p>Faites-nous savoir si vous tes intress par le lancement de votre propre site !</p>
</div>
</file>

<file path="public/domain_default/html/info_block_ru.html">
<div style="text-align: center;">
    <h1>    SAVVA,    </h1>
    <p>       PulseChain.</p>
    <p>  : ,    ,   .    ,   5000  SAVVA.</p>
    <p>,   SAVVA ,       ,  .   .</p>
    <p>  ,       !</p>
  </div>
</file>

<file path="public/domain_default/html/info_block_ua.html">
<div style="text-align: center;">
    <h1>    SAVVA,    </h1>
    <p>       PulseChain.</p>
    <p> : ,    ,   .    ,   5000  SAVVA.</p>
    <p>,   SAVVA ,      ,  .   .</p>
    <p>  ,       !</p>
</div>
</file>

<file path="public/domain_default/html/info_block.html">
<div>
    Some text about the project.
</div>

<div class="icons-container">
    <a href="https://t.me/savvaapp">
        <svg width="44" height="44" viewBox="0 0 44 44" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
                d="M22 43C33.598 43 43 33.598 43 22C43 10.402 33.598 1 22 1C10.402 1 1 10.402 1 22C1 33.598 10.402 43 22 43Z"
                stroke="black" stroke-width="2"></path>
            <path fill-rule="evenodd" clip-rule="evenodd"
                d="M14.9581 19.2048C12.8968 20.1103 10.779 21.0408 8.84231 22.1141C7.83107 22.8591 9.17507 23.3861 10.436 23.8804C10.6365 23.959 10.8348 24.0368 11.0212 24.1144C11.1764 24.1625 11.3342 24.213 11.4941 24.2643C12.8965 24.7138 14.4601 25.2151 15.8216 24.461C18.0581 23.1683 20.1687 21.6738 22.2777 20.1804C22.9686 19.6911 23.6594 19.202 24.3544 18.7201C24.387 18.6991 24.4237 18.6752 24.4639 18.649C25.0559 18.2628 26.3874 17.3944 25.8949 18.5911C24.7303 19.8726 23.4827 21.0071 22.2285 22.1478C21.3831 22.9165 20.5347 23.6881 19.7065 24.5093C18.9852 25.0991 18.2361 26.285 19.0438 27.1108C20.9042 28.4212 22.7936 29.6999 24.682 30.9778C25.2965 31.3936 25.9109 31.8095 26.5241 32.2263C27.5634 33.0612 29.1877 32.3858 29.4162 31.0812C29.5177 30.481 29.6198 29.8809 29.7218 29.2808C30.2856 25.9641 30.8496 22.6461 31.3478 19.3186C31.4155 18.7966 31.4922 18.2747 31.5691 17.7525C31.7552 16.4869 31.9416 15.2197 31.9998 13.9473C31.8498 12.6774 30.3195 12.9567 29.468 13.2422C25.091 14.9181 20.7578 16.7181 16.4416 18.5499C15.9527 18.7678 15.4571 18.9856 14.9581 19.2048Z"
                fill="black"></path>
        </svg>
    </a>
</div>
</file>

<file path="public/domain_default/modules/categories.yaml">
required: false
locales:
  ru:
    - SAVVA 
    - SAVVA 
    -   
  en:
    - SAVVA Talk
    - SAVVA Documentation
    - Q&A
  fr:
    - Plateforme SAVVA
    - Documentation SAVVA
    - Questions et Rponses
  ua:
    -  SAVVA
    -  SAVVA
    -   
</file>

<file path="public/domain_default/modules/content_lists.yaml">
market_contract: ''
list:
  main:
    title:
      ru: ''
      en: 'Announcements'
      ua: ''
      fr: 'Annonces'
    on_market: true
  new:
    title:
      ru: ' '
      en: 'New announces'
      ua: 'i '
      fr: 'new annonces'
    on_market: true
</file>

<file path="public/domain_default/modules/staker_levels.yaml">
staker_levels:
  levels:
  - min: 0
    icon:
    name: 
      - locale: en
        text: "Guest"
      - locale: ru
        text: ""
      - locale: fr
        text: "Invit"
      - locale: ua
        text: ""
      - locale: de
        text: "Gast"
  - min: 5000
    icon: /images/icons8-clam-50.svg
    name: 
      - locale: en
        text: "Clam"
      - locale: ru
        text: ""
      - locale: fr
        text: "Palourde"
      - locale: ua
        text: ""
      - locale: de
        text: "Muschel"
  - min: 10000
    icon: /images/icons8-shrimp-50.svg
    name: 
      - locale: en
        text: "Shrimp"
      - locale: ru
        text: ""
      - locale: fr
        text: "Crevette"
      - locale: ua
        text: ""
      - locale: de
        text: "Garnele"
  - min: 20000
    icon: /images/icons8-seahorse-50.svg
    name: 
      - locale: en
        text: "Seahorse"
      - locale: ru
        text: " "
      - locale: fr
        text: "Hippocampe"
      - locale: ua
        text: " "
      - locale: de
        text: "Seepferdchen"
  - min: 50000
    icon: /images/icons8-top-view-fish-50.svg
    name: 
      - locale: en
        text: "Fish"
      - locale: ru
        text: ""
      - locale: fr
        text: "Poisson"
      - locale: ua
        text: ""
      - locale: de
        text: "Fisch"
  - min: 100000
    icon: /images/icons8-dolphin-50.svg
    name: 
      - locale: en
        text: "Dolphin"
      - locale: ru
        text: ""
      - locale: fr
        text: "Dauphin"
      - locale: ua
        text: ""
      - locale: de
        text: "Delfin"
  - min: 200000 
    icon: /images/icons8-shark-50.svg
    name: 
      - locale: en
        text: "Shark"
      - locale: ru
        text: ""
      - locale: fr
        text: "Requin"
      - locale: ua
        text: ""
      - locale: de
        text: "Hai"
  - min: 500000
    icon: /images/icons8-stingray.svg
    name: 
      - locale: en
        text: "Stingray"
      - locale: ru
        text: ""
      - locale: fr
        text: "Raie"
      - locale: ua
        text: ""
      - locale: de
        text: "Stachelrochen"
  - min: 1000000
    icon: /images/icons8-orca-50.svg
    name: 
      - locale: en
        text: "Orca"
      - locale: ru
        text: ""
      - locale: fr
        text: "Orque"
      - locale: ua
        text: ""
      - locale: de
        text: "Orca"
  - min: 10000000
    icon: /images/icons8-whale-50.svg
    name: 
      - locale: en
        text: "Whale"
      - locale: ru
        text: ""
      - locale: fr
        text: "Baleine"
      - locale: ua
        text: ""
      - locale: de
        text: "Wal"
</file>

<file path="scripts/i18n-docs.mjs">
// scripts/i18n-docs.mjs
//
// Localize developer documentation from English to the other locales.
//
// Behavior:
//  - English (source of truth): public/dev_docs/en
//  - Locales are discovered from src/i18n/*.js (excluding useI18n.js, just like scripts/i18n.mjs)
//  - For each non-EN locale:
//      * Ensure public/dev_docs/<lang> exists
//      * Delete files not present in EN
//      * Re-translate ONLY files whose EN source changed (tracked via per-locale .i18n-docs-state.json SHA256 map)
//      * Markdown translated with code/HTML preserved
//      * sidebar.yaml translated only for label/title fields
//
// Usage:
//   node scripts/i18n-docs.mjs
//
// Env:
//   OPENAI_API_KEY  (required)
//   OPENAI_MODEL    (optional, default: gpt-4o-mini)
//   DRY_RUN=1       (optional)

import fs from "node:fs";
import path from "node:path";
import crypto from "node:crypto";
import dotenv from "dotenv";
import yaml from "js-yaml";
import OpenAI from "openai";

dotenv.config();

const ROOT = process.cwd();

// --- match scripts/i18n.mjs constants exactly ---
const SRC_DIR = path.join(ROOT, "src");
const I18N_DIR = path.join(SRC_DIR, "i18n"); //  same as i18n.mjs 
function isLangFile(name) {
  // same filter as i18n.mjs
  return name.endsWith(".js") && !/useI18n\.js$/i.test(name); // 
}

const DEV_DOCS_DIR = path.join(ROOT, "public", "dev_docs");
const EN_DIR = path.join(DEV_DOCS_DIR, "en");
const STATE_FILE = ".i18n-docs-state.json";
const DRY_RUN = process.env.DRY_RUN === "1";

const OPENAI_KEY = process.env.OPENAI_API_KEY || "";
const OPENAI_MODEL = process.env.OPENAI_MODEL || "gpt-4o-mini";

if (!OPENAI_KEY) {
  console.error("[i18n-docs] Missing OPENAI_API_KEY");
  process.exit(1);
}

const openai = new OpenAI({ apiKey: OPENAI_KEY });

function sha256(buf) { return crypto.createHash("sha256").update(buf).digest("hex"); }

function walkFiles(dir) {
  const out = [];
  (function walk(d) {
    for (const ent of fs.readdirSync(d, { withFileTypes: true })) {
      if (ent.name === STATE_FILE) continue;
      const p = path.join(d, ent.name);
      if (ent.isDirectory()) walk(p);
      else out.push(p);
    }
  })(dir);
  return out;
}
function ensureDir(p) { fs.mkdirSync(p, { recursive: true }); }
function readFileSafe(p) { try { return fs.readFileSync(p); } catch { return null; } }
function writeFileSafe(p, content) {
  if (DRY_RUN) { console.log(`[DRY] write ${p}`); return; }
  ensureDir(path.dirname(p)); fs.writeFileSync(p, content);
}
function removeFileSafe(p) { if (DRY_RUN) console.log(`[DRY] remove ${p}`); else try { fs.unlinkSync(p); } catch {} }
function loadJson(p) { try { return JSON.parse(fs.readFileSync(p, "utf8")); } catch { return {}; } }
function saveJson(p, obj) { if (DRY_RUN) console.log(`[DRY] state -> ${p}`); else { ensureDir(path.dirname(p)); fs.writeFileSync(p, JSON.stringify(obj, null, 2) + "\n", "utf8"); } }

function englishMap() {
  const files = walkFiles(EN_DIR);
  const m = new Map();
  for (const abs of files) m.set(path.relative(EN_DIR, abs), abs);
  return m;
}

function listLocaleFiles(localeDir) {
  if (!fs.existsSync(localeDir)) return [];
  return walkFiles(localeDir).map(p => path.relative(localeDir, p));
}

function isMarkdown(rel) { return /\.md$/i.test(rel); }
function isYaml(rel) { return /\.ya?ml$/i.test(rel); }
function isSidebarYaml(rel) {
  return /(^|[\\/])sidebar\.ya?ml$/i.test(rel);
}

// --- DISCOVER LOCALES (exact approach as scripts/i18n.mjs) ---
function discoverLocalesFromI18n() {
  if (!fs.existsSync(I18N_DIR)) {
    console.error(`[i18n-docs] Not found: ${path.relative(ROOT, I18N_DIR)}`); // mirrors i18n.mjs sanity
    process.exit(1);
  }
  const langFiles = fs.readdirSync(I18N_DIR).filter(isLangFile); // same filter
  if (langFiles.length === 0) {
    console.error("[i18n-docs] No language files found in src/i18n");
    process.exit(1);
  }
  // Derive codes from filenames (e.g., "ru.js" -> "ru"), skip en.js
  const codes = langFiles
    .map(f => path.basename(f, ".js"))
    .filter(code => code !== "en");
  // Ensure doc folders exist
  for (const code of codes) {
    const dir = path.join(DEV_DOCS_DIR, code);
    if (!fs.existsSync(dir)) fs.mkdirSync(dir, { recursive: true });
  }
  return codes;
}

// scripts/i18n-docs.mjs  helpers to unwrap accidental code fences
function unwrapCodeFence(text) {
  if (!text) return text;
  const s = String(text).trim();

  // ```[lang]\n...content...\n```
  const fenceRe = /^```[a-z0-9_-]*\s*\n([\s\S]*?)\n```$/i;
  const m = s.match(fenceRe);
  if (m) return m[1].trim();

  // ```...``` (single-line fallback)
  const fenceSingle = /^```([\s\S]*?)```$/;
  const m2 = s.match(fenceSingle);
  if (m2) return m2[1].trim();

  return s;
}

// scripts/i18n-docs.mjs  replace translateMarkdownTo with this version
async function translateMarkdownTo(langCode, markdown) {
  const sys =
    "You are a professional technical translator. Translate user-visible prose while preserving Markdown structure, " +
    "code fences, inline code, raw HTML, YAML frontmatter, and URLs. Do NOT translate code. " +
    "Do NOT wrap the output in triple backticks or any code fences.";
  const user =
    `Target language: ${langCode}\n` +
    "Return ONLY the translated Markdown text (no surrounding code fences).\n\n" +
    // important: we no longer wrap the input inside ```...```
    "Input Markdown follows below:\n\n" +
    markdown;

  const res = await openai.chat.completions.create({
    model: OPENAI_MODEL,
    temperature: 0.2,
    messages: [
      { role: "system", content: sys },
      { role: "user", content: user },
    ],
  });

  const raw = (res.choices?.[0]?.message?.content || "").trim();
  return unwrapCodeFence(raw);
}


async function translateSidebarYamlTo(langCode, text) {
  let doc; try { doc = yaml.load(text) ?? {}; } catch { return text; }
  const strings = [];
  (function collect(o) {
    if (Array.isArray(o)) o.forEach(collect);
    else if (o && typeof o === "object") {
      for (const [k, v] of Object.entries(o)) {
        if ((k === "title" || k === "label") && typeof v === "string") strings.push(v);
        else collect(v);
      }
    }
  })(doc);
  if (!strings.length) return text;

  const res = await openai.chat.completions.create({
    model: OPENAI_MODEL, temperature: 0.2, response_format: { type: "json_object" },
    messages: [
      { role: "system", content: "Translate UI strings. Return JSON { list: [...] } in the same order." },
      { role: "user", content: JSON.stringify({ target_language: langCode, list: strings }) },
    ],
  });
  let translated = [];
  try { translated = JSON.parse(res.choices?.[0]?.message?.content || "{}").list || []; } catch {}
  if (translated.length !== strings.length) return text;

  let idx = 0;
  (function inject(o) {
    if (Array.isArray(o)) o.forEach(inject);
    else if (o && typeof o === "object") {
      for (const k of Object.keys(o)) {
        const v = o[k];
        if ((k === "title" || k === "label") && typeof v === "string") o[k] = translated[idx++];
        else inject(v);
      }
    }
  })(doc);

  // scripts/i18n-docs.mjs  at the end of translateSidebarYamlTo
const outYaml = yaml.dump(doc, { lineWidth: 1000, quotingType: '"' });
// guard: never fenced
return unwrapCodeFence(outYaml);
}

// --- MAIN ---
async function main() {
  const locales = discoverLocalesFromI18n();
  console.log(`[i18n-docs] Locales: ${locales.join(", ") || "(none)"}`);

  const enFiles = englishMap(); // Map<rel, abs>

  for (const lang of locales) {
    const targetDir = path.join(DEV_DOCS_DIR, lang);
    const statePath = path.join(targetDir, STATE_FILE);
    const state = loadJson(statePath); // { "<rel>": "<sha256(en)>" }

    // 1) Remove stray files
    for (const rel of listLocaleFiles(targetDir)) {
      if (!enFiles.has(rel)) {
        console.log(`[i18n-docs] ${lang} remove stray: ${rel}`);
        removeFileSafe(path.join(targetDir, rel));
        delete state[rel];
      }
    }

    // 2) Translate changed/missing
    let updated = 0;
    for (const [rel, enAbs] of enFiles.entries()) {
      const enBuf = readFileSafe(enAbs); if (!enBuf) continue;
      const enHash = sha256(enBuf);
      const outAbs = path.join(targetDir, rel);
      const prevHash = state[rel] || "";

      const needTranslate = (() => {
        if (!fs.existsSync(outAbs)) return true;
        if (prevHash && prevHash === enHash) return false; // unchanged since last time
        try {
          const enStat = fs.statSync(enAbs);
          const tStat = fs.statSync(outAbs);
          return enStat.mtimeMs > tStat.mtimeMs; // EN newer than target
        } catch { return true; }
      })();
      if (!needTranslate) continue;

      let outText;
      if (isMarkdown(rel)) {
        console.log(`[i18n-docs] ${lang}  ${rel} (md)`);
        outText = await translateMarkdownTo(lang, enBuf.toString("utf8"));
      } else if (isYaml(rel) && isSidebarYaml(rel)) {
        console.log(`[i18n-docs] ${lang}  ${rel} (sidebar.yaml)`);
        outText = await translateSidebarYamlTo(lang, enBuf.toString("utf8"));
      } else {
        console.log(`[i18n-docs] ${lang} copy (verbatim): ${rel}`);
        outText = enBuf.toString("utf8");
      }

      writeFileSafe(outAbs, outText);
      state[rel] = enHash;
      updated++;
    }

    saveJson(statePath, state);
    console.log(`[i18n-docs] ${lang} done: ${updated} updated`);
  }

  console.log("[i18n-docs] All locales complete.");
}

main().catch((err) => { console.error(err); process.exit(1); });
</file>

<file path="src/assets/solid.svg">
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 166 155.3"><path d="M163 35S110-4 69 5l-3 1c-6 2-11 5-14 9l-2 3-15 26 26 5c11 7 25 10 38 7l46 9 18-30z" fill="#76b3e1"/><linearGradient id="a" gradientUnits="userSpaceOnUse" x1="27.5" y1="3" x2="152" y2="63.5"><stop offset=".1" stop-color="#76b3e1"/><stop offset=".3" stop-color="#dcf2fd"/><stop offset="1" stop-color="#76b3e1"/></linearGradient><path d="M163 35S110-4 69 5l-3 1c-6 2-11 5-14 9l-2 3-15 26 26 5c11 7 25 10 38 7l46 9 18-30z" opacity=".3" fill="url(#a)"/><path d="M52 35l-4 1c-17 5-22 21-13 35 10 13 31 20 48 15l62-21S92 26 52 35z" fill="#518ac8"/><linearGradient id="b" gradientUnits="userSpaceOnUse" x1="95.8" y1="32.6" x2="74" y2="105.2"><stop offset="0" stop-color="#76b3e1"/><stop offset=".5" stop-color="#4377bb"/><stop offset="1" stop-color="#1f3b77"/></linearGradient><path d="M52 35l-4 1c-17 5-22 21-13 35 10 13 31 20 48 15l62-21S92 26 52 35z" opacity=".3" fill="url(#b)"/><linearGradient id="c" gradientUnits="userSpaceOnUse" x1="18.4" y1="64.2" x2="144.3" y2="149.8"><stop offset="0" stop-color="#315aa9"/><stop offset=".5" stop-color="#518ac8"/><stop offset="1" stop-color="#315aa9"/></linearGradient><path d="M134 80a45 45 0 00-48-15L24 85 4 120l112 19 20-36c4-7 3-15-2-23z" fill="url(#c)"/><linearGradient id="d" gradientUnits="userSpaceOnUse" x1="75.2" y1="74.5" x2="24.4" y2="260.8"><stop offset="0" stop-color="#4377bb"/><stop offset=".5" stop-color="#1a336b"/><stop offset="1" stop-color="#1a336b"/></linearGradient><path d="M114 115a45 45 0 00-48-15L4 120s53 40 94 30l3-1c17-5 23-21 13-34z" fill="url(#d)"/></svg>
</file>

<file path="src/components/docs/DocsIndex.jsx">
// src/components/docs/DocsIndex.jsx
import { createMemo, createResource, For, Show } from "solid-js";
import { useApp } from "../../context/AppContext.jsx";

async function fetchSidebar(lang) {
  // Expected: public/dev_docs/<lang>/sidebar.yaml
  const res = await fetch(`/dev_docs/${lang}/sidebar.yaml`, { cache: "no-store" });
  if (!res.ok) return { sections: [] };
  const text = await res.text();
  // very small YAML reader to avoid extra deps:
  // supports:
  // sections:
  //   - title: ...
  //     items: [{label,file}, ...]
  try {
    const y = (await import("js-yaml")).default.load(text) || {};
    if (Array.isArray(y.sections)) return { sections: y.sections };
    if (Array.isArray(y.items)) return { sections: [{ title: "Docs", items: y.items }] };
    if (Array.isArray(y)) return { sections: [{ title: "Docs", items: y }] };
  } catch {}
  return { sections: [] };
}

export default function DocsIndex(props) {
  const app = useApp();
  const lang = createMemo(() => (app.lang?.() || "en").toLowerCase());
  const [data] = createResource(lang, fetchSidebar);

  const item = (it) => {
    const label = it.label || it.title || it.file || "";
    const file  = it.file || it.path  || "";
    const active = () => props.active === file;
    return (
      <button
        class={`w-full text-left px-3 py-2 text-sm rounded ${
          active() ? "bg-[hsl(var(--accent))]" : "hover:bg-[hsl(var(--accent))]"
        }`}
        onClick={() => props.onPick?.(file)}
        title={label}
        type="button"
      >
        {label}
      </button>
    );
  };

  return (
    <div class="py-2">
      <Show when={!data.loading} fallback={
        <div class="px-3 py-2 text-sm text-[hsl(var(--muted-foreground))]">{app.t("common.loading")}</div>
      }>
        <For each={data()?.sections || []}>
          {(sec) => (
            <div class="mb-2">
              <div class="px-3 pb-1 pt-2 text-xs uppercase tracking-wide text-[hsl(var(--muted-foreground))]">
                {sec.title || app.t("docs.section")}
              </div>
              <For each={sec.items || []}>{item}</For>
            </div>
          )}
        </For>
        <Show when={!data() || (data()?.sections || []).length === 0}>
          <div class="px-3 py-2 text-sm text-[hsl(var(--muted-foreground))]">
            {app.t("docs.sidebar.empty")}
          </div>
        </Show>
      </Show>
    </div>
  );
}
</file>

<file path="src/components/layout/Container.jsx">
// src/components/layout/Container.jsx
export default function Container(props) {
  return <div class={`sv-container ${props.class || ""}`}>{props.children}</div>;
}
</file>

<file path="src/components/layout/RightRail.jsx">
// src/components/layout/RightRail.jsx
import { For, Switch, Match } from "solid-js";
import HtmlBlock from "../widgets/HtmlBlock.jsx";
import ContentListBlock from "../widgets/ContentListBlock.jsx";

export default function RightRail(props) {
  const blocks = () => props.config?.blocks || [];

  return (
    <For each={blocks()}>
      {(block, i) => (
        <div classList={{ "border-t border-[hsl(var(--border))]": i() > 0 }}>
          <Switch>
            <Match when={block.type === 'html'}>
              <HtmlBlock block={block} />
            </Match>
            <Match when={block.type === 'content_List'}>
              <ContentListBlock block={block} />
            </Match>
          </Switch>
        </div>
      )}
    </For>
  );
}
</file>

<file path="src/components/layout/TwoColumn.jsx">
// src/components/layout/TwoColumn.jsx
export default function TwoColumn(props) {
  // props.aside is the node for the right column
  return (
    <div class="sv-content-grid">
      <section class="sv-main">{props.children}</section>
      {props.aside && <aside class="sv-aside">{props.aside}</aside>}
    </div>
  );
}
</file>

<file path="src/components/main/ConnectionError.jsx">
// src/components/main/ConnectionError.jsx
import { Show } from "solid-js";
import { useApp } from "../../context/AppContext.jsx";

export default function ConnectionError(props) {
  const { t } = useApp();

  const handleRetry = () => {
    window.location.reload();
  };

  return (
    <div class="fixed inset-0 flex items-center justify-center bg-[hsl(var(--background))] text-[hsl(var(--foreground))] p-4">
      <div class="w-full max-w-md p-6 rounded-lg border border-[hsl(var(--border))] bg-[hsl(var(--card))] text-[hsl(var(--card-foreground))] text-center shadow-lg">
        <h2 class="text-xl font-semibold mb-3">{t("error.connection.title")}</h2>
        <p class="mb-4 text-[hsl(var(--muted-foreground))]">
          {t("error.connection.message")}
        </p>
        <Show when={props.error}>
          <pre class="mb-4 p-2 text-xs text-left bg-[hsl(var(--muted))] rounded overflow-x-auto">
            {props.error.message || props.error.toString()}
          </pre>
        </Show>
        <button
          class="px-4 py-2 rounded bg-[hsl(var(--primary))] text-[hsl(var(--primary-foreground))] hover:opacity-90"
          onClick={handleRetry}
        >
          {t("error.connection.retry")}
        </button>
      </div>
    </div>
  );
}
</file>

<file path="src/components/tabs/ActualTab.jsx">
// src/components/tabs/ActualTab.jsx
import TabPanelScaffold from "./TabPanelScaffold";

export default function ActualTab(props) {
  return (
    <TabPanelScaffold title={props.title}>
      {/* TODO: actual content */}
    </TabPanelScaffold>
  );
}
</file>

<file path="src/components/tabs/CommentsTab.jsx">
// src/components/tabs/CommentsTab.jsx
import TabPanelScaffold from "./TabPanelScaffold";

export default function CommentsTab(props) {
  return (
    <TabPanelScaffold title={props.title}>
      {/* TODO: comments stream */}
    </TabPanelScaffold>
  );
}
</file>

<file path="src/components/tabs/ForYouTab.jsx">
// src/components/tabs/ForYouTab.jsx
import TabPanelScaffold from "./TabPanelScaffold";

export default function ForYouTab(props) {
  return (
    <TabPanelScaffold title={props.title}>
      {/* TODO: personalized feed */}
    </TabPanelScaffold>
  );
}
</file>

<file path="src/components/tabs/LeadersTab.jsx">
// src/components/tabs/LeadersTab.jsx
import TabPanelScaffold from "./TabPanelScaffold";

export default function LeadersTab(props) {
  return (
    <TabPanelScaffold title={props.title}>
      {/* TODO: leaders feed */}
    </TabPanelScaffold>
  );
}
</file>

<file path="src/components/tabs/NILRightPanel.jsx">
// src/components/tabs/NILRightPanel.jsx
import { useApp } from "../../context/AppContext.jsx";

const HEADER_H = 48; // keep synced with header height

export default function NILRightPanel() {
  const { t } = useApp();

  return (
    <aside
      class="hidden lg:block"
      style={{ position: "sticky", top: `${HEADER_H}px` }}
    >
      <div
        class="rounded-lg border border-[hsl(var(--border))] bg-[hsl(var(--card))] text-[hsl(var(--card-foreground))]"
        style={{
          "max-height": `calc(100vh - ${HEADER_H}px)`,
          overflow: "hidden",
        }}
      >
        <div
          class="p-3 space-y-3 overflow-auto"
          style={{ "max-height": `calc(100vh - ${HEADER_H}px - 1px - 1px)` }}
        >
          <h4 class="font-semibold">Right Panel</h4>
          <p class="text-sm">
            {t("main.tabs.empty")}  this content is intentionally long to
            demonstrate internal scrolling:
          </p>

          {/* demo long content */}
          <ul class="list-disc ml-5 text-sm space-y-1">
            <li>Example item A</li>
            <li>Example item B</li>
            <li>Example item C</li>
          </ul>
          <div class="text-sm leading-snug space-y-2">
            <p>
              Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis
              congue, magna non gravida finibus, felis nisl finibus nunc,
              laoreet imperdiet arcu erat in felis.
            </p>
            <p>
              Sed vitae lectus nec nisl elementum bibendum. Phasellus vel orci
              vitae lectus dapibus rhoncus. Suspendisse vehicula arcu a sem
              pharetra, at pulvinar ex gravida.
            </p>
            <p>
              Maecenas at urna sed turpis pretium volutpat. Aliquam vulputate
              porttitor metus, ut interdum ante semper quis.
            </p>
            <p>
              Praesent fermentum, justo eu volutpat ultricies, eros ante
              facilisis risus, eget dictum quam nibh a neque. Integer
              ullamcorper, ipsum non consequat sollicitudin, arcu massa
              elementum est, vitae gravida nibh nibh vel eros.
            </p>
            <p>
              Ut at vestibulum nibh. Vivamus euismod, justo vitae dictum
              posuere, mi quam viverra quam, et dictum ex tellus non augue.
            </p>
            <p>
              Integer dignissim lacus sed nibh posuere, vitae luctus lectus
              rhoncus. Vestibulum ante ipsum primis in faucibus orci luctus et
              ultrices posuere cubilia curae; Quisque ut odio non velit maximus
              mollis.
            </p>
          </div>
        </div>
      </div>
    </aside>
  );
}
</file>

<file path="src/components/tabs/NILTab.jsx">
// src/components/tabs/NILTab.jsx
import ContentFeed from "../feed/ContentFeed.jsx";

const HEADER_H = 48; // header height for min page height

export default function NILTab(props) {
  // mock async page loader; replace with backend fetcher later
  async function fetchPage(page, pageSize) {
    await new Promise((r) => setTimeout(r, 250));
    if (page > 6) return [];
    return Array.from({ length: pageSize }, (_, i) => ({
      id: `nil_${page}_${i}`,
      text: `NIL content item ${page}-${i}: long text to demonstrate scrolling.`,
    }));
  }

  return (
    <section class="w-full" style={{ "min-height": `calc(100vh - ${HEADER_H}px)` }}>
      <ContentFeed
        mode={props.tab?._raw?.mode === "grid" ? "grid" : "list"}
        fetchPage={fetchPage}
      />
    </section>
  );
}
</file>

<file path="src/components/tabs/TabPanelScaffold.jsx">
// src/components/tabs/TabPanelScaffold.jsx
import { useApp } from "../../context/AppContext";

/**
 * Minimal shared scaffold for tab content: title + body container.
 */
export default function TabPanelScaffold(props) {
  const { t } = useApp();
  return (
    <section class="space-y-2">
      <h3 class="text-base font-semibold text-[hsl(var(--foreground))]">
        {props.title || t("main.tabs.untitled")}
      </h3>
      <div class="text-sm text-[hsl(var(--muted-foreground))]">
        {props.children ?? t("main.tabs.empty")}
      </div>
    </section>
  );
}
</file>

<file path="src/components/ui/icons/FishIcons.jsx">
// src/components/ui/icon/FishIcons.jsx
// Icons sized by parent via Tailwind classes. We enforce a safe default (w-4 h-4)
// and make sure `class` actually reaches the <svg>. All other props pass through.

function Svg(props) {
  // This robustly gets the class from props, falling back to a default.
  const cls = props.class || props.className || "w-4 h-4";

  // This removes class and children from `rest` so they aren't passed twice.
  const { class: _, className: __, children, viewBox, ...rest } = props;

  return (
    <svg
      viewBox={props.viewBox}
      fill="currentColor"
      xmlns="http://www.w3.org/2000/svg"
      preserveAspectRatio="xMidYMid meet"
      class={cls}
      role="img"
      focusable="false"
      {...rest}
    >
      {props.children}
    </svg>
  );
}

export function ClamIcon(props) {
  return (
    <Svg  {...props} viewBox="0 0 50 50" >
      <path d="M 28.34375 1.8125 C 28.023438 1.816406 27.703125 1.867188 27.40625 1.9375 C 26.8125 2.082031 26.273438 2.371094 25.8125 2.71875 C 25.460938 2.984375 25.199219 3.316406 24.9375 3.65625 C 23.851563 2.4375 22.117188 1.667969 20.125 2.0625 C 20.101563 2.066406 20.085938 2.058594 20.0625 2.0625 C 17.347656 2.441406 14.894531 3.179688 12.6875 4.125 C 10.332031 5.132813 9.207031 6.75 9 8.25 C 7.671875 8.105469 6.128906 8.539063 4.90625 9.9375 C 4.90625 9.949219 4.90625 9.957031 4.90625 9.96875 C 3.5625 11.613281 2.425781 13.480469 1.65625 15.5625 C 1.113281 17.027344 0.976563 18.4375 1.21875 19.65625 C 1.316406 20.140625 1.53125 20.585938 1.75 21 C 1.476563 21.148438 1.171875 21.253906 0.96875 21.5 C 0.296875 22.308594 0.0507813 23.402344 0 24.8125 C 0 24.832031 0 24.855469 0 24.875 C 0 28.109375 0.636719 30.453125 1.78125 32.21875 C 2.925781 33.984375 4.535156 35.082031 6.25 35.90625 C 9.269531 37.359375 12.621094 38.167969 15.40625 40.15625 C 15.140625 40.410156 14.878906 40.667969 14.65625 40.96875 C 14.09375 41.726563 13.617188 42.65625 13.28125 43.53125 C 13.121094 43.941406 13.003906 44.347656 13 44.8125 C 12.996094 45.277344 13.175781 45.855469 13.5625 46.21875 C 14.335938 46.945313 15.359375 47 16.875 47 C 18.855469 47 19.996094 47.007813 20.8125 46.90625 C 21.097656 46.871094 21.359375 46.746094 21.625 46.625 C 22.582031 47.472656 23.664063 48.15625 25.15625 48.15625 C 26.226563 48.15625 27.15625 47.820313 27.90625 47.28125 C 28.308594 46.992188 28.582031 46.578125 28.90625 46.21875 C 29.085938 46.335938 29.226563 46.515625 29.4375 46.59375 C 30.273438 46.898438 31.371094 47 33.125 47 C 34.640625 47 35.664063 46.945313 36.4375 46.21875 C 36.824219 45.855469 37.003906 45.277344 37 44.8125 C 36.996094 44.347656 36.878906 43.941406 36.71875 43.53125 C 36.355469 42.582031 35.746094 41.644531 35.0625 40.875 C 34.847656 40.632813 34.605469 40.449219 34.375 40.25 C 37.554688 38.003906 41.050781 37.246094 44.09375 35.75 C 45.75 34.9375 47.277344 33.832031 48.34375 32.09375 C 49.410156 30.355469 50 28.050781 50 24.875 C 50 24.277344 49.859375 23.296875 49.40625 22.28125 C 49.179688 21.773438 48.875 21.230469 48.34375 20.84375 C 48.59375 20.445313 48.796875 20.03125 48.90625 19.53125 C 49.148438 18.433594 48.953125 17.207031 48.375 15.5625 C 47.558594 13.25 46.398438 11.519531 45 9.75 C 45 9.738281 45 9.730469 45 9.71875 C 43.980469 8.4375 42.238281 7.972656 40.65625 8.34375 C 40.523438 6.65625 39.410156 4.980469 37.53125 4.15625 C 35.261719 3.160156 31.992188 2.589844 29.3125 1.9375 C 28.984375 1.859375 28.664063 1.808594 28.34375 1.8125 Z M 28.3125 3.8125 C 28.472656 3.808594 28.640625 3.832031 28.8125 3.875 C 31.582031 4.546875 34.898438 5.1875 36.75 6 C 38.65625 6.835938 39.171875 8.433594 38.5 9.59375 C 38.460938 9.652344 38.429688 9.714844 38.40625 9.78125 C 38.394531 9.820313 38.382813 9.863281 38.375 9.90625 L 30.09375 29.34375 C 29.894531 29.675781 29.90625 30.089844 30.117188 30.410156 C 30.332031 30.730469 30.710938 30.902344 31.09375 30.847656 C 31.472656 30.792969 31.792969 30.523438 31.90625 30.15625 L 40.15625 10.78125 C 41.121094 9.898438 42.746094 10.097656 43.4375 10.96875 C 44.785156 12.667969 45.78125 14.175781 46.5 16.21875 C 47.019531 17.691406 47.09375 18.535156 46.96875 19.09375 C 46.84375 19.652344 46.507813 20.09375 45.84375 20.78125 C 45.820313 20.800781 45.800781 20.820313 45.78125 20.84375 L 34.15625 32.40625 C 33.757813 32.804688 33.757813 33.445313 34.15625 33.84375 C 34.554688 34.242188 35.195313 34.242188 35.59375 33.84375 L 47 22.46875 C 47.039063 22.476563 47.101563 22.429688 47.15625 22.46875 C 47.261719 22.546875 47.453125 22.777344 47.59375 23.09375 C 47.875 23.722656 48 24.726563 48 24.875 C 48 27.808594 47.480469 29.691406 46.65625 31.03125 C 45.832031 32.371094 44.683594 33.21875 43.21875 33.9375 C 40.289063 35.378906 36.105469 36.171875 32.28125 39.28125 C 32.199219 39.347656 32.171875 39.433594 32.09375 39.5 C 32.074219 39.515625 32.050781 39.515625 32.03125 39.53125 C 31.949219 39.59375 31.875 39.667969 31.8125 39.75 C 31.765625 39.796875 31.722656 39.851563 31.6875 39.90625 C 30.164063 41.335938 29.117188 42.859375 28.25 44.03125 C 28.234375 44.050781 28.203125 44.074219 28.1875 44.09375 C 28.164063 44.125 28.144531 44.15625 28.125 44.1875 C 27.652344 44.8125 27.191406 45.339844 26.75 45.65625 C 26.28125 45.992188 25.832031 46.15625 25.15625 46.15625 C 23.746094 46.15625 23.054688 45.546875 22.03125 44.3125 C 21.007813 43.078125 19.847656 41.289063 17.875 39.5 C 14.417969 36.367188 10.1875 35.601563 7.125 34.125 C 5.59375 33.386719 4.359375 32.496094 3.46875 31.125 C 2.582031 29.757813 2.003906 27.855469 2 24.90625 C 2 24.894531 2 24.886719 2 24.875 C 2.046875 23.71875 2.292969 23.027344 2.5 22.78125 C 2.660156 22.589844 2.914063 22.609375 3.21875 22.625 L 15 33.3125 C 15.253906 33.59375 15.648438 33.710938 16.015625 33.605469 C 16.378906 33.503906 16.65625 33.203125 16.726563 32.828125 C 16.796875 32.453125 16.648438 32.070313 16.34375 31.84375 L 4.40625 20.96875 C 4.367188 20.921875 4.328125 20.882813 4.28125 20.84375 C 4.269531 20.832031 4.261719 20.824219 4.25 20.8125 C 4.230469 20.800781 4.207031 20.789063 4.1875 20.78125 C 4.15625 20.757813 4.125 20.738281 4.09375 20.71875 C 4.082031 20.707031 4.074219 20.699219 4.0625 20.6875 C 3.71875 20.515625 3.34375 20.070313 3.1875 19.28125 C 3.03125 18.492188 3.101563 17.410156 3.53125 16.25 C 4.214844 14.402344 5.214844 12.746094 6.4375 11.25 C 7.585938 9.933594 8.703125 10.070313 9.34375 10.40625 L 18.34375 29.90625 C 18.457031 30.273438 18.777344 30.542969 19.15625 30.597656 C 19.539063 30.652344 19.917969 30.480469 20.132813 30.160156 C 20.34375 29.839844 20.355469 29.425781 20.15625 29.09375 L 11.03125 9.25 L 11 9.15625 C 10.777344 8.542969 10.871094 7.082031 13.46875 5.96875 C 15.539063 5.082031 17.851563 4.382813 20.40625 4.03125 C 20.425781 4.03125 20.449219 4.03125 20.46875 4.03125 C 22.347656 3.636719 23.722656 4.835938 24 5.875 L 24 28.625 C 23.996094 28.984375 24.183594 29.320313 24.496094 29.503906 C 24.808594 29.683594 25.191406 29.683594 25.503906 29.503906 C 25.816406 29.320313 26.003906 28.984375 26 28.625 L 26 5.8125 C 26.128906 5.277344 26.492188 4.695313 27 4.3125 C 27.398438 4.011719 27.832031 3.820313 28.3125 3.8125 Z" />
    </Svg>
  );
}

export function ShrimpIcon(props) {
  return (
    <Svg  {...props} viewBox="0 0 64 64" >
      <path d="M 15.771484 4.0019531 A 14 14 0 0 0 16 32 C 16.359 32 16.677469 31.982031 16.980469 31.957031 L 21.449219 36.082031 A 10.971 10.971 0 0 0 28.910156 39 L 43.683594 39 A 4.281 4.281 0 0 1 45.435547 39.380859 A 4.191 4.191 0 0 1 46.517578 40.087891 C 46.541578 40.108891 46.568797 40.126438 46.591797 40.148438 A 4.389 4.389 0 0 1 47.052734 40.648438 A 4.452 4.452 0 0 1 47.441406 41.240234 A 4.545 4.545 0 0 1 47.804688 42.101562 C 47.824688 42.167563 47.850187 42.232734 47.867188 42.302734 C 47.893188 42.402734 47.909734 42.501563 47.927734 42.601562 A 3.53 3.53 0 0 1 47.955078 43.867188 A 4.19 4.19 0 0 1 47.837891 44.435547 C 47.837891 44.453547 47.829219 44.472234 47.824219 44.490234 A 4.147 4.147 0 0 1 47.640625 44.996094 C 47.628625 45.025094 47.618469 45.055984 47.605469 45.083984 A 4.311 4.311 0 0 1 47.351562 45.556641 C 47.336562 45.581641 47.322641 45.607813 47.306641 45.632812 A 4.364 4.364 0 0 1 46.972656 46.082031 C 46.958656 46.099031 46.944688 46.119719 46.929688 46.136719 C 46.829687 46.247719 46.728906 46.348266 46.628906 46.447266 C 46.583906 46.490266 46.539187 46.531266 46.492188 46.572266 C 46.404187 46.649266 46.312703 46.722016 46.220703 46.791016 C 46.128703 46.860016 46.043172 46.913703 45.951172 46.970703 C 45.882172 47.013703 45.814188 47.060609 45.742188 47.099609 A 4.21 4.21 0 0 1 45.199219 47.353516 L 41.748047 48.646484 A 3.993 3.993 0 0 0 38 46 L 30 46 A 1 1 0 0 0 29.419922 47.8125 L 33.164062 50.488281 A 13.468 13.468 0 0 0 35.900391 52 A 13.565 13.565 0 0 0 33.167969 53.511719 L 29.421875 56.1875 A 1 1 0 0 0 30 58 L 38 58 A 3.987 3.987 0 0 0 41.443359 56 L 46.5 56 C 46.914 56 47.320563 55.971453 47.726562 55.939453 L 47.742188 55.939453 C 48.036187 55.915453 48.328188 55.880844 48.617188 55.839844 C 48.744188 55.822844 48.868141 55.80225 48.994141 55.78125 A 15.369 15.369 0 0 0 51.658203 55.099609 C 51.778203 55.056609 51.898578 55.01375 52.017578 54.96875 C 52.283578 54.86875 52.547641 54.767484 52.806641 54.646484 C 52.879641 54.613484 52.950437 54.576969 53.023438 54.542969 A 15.407 15.407 0 0 0 54.398438 53.814453 C 54.543438 53.728453 54.686125 53.642734 54.828125 53.552734 C 55.037125 53.418734 55.243312 53.280719 55.445312 53.136719 C 55.487313 53.107719 55.531266 53.080781 55.572266 53.050781 C 55.645266 52.997781 55.713156 52.936812 55.785156 52.882812 C 56.054156 52.682812 56.321172 52.474859 56.576172 52.255859 C 56.668172 52.176859 56.75375 52.092719 56.84375 52.011719 C 57.10575 51.776719 57.364375 51.538156 57.609375 51.285156 C 57.651375 51.242156 57.689469 51.196344 57.730469 51.152344 A 15.488 15.488 0 0 0 61.125 45.587891 L 61.146484 45.53125 C 61.283484 45.13125 61.400859 44.731453 61.505859 44.314453 C 61.511859 44.290453 61.521344 44.266188 61.527344 44.242188 C 61.533344 44.218187 61.536969 44.193922 61.542969 44.169922 C 61.626969 43.827922 61.699766 43.484766 61.759766 43.134766 C 61.808766 42.856766 61.853719 42.578734 61.886719 42.302734 C 61.906719 42.136734 61.919594 41.970734 61.933594 41.802734 C 61.972594 41.365734 62 40.931906 62 40.503906 C 62 40.041906 61.970688 39.580094 61.929688 39.121094 C 61.916687 38.973094 61.899766 38.8315 61.884766 38.6875 C 61.844766 38.354167 61.793755 38.023932 61.732422 37.697266 C 61.696422 37.503266 61.659187 37.310141 61.617188 37.119141 C 61.543854 36.795807 61.461141 36.475536 61.369141 36.158203 C 61.303141 35.933203 61.229297 35.714141 61.154297 35.494141 C 61.093297 35.317141 61.028938 35.141797 60.960938 34.966797 A 15.314 15.314 0 0 0 59.8125 32.599609 C 59.7645 32.518609 59.723828 32.434516 59.673828 32.353516 C 59.651828 32.319516 59.626469 32.289906 59.605469 32.253906 C 59.393469 31.917906 59.167641 31.592391 58.931641 31.275391 C 58.854641 31.175391 58.780172 31.06975 58.701172 30.96875 C 58.489172 30.69875 58.267062 30.436641 58.039062 30.181641 C 57.918062 30.045641 57.796875 29.90825 57.671875 29.78125 C 57.471875 29.57325 57.265688 29.375641 57.054688 29.181641 C 56.889688 29.026641 56.724687 28.871609 56.554688 28.724609 C 56.354687 28.556609 56.154266 28.397281 55.947266 28.238281 C 55.757266 28.092281 55.569047 27.947547 55.373047 27.810547 C 55.148047 27.652547 54.916594 27.509328 54.683594 27.361328 C 54.502594 27.248328 54.324672 27.134297 54.138672 27.029297 C 53.853672 26.867297 53.560625 26.720172 53.265625 26.576172 C 53.127625 26.509172 52.991563 26.439953 52.851562 26.376953 C 52.486562 26.212953 52.111422 26.066687 51.732422 25.929688 C 51.654422 25.901688 51.579 25.871703 51.5 25.845703 C 51.068 25.697703 50.625734 25.570938 50.177734 25.460938 C 50.150734 25.454937 50.125609 25.445453 50.099609 25.439453 L 50.066406 25.433594 A 15.275 15.275 0 0 0 48.332031 25.121094 L 48.271484 25.111328 A 15.4 15.4 0 0 0 46.5 25 L 12.175781 25 A 7.99 7.99 0 1 1 24 18 A 7.926 7.926 0 0 1 23.111328 21.671875 A 1.0002716 1.0002716 0 1 0 24.888672 22.587891 A 10 10 0 1 0 6 18 A 10.017 10.017 0 0 0 11.527344 26.925781 L 14.792969 29.939453 A 12 12 0 1 1 28 18 A 11.877 11.877 0 0 1 27.419922 21.689453 A 1 1 0 0 0 29.318359 22.310547 A 14 14 0 0 0 15.771484 4.0019531 z" />
    </Svg>
  );
}

export function SeahorseIcon(props) {
  return (
    <Svg  {...props} viewBox="0 0 100 100" >
      <path d="M 50.898438 2.0097656 C 50.776313 1.99325 50.650891 1.9995 50.525391 2.03125 C 37.155391 5.37025 36.115234 17.542359 36.115234 21.193359 C 36.115234 25.487359 38.245047 29.32975 40.123047 32.71875 C 41.877047 35.88175 43.392219 38.614719 42.324219 40.386719 C 42.021219 40.890719 41.832469 40.928625 41.730469 40.890625 C 40.005469 40.888625 36.624688 35.236266 35.179688 32.822266 L 34.773438 32.146484 C 34.295437 31.355484 33.426859 30.876453 32.505859 30.939453 C 31.572859 30.987453 30.744703 31.545531 30.345703 32.394531 C 29.002703 35.248531 27.015625 41.853797 27.015625 46.966797 C 27.015625 52.288797 29.865063 59.159953 31.789062 62.126953 C 32.275063 62.877953 33.082234 63.317438 33.990234 63.273438 C 34.882234 63.240437 35.671562 62.752797 36.101562 61.966797 L 36.753906 60.765625 C 40.439906 53.948625 42.823688 50.498047 43.804688 50.498047 C 43.806688 50.498047 43.788719 50.449031 43.886719 50.582031 C 45.764719 53.184031 44.375188 57.522625 42.617188 63.015625 C 40.990187 68.100625 39.146484 73.863312 39.146484 80.320312 C 39.146484 88.834312 44.207453 97.998047 55.314453 97.998047 C 59.036453 97.998047 62.414172 96.579 64.826172 94 C 67.172172 91.494 68.384344 88.062031 68.152344 84.582031 C 67.806344 79.391031 63.476953 74.327875 58.501953 73.296875 C 57.488953 73.088875 56.504594 73.057219 55.558594 73.199219 C 55.736594 73.013219 55.915656 72.829625 56.097656 72.640625 C 61.950656 66.564625 69.964844 58.243609 69.964844 47.724609 C 69.964844 40.941609 63.872828 36.397891 57.423828 31.587891 C 56.504828 30.901891 55.571672 30.207187 54.638672 29.492188 C 56.622672 30.087187 58.747922 30.335547 60.669922 30.560547 C 62.488922 30.773547 64.208844 30.974063 65.464844 31.414062 C 67.918844 32.274062 69.599172 31.627547 70.576172 30.935547 C 72.072172 29.878547 73 27.888188 73 25.742188 C 73 22.969188 70.480766 21.602484 68.259766 20.396484 C 66.240766 19.300484 64.335141 18.265297 63.869141 16.404297 C 63.495141 14.906297 62.713375 13.590359 61.734375 12.443359 C 61.935375 10.149359 64.087687 9.088875 64.179688 9.046875 C 64.682688 8.817875 64.902828 8.2246562 64.673828 7.7226562 C 64.444828 7.2196562 63.852609 6.9985625 63.349609 7.2265625 C 63.229609 7.2815625 60.938828 8.3603437 60.048828 10.777344 C 57.418828 8.5453438 54.272125 7.2224375 53.078125 6.7734375 L 51.714844 2.6855469 C 51.590344 2.3135469 51.264812 2.0593125 50.898438 2.0097656 z" />
    </Svg>
  );
}

export function FishIcon(props) {
  return (
    <Svg  {...props} viewBox="0 0 50 50" >
      <path d="M 4.5039062 0.20898438 C 4.270002 0.23072292 4.0374397 0.27702534 3.8144531 0.34375 C 2.922507 0.61064864 2.0852782 1.1885241 1.40625 2.0078125 C 0.72729902 2.8270078 0.31552594 3.7577873 0.21875 4.6835938 C 0.12197406 5.6094001 0.37308219 6.6074318 1.1386719 7.2421875 C 1.43736 7.4893777 1.8198467 7.4359783 2.1757812 7.5234375 C 2.4225489 11.09635 4.525241 15.440882 7.8164062 18.134766 C 9.5864535 19.584191 11.359848 20.69642 13.121094 21.65625 C 13.103526 22.162235 13.10425 23.075854 13.398438 24.574219 C 13.80211 26.630219 14.74083 29.449618 16.845703 32.558594 A 1.0001 1.0001 0 0 0 18.65625 32.177734 C 19.134059 29.549783 19.60628 27.105743 20.519531 25.171875 C 21.616408 25.674639 22.699505 26.188944 23.755859 26.765625 C 28.735333 29.483999 33.350052 33.416251 37.494141 43.083984 C 37.524051 43.305713 37.548231 43.501404 37.625 43.818359 C 37.734856 44.271895 37.893465 44.837198 38.107422 45.445312 C 38.535335 46.661544 39.146562 48.049412 40.144531 49.058594 A 1.0001 1.0001 0 0 0 41.558594 49.066406 C 43.114842 47.52782 45.505072 45.357545 48.664062 46.039062 A 1.0001 1.0001 0 0 0 49.703125 44.5 C 48.611812 42.890775 46.55504 41.747146 44.716797 40.855469 C 43.797675 40.40963 42.934551 40.049973 42.275391 39.800781 C 42.023197 39.705441 41.832107 39.642515 41.644531 39.580078 C 39.202514 28.271869 34.796589 19.708091 29.560547 13.513672 C 30.850875 12.338725 32.379531 11.242945 34.085938 10.183594 A 1.0001 1.0001 0 0 0 33.746094 8.3515625 C 31.677205 7.9570182 29.804401 7.8578073 28.181641 7.9199219 C 26.707354 7.9763533 25.472282 8.1722455 24.451172 8.3925781 C 22.752925 6.9642462 21.012111 5.7401109 19.257812 4.7109375 C 15.38605 2.4404773 10.794582 1.0474109 6.9609375 1.7402344 C 6.8099329 1.4073736 6.8004425 1.0214779 6.5019531 0.7734375 A 1.0001 1.0001 0 0 0 6.5 0.7734375 C 6.1170809 0.45595918 5.6691208 0.28196704 5.2050781 0.22070312 C 4.9730568 0.19007117 4.7378105 0.18724583 4.5039062 0.20898438 z" />
    </Svg>
  );
}

export function DolphinIcon(props) {
  return (
    <Svg  {...props} viewBox="0 0 512 512" >
      <path d="M 156.81445 44.033203 C 82.753209 44.885544 54.486344 91.555047 46.675781 108.53711 A 16.152 16.152 0 0 1 39.265625 116.1543 C 22.925625 124.3873 13.571844 132.68527 11.464844 140.82227 A 13.693 13.693 0 0 0 13.5 152.24219 C 20.068 161.89719 35.662828 163.52756 61.173828 157.22656 C 62.061161 157.00656 62.94174 156.78273 63.816406 156.55273 C 69.267406 160.41573 84.459859 168.07597 121.13086 170.54297 A 91.95 91.95 0 0 0 117.14844 196.00586 C 116.97544 212.78986 121.95669 236.62438 146.67969 254.85938 A 12.446 12.446 0 0 0 166.48047 245.61328 C 166.68947 240.52428 164.78086 235.78628 164.38086 230.23828 C 161.86086 202.08828 177.04686 190.14683 182.50586 186.79883 A 373.73 373.73 0 0 1 234.52734 216.62305 C 248.50034 231.87205 269.25528 247.90812 299.98828 260.57812 A 7.488 7.488 0 0 0 309.76172 250.79297 C 309.21172 249.46497 308.61514 247.90636 307.99414 246.19336 C 358.88114 260.69336 383.56352 299.70325 395.35352 330.53125 C 400.53552 344.07725 396.28053 359.70211 384.76953 369.41211 C 380.31653 373.16711 375.72409 377.27414 371.12109 381.61914 C 354.61109 397.19614 359.30584 420.11991 362.08984 429.25391 A 6.471 6.471 0 0 0 374.28125 429.80078 C 381.55725 411.71378 397.34152 412.69172 406.10352 414.88672 C 415.76452 417.30472 422.32486 416.63508 426.75586 414.83008 C 427.90586 420.77908 430.36277 427.49602 435.50977 432.04102 C 439.80977 435.84102 445.20955 437.47311 451.56055 436.91211 C 473.09955 435.00011 482.89933 455.05934 486.11133 463.77734 C 488.04233 469.59234 497.01178 469.17638 498.42578 463.23438 C 510.13778 420.57538 479.53114 394.53364 460.24414 382.80664 A 33.133 33.133 0 0 1 444.41992 358.05859 C 433.33392 259.96859 410.36191 191.72306 372.12891 143.28906 A 223.674 223.674 0 0 0 323.37109 97.511719 C 325.25509 80.526719 335.90755 74.529078 342.31055 72.455078 A 6.531 6.531 0 0 0 342.86914 60.25 C 306.56114 44.469 270.35333 60.963031 261.23633 65.707031 A 430.966 430.966 0 0 0 215.71484 51.691406 C 193.43497 46.080281 173.90551 43.836509 156.81445 44.033203 z" />
    </Svg>
  );
}

export function SharkIcon(props) {
  return (
    <Svg  {...props} viewBox="0 0 64 64" >
      <path d="M 1.5253906 9 A 1.0001 1.0001 0 0 0 0.609375 9.7753906 C -0.74611553 15.632047 0.63420421 20.604254 2.53125 25.009766 C 2.4325452 25.011589 2.0586928 25 2 25 A 1.0001 1.0001 0 0 0 1.0117188 26.152344 C 2.8993434 38.421904 12.827344 45.149616 14.755859 46.363281 L 12.080078 52.605469 A 1.0001 1.0001 0 0 0 12.990234 54 C 16.769393 54.03749 20.02326 52.520915 22.660156 49.785156 C 23.228073 51.114373 25.312061 55.970583 27.072266 60.371094 A 1.0001 1.0001 0 0 0 28.513672 60.857422 C 31.257469 59.211144 33.12469 56.526277 34.068359 53.830078 C 34.545777 52.466027 34.802775 51.087731 34.779297 49.806641 C 38.002478 49.181617 42.906276 47.513443 47.435547 44.453125 C 51.961389 41.395124 55.916969 36.918323 56.779297 31.011719 C 58.321083 31.168728 59.8423 30.82914 61.039062 30.285156 C 62.522143 29.611029 63.599609 28.800781 63.599609 28.800781 A 1.0001 1.0001 0 0 0 63.416016 27.091797 C 59.382578 25.242803 57.787642 22.75908 57.109375 20.085938 C 56.431108 17.412795 56.774948 14.514855 56.996094 12.089844 A 1.0001 1.0001 0 0 0 55.400391 11.199219 C 51.083708 14.43673 48.694338 21.437051 50.958984 27.835938 C 49.792363 30.539973 47.328731 32.620257 44.59375 33.519531 C 41.9334 34.394266 39.150455 34.127063 37.03125 32.488281 C 37.0635 29.804082 37.313275 27.587952 38.154297 25.800781 C 39.052974 23.891092 40.586399 22.324965 43.447266 20.894531 A 1.0001 1.0001 0 0 0 43.447266 19.105469 C 41.208752 17.986212 38.542199 17.738801 36.138672 18.005859 C 33.735145 18.272918 31.587597 18.998341 30.292969 20.292969 A 1.0001 1.0001 0 1 0 31.707031 21.707031 C 32.412403 21.001659 34.264855 20.227082 36.361328 19.994141 C 37.808594 19.833333 39.305608 20.008491 40.712891 20.357422 C 38.73207 21.687542 37.185086 23.16553 36.345703 24.949219 C 35.24438 27.28953 35 29.944444 35 33 A 1.0001 1.0001 0 0 0 35.337891 33.75 C 38.101193 36.1851 41.881358 36.515318 45.21875 35.417969 C 48.556142 34.320619 51.552233 31.809846 52.927734 28.371094 A 1.0001 1.0001 0 0 0 52.929688 27.630859 C 51.116127 23.066571 52.372628 18.01894 54.791016 14.806641 C 54.676652 16.620508 54.65694 18.556394 55.169922 20.578125 C 55.863738 23.312551 57.657274 25.979529 61.025391 27.994141 C 60.679302 28.198329 60.682193 28.250636 60.210938 28.464844 C 58.944018 29.040716 57.40531 29.413749 56.316406 29.050781 A 1.0001 1.0001 0 0 0 55.003906 29.916016 C 54.537124 35.517397 50.792075 39.771455 46.314453 42.796875 C 42.082932 45.656011 37.349807 47.2585 34.453125 47.832031 C 34.299345 47.341082 34.112481 46.865988 33.832031 46.445312 C 33.182689 45.4713 32.112689 44.980236 31.210938 45.220703 C 30.309186 45.46117 29.735142 46.184433 29.529297 47.007812 C 29.323452 47.831193 29.599307 48.899831 30.455078 49.503906 C 31.023654 49.905254 31.815991 50.035086 32.720703 50.044922 C 32.718503 50.995854 32.566975 52.068968 32.181641 53.169922 C 31.500664 55.115569 30.122439 56.948305 28.384766 58.324219 C 26.444103 53.558932 23.919922 47.605469 23.919922 47.605469 A 1.0001 1.0001 0 0 0 22.214844 47.380859 C 20.090749 50.073951 17.58772 51.489086 14.583984 51.845703 L 16.919922 46.394531 A 1.0001 1.0001 0 0 0 16.503906 45.136719 C 16.503906 45.136719 5.7425103 38.702065 3.2890625 27.021484 C 3.3178865 27.021137 3.3589159 27.023737 3.3886719 27.023438 C 4.3127762 28.943531 5.2665346 30.769398 6.1054688 32.447266 A 1.0001 1.0001 0 0 0 6.7578125 32.970703 C 10.948037 34.018259 15.528258 33.912893 22.349609 39.759766 A 1.0001 1.0001 0 0 0 23.978516 38.791016 C 22.401131 31.430057 17.270675 27.867611 12.433594 26.298828 C 10.015053 25.514437 7.6562889 25.193329 5.7714844 25.064453 C 5.2463582 25.028547 5.1676081 25.058388 4.7207031 25.046875 C 2.8447955 20.922473 1.4690843 16.424263 2.4140625 11.177734 C 8.4623746 12.164816 12.505101 13.93755 16.761719 16.304688 C 16.280001 16.480981 15.732013 16.559996 15.392578 16.908203 C 14.81943 17.496164 14.473819 18.286921 14.494141 19.125 C 14.514461 19.963079 14.937769 20.82134 15.699219 21.423828 C 16.479133 22.040974 17.491787 22.091461 18.314453 21.818359 C 19.137119 21.545258 19.849172 20.982636 20.320312 20.216797 C 20.496934 19.929699 20.586449 19.582394 20.673828 19.238281 C 23.538852 21.140241 26.968113 23.494282 31.265625 29.578125 A 1.0006075 1.0006075 0 1 0 32.900391 28.423828 C 27.899108 21.343681 23.608111 18.720512 20.640625 16.742188 C 20.459028 16.621105 20.275008 16.580558 20.091797 16.486328 C 19.654328 15.864345 19.080559 15.27754 18.212891 14.789062 C 13.444357 12.103419 8.8510985 10.027836 1.7246094 9.0097656 A 1.0001 1.0001 0 0 0 1.625 9 A 1.0001 1.0001 0 0 0 1.5253906 9 z M 17.835938 17.835938 C 18.078688 17.819897 18.442878 18.036632 18.753906 18.144531 C 18.850896 18.517018 18.813815 18.850308 18.617188 19.169922 C 18.404077 19.516333 18.02349 19.807086 17.683594 19.919922 C 17.343697 20.032758 17.125039 20.002319 16.939453 19.855469 C 16.582403 19.572957 16.498272 19.327125 16.492188 19.076172 C 16.486088 18.825219 16.594492 18.540351 16.824219 18.304688 C 17.053945 18.069024 17.388056 17.865539 17.835938 17.835938 z M 5.5996094 27.060547 C 5.6166464 27.061647 5.6176366 27.059347 5.6347656 27.060547 C 7.4062111 27.181671 9.6099472 27.485563 11.816406 28.201172 C 15.497296 29.394974 19.040911 31.779818 20.976562 36.34375 C 15.359785 32.43424 10.950806 31.892342 7.6796875 31.134766 C 7.008568 29.809156 6.295292 28.457886 5.5996094 27.060547 z M 31.761719 47.138672 C 31.808707 47.126668 31.904976 47.160197 32.167969 47.554688 C 32.222479 47.636448 32.208579 47.817319 32.255859 47.912109 C 32.112142 47.869579 31.667571 47.913514 31.607422 47.871094 C 31.400695 47.725169 31.426548 47.668807 31.470703 47.492188 C 31.514853 47.315568 31.690814 47.16383 31.726562 47.154297 C 31.7355 47.151922 31.746056 47.142673 31.761719 47.138672 z" />
    </Svg>
  );
}

export function StingrayIcon(props) {
  return (
    <Svg  {...props} viewBox="0 0 64 64" >
      <path d="M 9.3203125 1.7597656 C 7.7503125 1.7597656 6 3.1298438 6 5.0898438 C 6 7.0598437 7.2299219 9.1092188 8.9199219 11.949219 C 10.489922 14.579219 12.450547 17.859453 14.060547 22.189453 C 15.790547 26.809453 15.440625 30.140312 15.140625 33.070312 C 14.880625 35.480313 14.660156 37.669922 15.660156 39.919922 C 15.270156 40.459922 14.939922 40.960703 14.669922 41.470703 C 14.069922 42.480703 13.320078 44.049062 13.080078 45.789062 C 12.860078 47.269063 13.099297 48.900703 13.779297 50.470703 C 14.429297 52.030703 15.380781 53.179922 16.050781 53.919922 C 16.960781 54.919922 17.940781 55.769297 18.800781 56.529297 C 19.450781 57.109297 20.079844 57.649453 20.589844 58.189453 C 21.789844 59.479453 21.739766 59.819219 21.009766 60.699219 C 20.389766 61.449219 20.389766 62.539297 21.009766 63.279297 C 21.359766 63.689297 21.840859 63.950234 22.380859 63.990234 C 22.440859 64.000234 22.490781 64 22.550781 64 C 23.020781 64 23.479844 63.829297 23.839844 63.529297 C 24.629844 62.859297 25.96 61.419297 26 59.279297 C 26 57.529297 25.250703 56.240781 24.470703 55.050781 C 23.820703 54.140781 23.199844 53.380391 22.589844 52.650391 C 21.959844 51.890391 21.359141 51.170156 20.869141 50.410156 C 20.419141 49.720156 20.119531 49.230469 20.019531 48.730469 C 19.889531 48.140469 19.870234 47.590234 19.990234 47.240234 C 20.170234 46.690234 20.580391 46.010078 21.150391 45.330078 C 23.330391 46.260078 25.470547 46.029063 27.810547 45.789062 C 30.730547 45.489063 34.040391 45.139141 38.650391 46.869141 C 42.960391 48.489141 46.219844 50.449297 48.839844 52.029297 C 51.669844 53.729297 53.709688 54.960938 55.679688 54.960938 C 57.639688 54.960938 59 53.210625 59 51.640625 C 59 49.520625 57.809922 47.030625 56.419922 44.140625 C 54.449922 40.030625 52 34.909141 52 28.869141 C 52 24.559141 54.009219 23.120703 55.949219 21.720703 C 57.449219 20.640703 59 19.529766 59 17.259766 C 59 15.959766 57.79 13.400391 55 13.400391 C 52.84 13.400391 51.820234 14.780391 50.990234 15.900391 C 50.190234 16.970391 49.56 17.830078 48 17.830078 C 46.81 17.830078 45.289062 16.529766 44.789062 16.009766 C 44.289062 15.529766 43 14.000781 43 12.800781 C 43 11.230781 43.849922 10.599063 44.919922 9.7890625 C 46.029922 8.9690625 47.410156 7.9395313 47.410156 5.7695312 C 47.410156 2.9695313 44.860547 1.7597656 43.560547 1.7597656 C 41.300547 1.7597656 40.189375 3.3200781 39.109375 4.8300781 C 37.719375 6.7700781 36.28 8.7890625 32 8.7890625 C 25.99 8.7890625 20.879063 6.3296094 16.789062 4.3496094 C 13.909063 2.9596094 11.430312 1.7597656 9.3203125 1.7597656 z M 9.3203125 3.7597656 C 10.970313 3.7597656 13.259922 4.8703906 15.919922 6.1503906 C 20.199922 8.2203906 25.53 10.789063 32 10.789062 C 37.31 10.789062 39.290234 8.0102344 40.740234 5.9902344 C 41.780234 4.5302344 42.380547 3.7597656 43.560547 3.7597656 C 43.800547 3.7597656 45.410156 4.1395313 45.410156 5.7695312 C 45.410156 6.8795313 44.830469 7.3694531 43.730469 8.1894531 C 42.510469 9.0994531 41 10.230781 41 12.800781 C 41 15.060781 43.149141 17.209922 43.369141 17.419922 C 43.609141 17.669922 45.75 19.830078 48 19.830078 C 50.57 19.830078 51.699609 18.309844 52.599609 17.089844 C 53.419609 15.979844 53.9 15.400391 55 15.400391 C 56.63 15.400391 57 17.009766 57 17.259766 C 57 18.449766 56.239297 19.049844 54.779297 20.089844 C 52.759297 21.549844 50 23.529141 50 28.869141 C 50 35.359141 52.559141 40.709766 54.619141 45.009766 C 55.899141 47.669766 57 49.980625 57 51.640625 C 57 52.170625 56.449688 52.960938 55.679688 52.960938 C 54.269688 52.960938 52.330859 51.800312 49.880859 50.320312 C 47.180859 48.700313 43.829609 46.68 39.349609 45 C 36.309609 43.85 33.750781 43.539063 31.550781 43.539062 C 30.090781 43.539062 28.789609 43.680781 27.599609 43.800781 C 25.329609 44.040781 23.580078 44.219453 21.830078 43.439453 C 21.560078 43.319453 21.28 43.18 21 43 L 20.990234 43 C 20.440234 42.65 19.880781 42.199141 19.300781 41.619141 C 18.630781 40.949141 18.139062 40.319453 17.789062 39.689453 C 17.719062 39.579453 17.669141 39.479141 17.619141 39.369141 C 17.619141 39.369141 17.609375 39.369375 17.609375 39.359375 C 16.689375 37.509375 16.880859 35.689297 17.130859 33.279297 C 17.440859 30.279297 17.819453 26.550234 15.939453 21.490234 C 14.259453 16.990234 12.250625 13.629922 10.640625 10.919922 C 9.160625 8.4599219 8 6.5098437 8 5.0898438 C 8 4.3198438 8.7903125 3.7597656 9.3203125 3.7597656 z M 13.082031 7.6054688 C 12.697984 7.5384375 12.293359 7.699625 12.068359 8.046875 C 11.768359 8.510875 11.902234 9.1296875 12.365234 9.4296875 C 12.401234 9.4536875 13.259953 10.006281 14.626953 10.738281 C 14.777953 10.819281 14.938656 10.857422 15.097656 10.857422 C 15.454656 10.857422 15.799469 10.666078 15.980469 10.330078 C 16.240469 9.8420781 16.059266 9.2375625 15.572266 8.9765625 C 14.283266 8.2845625 13.459172 7.755 13.451172 7.75 C 13.334922 7.67525 13.210047 7.6278125 13.082031 7.6054688 z M 18.583984 10.521484 C 18.194078 10.523172 17.825016 10.754219 17.666016 11.136719 C 17.454016 11.647719 17.695078 12.233313 18.205078 12.445312 C 20.425078 13.370312 22.477594 13.964844 24.308594 14.214844 C 24.354594 14.220844 24.400312 14.224609 24.445312 14.224609 C 24.937312 14.224609 25.367547 13.859422 25.435547 13.357422 C 25.510547 12.810422 25.127078 12.307422 24.580078 12.232422 C 22.921078 12.006422 21.035609 11.456609 18.974609 10.599609 C 18.847109 10.546109 18.713953 10.520922 18.583984 10.521484 z M 30.5 14.810547 A 1.5 1.506 0 1 0 30.5 17.822266 A 1.5 1.506 0 1 0 30.5 14.810547 z M 43.5 26.857422 A 1.5 1.506 0 1 0 43.5 29.869141 A 1.5 1.506 0 1 0 43.5 26.857422 z M 31.494141 37.521484 C 30.942141 37.522484 30.495094 37.970438 30.496094 38.523438 L 30.501953 40.523438 C 30.502953 41.075437 30.950953 41.521484 31.501953 41.521484 L 31.503906 41.521484 C 32.055906 41.520484 32.502953 41.072531 32.501953 40.519531 L 32.496094 38.519531 C 32.495094 37.967531 32.047094 37.521484 31.496094 37.521484 L 31.494141 37.521484 z M 25.978516 37.890625 C 25.427516 37.922625 25.006109 38.393313 25.037109 38.945312 L 25.150391 40.941406 C 25.181391 41.473406 25.622438 41.884766 26.148438 41.884766 C 26.167438 41.884766 26.187078 41.883812 26.205078 41.882812 C 26.756078 41.850813 27.177484 41.380125 27.146484 40.828125 L 27.033203 38.830078 C 27.001203 38.279078 26.533516 37.869625 25.978516 37.890625 z M 36.902344 38.123047 C 36.519188 38.195234 36.200281 38.492688 36.113281 38.898438 L 35.693359 40.853516 C 35.577359 41.394516 35.920938 41.926969 36.460938 42.042969 C 36.531938 42.057969 36.601875 42.064453 36.671875 42.064453 C 37.132875 42.064453 37.547437 41.743437 37.648438 41.273438 L 38.068359 39.318359 C 38.184359 38.777359 37.840781 38.246859 37.300781 38.130859 C 37.165281 38.100609 37.030062 38.098984 36.902344 38.123047 z M 42.400391 39.806641 C 42.010813 39.812312 41.642328 40.048391 41.486328 40.431641 L 40.734375 42.283203 C 40.526375 42.795203 40.771203 43.379891 41.283203 43.587891 C 41.406203 43.637891 41.535156 43.660156 41.660156 43.660156 C 42.055156 43.660156 42.429891 43.425109 42.587891 43.037109 L 43.339844 41.185547 C 43.547844 40.673547 43.301063 40.088859 42.789062 39.880859 C 42.661313 39.828859 42.53025 39.80475 42.400391 39.806641 z M 16.800781 41.800781 C 17.110781 42.200781 17.470859 42.609297 17.880859 43.029297 C 18.390859 43.539297 18.890859 43.970078 19.380859 44.330078 C 18.760859 45.120078 18.309844 45.919141 18.089844 46.619141 C 17.799844 47.479141 17.910547 48.480156 18.060547 49.160156 C 18.240547 49.990156 18.659453 50.680234 19.189453 51.490234 C 19.739453 52.360234 20.380781 53.119687 21.050781 53.929688 C 21.630781 54.629687 22.240313 55.349922 22.820312 56.169922 C 23.440312 57.129922 24 58.079766 24 59.259766 C 23.98 60.599766 23.080781 61.550469 22.550781 61.980469 C 24.420781 59.720469 23.270781 58.140547 22.050781 56.810547 C 21.460781 56.210547 20.809141 55.629297 20.119141 55.029297 C 19.249141 54.269297 18.369297 53.490313 17.529297 52.570312 C 16.619297 51.570313 16.039141 50.679453 15.619141 49.689453 C 15.089141 48.449453 14.890547 47.200313 15.060547 46.070312 C 15.210547 44.960313 15.680391 43.690937 16.400391 42.460938 C 16.520391 42.240938 16.650781 42.020781 16.800781 41.800781 z M 47.496094 42.136719 C 47.107359 42.104609 46.719344 42.305875 46.527344 42.671875 L 45.599609 44.441406 C 45.342609 44.931406 45.532484 45.536969 46.021484 45.792969 C 46.169484 45.870969 46.328375 45.90625 46.484375 45.90625 C 46.845375 45.90625 47.192094 45.710141 47.371094 45.369141 L 48.298828 43.599609 C 48.555828 43.109609 48.367906 42.504047 47.878906 42.248047 C 47.756156 42.183297 47.625672 42.147422 47.496094 42.136719 z" />
    </Svg>
  );
}

export function OrcaIcon(props) {
  return (
    <Svg  {...props} viewBox="0 0 100 100">
      <path d="M 63.212891 13.949219 C 62.480592 13.948713 61.728578 13.966891 60.955078 14.001953 C 53.588078 14.336953 47.097656 16.004547 42.097656 18.810547 C 32.973656 11.796547 23.325719 15.744172 20.261719 18.701172 C 18.770719 20.140172 19.113219 21.099969 19.449219 21.542969 C 19.986219 22.248969 20.870531 22.558969 21.894531 22.917969 C 24.110531 23.695969 27.430813 24.876062 29.882812 30.914062 C 20.905812 45.618063 20.333406 66.019391 21.441406 70.775391 C 18.508406 71.945391 10.039062 75.940781 10.039062 83.050781 L 10.039062 83.25 L 10.115234 83.433594 C 10.178234 83.587594 10.778172 84.944563 12.201172 85.226562 C 12.368172 85.259563 12.537031 85.275391 12.707031 85.275391 C 13.648031 85.275391 14.633578 84.766813 15.642578 83.757812 C 16.168578 83.231813 18.319875 83.076172 20.046875 82.951172 C 22.411875 82.780172 25.176047 82.575516 26.623047 81.353516 C 28.070047 82.575516 30.834219 82.780172 33.199219 82.951172 C 34.727219 83.062172 36.587375 83.195844 37.359375 83.589844 C 37.615375 84.959844 38.819719 86 40.261719 86 C 41.886719 86 43.207031 84.678734 43.207031 83.052734 C 43.207031 75.804734 34.413438 71.795844 31.648438 70.714844 C 34.728437 52.729844 44.076422 45.578297 51.732422 42.779297 C 51.063422 46.184297 49.696922 49.265781 49.169922 50.050781 C 48.519922 51.018781 48.890078 51.691547 49.080078 51.935547 C 49.434078 52.392547 50.086891 52.554687 50.837891 52.554688 C 52.170891 52.554688 53.8185 52.039469 54.6875 51.730469 C 60.6045 49.625469 64.500656 46.084437 66.472656 41.023438 L 70.021484 41 C 82.423484 40.999 89.891031 41.0075 89.957031 33.0625 C 89.982031 29.9875 88.17975 25.122547 84.09375 21.185547 C 80.6025 17.821797 74.197366 13.95681 63.212891 13.949219 z M 63.173828 15.947266 C 73.519675 15.946112 79.481094 19.515234 82.707031 22.623047 C 86.896031 26.660047 87.974984 31.205922 87.958984 33.044922 C 87.952984 33.785922 87.864359 34.429047 87.693359 34.998047 L 84.029297 34.998047 C 83.753297 34.998047 83.529297 35.222047 83.529297 35.498047 C 83.529297 35.774047 83.753297 35.998047 84.029297 35.998047 L 87.238281 35.998047 C 85.533281 38.786047 80.565187 39 70.367188 39 C 70.254188 39 67.140625 39.017578 67.140625 39.017578 C 67.399625 38.060578 67.594328 37.051047 67.736328 35.998047 L 80.5 35.998047 C 80.776 35.998047 81 35.774047 81 35.498047 C 81 35.222047 80.776 35 80.5 35 L 67.849609 35 C 67.942609 34.035 68 33.042 68 32 C 68 31.448 67.553 31 67 31 C 66.447 31 66 31.448 66 32 C 66 41.267 62.192578 46.938656 54.017578 49.847656 C 53.006578 50.206656 51.913453 50.451156 51.189453 50.535156 C 52.680453 47.649156 56.759344 37.343109 51.652344 32.287109 C 51.260344 31.897109 50.628281 31.902922 50.238281 32.294922 C 49.849281 32.687922 49.853094 33.319984 50.246094 33.708984 C 51.913094 35.359984 52.276922 37.94975 52.044922 40.59375 C 51.983922 40.60175 51.922328 40.595234 51.861328 40.615234 C 43.458328 43.422234 32.775594 50.982687 29.558594 71.054688 L 27.089844 75.994141 L 26.626953 76.921875 L 24.068359 71.806641 C 24.271359 69.457641 24.791141 66.762828 25.619141 63.923828 C 25.697141 63.658828 25.545297 63.381688 25.279297 63.304688 C 25.015297 63.225687 24.736156 63.379531 24.660156 63.644531 C 24.016156 65.850531 23.558344 67.972641 23.277344 69.931641 C 22.674344 65.990641 22.717313 46.328109 31.695312 31.787109 C 33.216313 29.531109 35.021406 27.329203 36.941406 25.408203 C 37.136406 25.213203 37.136406 24.896172 36.941406 24.701172 C 36.746406 24.506172 36.429375 24.506172 36.234375 24.701172 C 34.605375 26.331172 33.060453 28.161734 31.689453 30.052734 C 28.899453 23.277734 24.949547 21.87125 22.560547 21.03125 C 22.083547 20.86425 21.596875 20.694391 21.296875 20.525391 C 21.802875 19.858391 23.597094 18.440312 26.496094 17.570312 C 29.448094 16.686312 35.237234 15.926078 41.115234 20.580078 C 40.355234 21.107078 39.596797 21.6845 38.841797 22.3125 C 38.629797 22.4895 38.600344 22.805578 38.777344 23.017578 C 38.876344 23.136578 39.019109 23.197266 39.162109 23.197266 C 39.275109 23.197266 39.389422 23.158078 39.482422 23.080078 C 40.472422 22.256078 41.468938 21.526719 42.460938 20.886719 C 42.468938 20.882719 42.476375 20.874141 42.484375 20.869141 C 42.486375 20.868141 42.488234 20.866234 42.490234 20.865234 C 42.497234 20.861234 42.504719 20.861422 42.511719 20.857422 C 47.302719 18.010422 53.712875 16.329094 61.046875 15.996094 C 61.776063 15.963094 62.484105 15.947343 63.173828 15.947266 z M 75.5 24 C 72.935 24 71 25.075 71 26.5 C 71 27.925 72.935 29 75.5 29 C 78.065 29 80 27.925 80 26.5 C 80 25.075 78.065 24 75.5 24 z M 75.5 25 C 77.503 25 79 25.792 79 26.5 C 79 27.208 77.503 28 75.5 28 C 73.497 28 72 27.208 72 26.5 C 72 25.792 73.497 25 75.5 25 z M 47.96875 35.207031 C 45.94775 35.445031 43.932422 35.890297 41.982422 36.529297 C 41.719422 36.615297 41.576109 36.897156 41.662109 37.160156 C 41.731109 37.370156 41.928672 37.505859 42.138672 37.505859 C 42.190672 37.505859 42.243922 37.497469 42.294922 37.480469 C 44.182922 36.862469 46.129938 36.432172 48.085938 36.201172 C 48.359938 36.169172 48.556437 35.920484 48.523438 35.646484 C 48.490437 35.372484 48.23775 35.170031 47.96875 35.207031 z M 38.654297 37.878906 C 38.589484 37.881547 38.524891 37.896281 38.462891 37.925781 C 32.816891 40.582781 28.66825 44.752297 29.40625 47.029297 C 29.71725 47.987297 30.503219 48.746859 31.699219 49.255859 C 30.358219 50.625859 29.120484 52.762828 28.271484 54.423828 C 28.145484 54.669828 28.244234 54.971656 28.490234 55.097656 C 28.563234 55.134656 28.64075 55.152344 28.71875 55.152344 C 28.90075 55.152344 29.073109 55.052859 29.162109 54.880859 C 30.487109 52.287859 31.838844 50.359125 32.964844 49.453125 C 33.109844 49.336125 33.176625 49.149797 33.140625 48.966797 C 33.104625 48.783797 32.970016 48.636984 32.791016 48.583984 C 31.869016 48.312984 30.697422 47.770703 30.357422 46.720703 C 29.923422 45.382703 33.105672 41.554031 38.888672 38.832031 C 39.138672 38.714031 39.244953 38.416016 39.126953 38.166016 C 39.039953 37.977766 38.848734 37.870984 38.654297 37.878906 z M 62.970703 38.728516 C 62.775937 38.730625 62.592422 38.845859 62.513672 39.037109 C 62.260672 39.649109 61.968484 40.248359 61.646484 40.818359 C 61.510484 41.059359 61.595938 41.363 61.835938 41.5 C 61.913938 41.543 61.998031 41.564453 62.082031 41.564453 C 62.256031 41.564453 62.425578 41.473547 62.517578 41.310547 C 62.859578 40.704547 63.1695 40.067969 63.4375 39.417969 C 63.5425 39.162969 63.420062 38.870625 63.164062 38.765625 C 63.100062 38.739625 63.035625 38.727812 62.970703 38.728516 z M 60.4375 42.865234 C 60.309625 42.875109 60.186656 42.933563 60.097656 43.039062 C 59.056656 44.262062 57.807719 45.284125 56.386719 46.078125 C 56.145719 46.213125 56.060313 46.517766 56.195312 46.759766 C 56.287312 46.923766 56.457813 47.015625 56.632812 47.015625 C 56.715812 47.015625 56.799953 46.995125 56.876953 46.953125 C 58.400953 46.100125 59.741375 45.003453 60.859375 43.689453 C 61.038375 43.479453 61.012734 43.163375 60.802734 42.984375 C 60.698234 42.895375 60.565375 42.855359 60.4375 42.865234 z M 27.716797 56.267578 C 27.522172 56.263594 27.3355 56.376203 27.25 56.564453 C 26.742 57.704453 26.254734 58.911297 25.802734 60.154297 C 25.707734 60.414297 25.841563 60.701875 26.101562 60.796875 C 26.158562 60.817875 26.216437 60.826172 26.273438 60.826172 C 26.477438 60.826172 26.668188 60.699094 26.742188 60.496094 C 27.186187 59.275094 27.664062 58.089656 28.164062 56.972656 C 28.275063 56.719656 28.162156 56.4255 27.910156 56.3125 C 27.847156 56.284 27.781672 56.268906 27.716797 56.267578 z M 31.013672 72.619141 C 33.553672 73.641141 41.207031 77.205734 41.207031 83.052734 C 41.207031 83.574734 40.783719 84 40.261719 84 C 39.739719 84 39.3125 83.575734 39.3125 83.052734 L 39.3125 82.638672 L 39.019531 82.345703 C 37.966531 81.292703 35.825703 81.136031 33.345703 80.957031 C 30.919703 80.781031 27.929484 80.565609 27.646484 79.349609 L 27.857422 78.927734 L 27.859375 78.925781 L 31.013672 72.619141 z M 22.201172 72.632812 L 25.369141 78.880859 L 25.603516 79.349609 C 25.320516 80.565609 22.330297 80.781031 19.904297 80.957031 C 17.425297 81.136031 15.283469 81.292703 14.230469 82.345703 C 13.575469 83.002703 12.980609 83.342578 12.599609 83.267578 C 12.355609 83.222578 12.155922 82.9845 12.044922 82.8125 C 12.248922 77.1315 19.663172 73.657813 22.201172 72.632812 z" />
    </Svg>
  );
}

export function WhaleIcon(props) {
  return (
    <Svg {...props} viewBox="0 0 512 512" >
      <path d="M 353.93945 105.00586 A 5.652 5.652 0 0 0 348.55859 108.40039 C 344.86659 116.88739 333.8292 146.57836 346.7832 172.31836 C 354.4832 187.62536 369.13489 198.51816 390.33789 204.78516 C 371.95389 229.19216 350.92561 242.99148 325.47461 247.39648 C 327.42361 241.98448 327.99386 234.62544 324.25586 225.27344 A 6.276 6.276 0 0 0 313.41602 223.82227 C 301.25102 239.98727 283.25727 245.32147 279.19727 246.35547 C 254.72927 242.01047 229.16942 232.78411 204.48242 222.91211 C 175.18242 211.19311 141.00983 208.18661 102.92383 213.97461 C 71.472828 218.75461 44.006906 228.55459 26.503906 235.93359 A 25.137 25.137 0 0 0 12.490234 250.71289 A 25.779 25.779 0 0 0 13.724609 270.61133 A 185.727 185.727 0 0 0 63.064453 333.26953 A 183.133 183.133 0 0 0 116.38867 363.48047 C 111.28867 369.75647 106.14975 381.29786 109.71875 401.13086 C 110.59475 407.09886 118.95741 409.10753 122.44141 404.14453 C 128.60541 395.91453 145.12309 376.69328 165.87109 374.98828 C 170.18909 375.48961 174.56967 375.88073 179.01367 376.16406 C 187.32167 376.69006 195.55174 376.95251 203.70508 376.95117 C 235.60508 376.95117 265.98808 372.92923 292.83008 365.11523 C 308.68208 376.59023 337.26341 385.7842 355.06641 385.7832 A 28.944 28.944 0 0 0 365.25781 384.2832 A 9.617 9.617 0 0 0 369.81055 370.01367 A 169.31 169.31 0 0 0 345.7207 341.41406 C 368.7737 326.82306 387.29169 308.17481 400.80469 285.88281 A 173.84 173.84 0 0 0 423.66406 222.11719 A 109.111 109.111 0 0 0 438.23438 223.14648 C 454.91737 223.14648 468.59597 218.69031 479.04297 209.82031 C 499.18497 192.72031 501.10509 164.24487 500.99609 152.79688 A 5.675 5.675 0 0 0 494.24414 147.28711 A 5.625 5.625 0 0 0 489.98242 151.06055 C 484.35542 167.03855 464.74878 166.17061 453.55078 164.22461 C 439.83378 161.84461 430.17525 164.33214 423.40625 168.49414 C 420.43525 158.45414 411.95911 143.04392 387.78711 137.41992 C 376.70111 134.84092 358.26986 127.97953 359.38086 111.01953 A 5.652 5.652 0 0 0 353.93945 105.00586 z M 352.90234 126.43945 C 357.20234 134.38845 366.40253 142.7102 385.51953 147.1582 C 410.40853 152.9492 414.28853 170.62808 414.89453 176.08008 A 36.477 36.477 0 0 0 409.79492 184.81445 A 14.242 14.242 0 0 0 399.48438 191.43359 C 398.48438 193.03359 397.47012 194.58814 396.45312 196.11914 C 376.19912 190.79914 362.49984 181.29931 355.71484 167.82031 C 353.39984 163.22031 347.41434 148.35845 352.90234 126.43945 z M 489.89648 167.77148 C 488.10548 179.03848 483.58131 192.85122 472.57031 202.19922 C 461.47031 211.62122 445.46989 214.97322 424.96289 212.19922 C 425.40089 208.05322 425.7193 203.85361 425.91797 199.59961 A 14.338 14.338 0 0 0 419.56641 187.09961 C 422.35141 180.96761 430.3618 170.34998 451.8418 174.08398 C 471.1228 177.43098 482.82548 173.38448 489.89648 167.77148 z M 411.71094 194.61523 C 412.49423 194.6206 413.25406 194.86717 413.91406 195.32617 A 4.2 4.2 0 0 1 415.30664 200.20508 L 415.30664 200.20703 C 388.20664 274.63103 334.65031 314.00617 322.07031 322.45117 A 167.614 167.614 0 0 0 270.69922 299.4707 A 5 5 0 1 0 268.19922 309.15039 C 322.89922 323.27439 352.89936 362.68023 361.19336 375.11523 C 350.51836 378.55323 311.34584 368.6927 295.33984 354.3457 C 276.86484 337.7807 260.48606 338.63186 246.03906 339.38086 A 93.715 93.715 0 0 1 230.4668 339.33984 C 221.5468 338.31584 215.9938 335.52859 213.9668 331.05859 C 210.4988 323.42559 216.99397 311.2202 219.79297 307.1582 A 5.0010489 5.0010489 0 0 0 211.57422 301.45703 A 55.5 55.5 0 0 0 204.16211 317.39062 A 53.5 53.5 0 0 1 184.86133 307.88281 C 160.21933 289.07681 129.98669 277.83781 97.429688 275.38281 C 53.347687 272.05381 30.371203 257.08922 23.158203 251.44922 A 15.2 15.2 0 0 1 30.388672 245.14453 C 47.367672 237.98553 73.994781 228.48242 104.42578 223.85742 C 140.72578 218.33942 173.14053 221.14436 200.76953 232.19336 C 238.96953 247.46736 279.32194 261.25053 315.71094 258.64453 C 353.41994 255.94453 383.59589 235.69837 407.96289 196.73438 C 409.03664 195.26875 410.40545 194.6063 411.71094 194.61523 z M 410.90625 235.0293 A 160.391 160.391 0 0 1 392.25391 280.69922 C 379.09191 302.41422 360.83733 320.47522 337.98633 334.44922 C 335.69499 332.50389 333.28639 330.56791 330.76172 328.64258 A 240.243 240.243 0 0 0 363.25195 300.75977 A 274.465 274.465 0 0 0 410.90625 235.0293 z M 316.75195 235.36523 C 317.71395 241.87123 315.50117 246.19462 313.32617 248.76562 A 125.823 125.823 0 0 1 299.53906 248.76562 A 72.065 72.065 0 0 0 316.75195 235.36523 z M 21.378906 262.55273 C 32.613906 270.15273 56.411734 282.31552 96.677734 285.35352 C 127.29973 287.66552 155.69788 298.20303 178.79688 315.83203 A 63.079 63.079 0 0 0 203.00781 327.42383 A 21.666 21.666 0 0 0 204.84766 335.16602 C 208.42566 343.07102 216.66112 347.81744 229.32812 349.27344 A 102.7 102.7 0 0 0 246.56055 349.36523 C 258.62955 348.73823 270.11278 348.14763 283.17578 357.39062 C 252.36578 365.36362 216.02748 368.4915 179.64648 366.1875 L 179.64258 366.1875 C 136.14258 363.4315 99.049719 349.75134 69.386719 325.52734 A 175.68 175.68 0 0 1 22.490234 265.77539 A 15.252 15.252 0 0 1 21.378906 262.55273 z M 165.01367 266.56445 A 11 11 0 1 0 176.01367 277.56445 A 11.012 11.012 0 0 0 165.01367 266.56445 z M 126.90039 367.00195 C 132.53972 368.71395 138.31766 370.19841 144.23633 371.45508 C 133.21133 377.37608 124.39922 386.13927 118.69922 392.82227 C 117.40522 376.38327 123.88539 369.35295 126.90039 367.00195 z" />
    </Svg>
  );
}

/**
 * Returns the correct icon component for a given staker level name.
 */
export function stakerLevelIconFor(levelName) {
  const name = String(levelName || "").trim().toLowerCase();
  switch (name) {
    case "clam": return ClamIcon;
    case "shrimp": return ShrimpIcon;
    case "seahorse": return SeahorseIcon;
    case "fish": return FishIcon;
    case "dolphin": return DolphinIcon;
    case "shark": return SharkIcon;
    case "stingray": return StingrayIcon;
    case "orca": return OrcaIcon;
    case "whale": return WhaleIcon;
    default: return null;
  }
}
</file>

<file path="src/components/ui/icons/ReactionIcon.jsx">
// src/components/ui/icons/ReactionIcon.jsx
import { Show } from "solid-js";

const REACTION_MAP = {
  like: "",
  super: "",
  ha_ha: "",
  sad: "",
  angry: "",
  wow: "",
  trophy: "",
  hot: "",
  clap: "",
  dislike: "",
};

export default function ReactionIcon(props) {
  const emoji = () => REACTION_MAP[props.type];
  return (
    <Show when={emoji()}>
      <span
        class={props.class || "text-sm"}
        aria-label={props.type}
        title={props.type}
      >
        {emoji()}
      </span>
    </Show>
  );
}
</file>

<file path="src/components/ui/icons/SavvaTokenIcon.jsx">
// src/components/ui/icons/SavvaTokenIcon.jsx
export default function SavvaTokenIcon(props) {
  return (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 25 25"
      class={props.class || "w-4 h-4"}
      aria-hidden="true"
    >
      <g>
        <path
          d="M 12.035156 19.488281 C 8.757812 18.808594 7.097656 16.25 7.304688 14 C 8.429688 16.339844 10.179688 17.542969 12.644531 17.542969 C 17.105469 17.542969 19.667969 12.167969 24.933594 11.21875 C 24.632812 8.28125 23.304688 5.546875 21.179688 3.496094 C 19.054688 1.445312 16.273438 0.214844 13.328125 0.0195312 C 10.382812 -0.175781 7.460938 0.675781 5.085938 2.429688 C 2.707031 4.179688 1.027344 6.714844 0.34375 9.585938 C 4.355469 8.675781 8.09375 4.496094 12.96875 5.511719 C 16.25 6.191406 17.902344 8.75 17.695312 11 C 16.570312 8.660156 14.820312 7.457031 12.355469 7.457031 C 7.894531 7.457031 5.332031 12.832031 0.0664062 13.78125 C 0.367188 16.71875 1.695312 19.453125 3.820312 21.503906 C 5.945312 23.554688 8.726562 24.785156 11.671875 24.984375 C 14.617188 25.179688 17.535156 24.324219 19.914062 22.574219 C 22.289062 20.824219 23.972656 18.289062 24.65625 15.417969 C 20.644531 16.324219 16.914062 20.5 12.035156 19.488281 Z M 12.5 9.601562 C 13.074219 9.601562 13.632812 9.769531 14.109375 10.089844 C 14.585938 10.410156 14.957031 10.859375 15.179688 11.390625 C 15.398438 11.921875 15.453125 12.503906 15.34375 13.066406 C 15.230469 13.628906 14.957031 14.144531 14.550781 14.550781 C 14.144531 14.957031 13.628906 15.230469 13.066406 15.34375 C 12.503906 15.453125 11.921875 15.398438 11.390625 15.179688 C 10.859375 14.957031 10.410156 14.585938 10.089844 14.109375 C 9.769531 13.632812 9.601562 13.074219 9.601562 12.5 C 9.601562 11.730469 9.90625 10.992188 10.449219 10.449219 C 10.992188 9.90625 11.730469 9.601562 12.5 9.601562 Z M 12.5 9.601562 "
          style="stroke: none; fill-rule: nonzero; fill: rgb(255, 113, 0); fill-opacity: 1;"
        ></path>
      </g>
    </svg>
  );
}
</file>

<file path="src/components/ui/icons/TabIcons.jsx">
// src/components/ui/icons/TabIcons.jsx
/* src/components/ui/icons/TabIcons.jsx */
export function CrownIcon(props) {
  return (
    <svg viewBox="0 0 24 24" class={props.class || "w-4 h-4"} aria-hidden="true" fill="none">
      <path d="M4 18h16M5 18l1-9 5 4 5-4 1 9" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" />
    </svg>
  );
}

export function TrendingUpIcon(props) {
  return (
    <svg viewBox="0 0 24 24" class={props.class || "w-4 h-4"} aria-hidden="true" fill="none">
      <path d="M3 17l6-6 4 4 8-8" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" />
      <path d="M15 7h6v6" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" />
    </svg>
  );
}

export function ChatBubbleIcon(props) {
  return (
    <svg viewBox="0 0 24 24" class={props.class || "w-4 h-4"} aria-hidden="true" fill="none">
      <path d="M5 6h14a2 2 0 0 1 2 2v7a2 2 0 0 1-2 2H8l-4 4V8a2 2 0 0 1 2-2z" stroke="currentColor" stroke-width="1.8" stroke-linejoin="round" />
      <path d="M8 11h8M8 14h5" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" />
    </svg>
  );
}

export function SparklesIcon(props) {
  return (
    <svg viewBox="0 0 24 24" class={props.class || "w-4 h-4"} aria-hidden="true" fill="none">
      <path d="M12 4l1.7 4.2L18 10l-4.3 1.8L12 16l-1.7-4.2L6 10l4.3-1.8L12 4z" stroke="currentColor" stroke-width="1.6" stroke-linejoin="round" />
      <path d="M6 4.5l.8 1.9L9 7.2 7 8 6.2 10 5.4 8 3.5 7.2l2.1-.8L6 4.5z" stroke="currentColor" stroke-width="1.2" stroke-linejoin="round" />
    </svg>
  );
}

export function HeartIcon(props) {
  return (
    <svg viewBox="0 0 24 24" class={props.class || "w-4 h-4"} aria-hidden="true" fill="none">
      <path d="M12 20s-7-4.3-9-8.5C1.8 8.1 3.7 6 6.2 6c1.9 0 3.4 1 4.8 2.7C12.4 7 13.9 6 15.8 6c2.5 0 4.4 2.1 3.2 5.5C19 15.7 12 20 12 20z" stroke="currentColor" stroke-width="1.8" stroke-linejoin="round" />
    </svg>
  );
}

function normalize(s) {
  return String(s || "").trim().toLowerCase();
}

/**
 * Returns a JSX icon for a known tab type (leaders, actual, comments, new, for-you).
 * Falls back to null.
 */
export function tabIconFor(type) {
  switch (normalize(type)) {
    case "leaders":   return <CrownIcon />;
    case "actual":    return <TrendingUpIcon />;
    case "comments":  return <ChatBubbleIcon />;
    case "new":       return <SparklesIcon />;
    case "for-you":   return <HeartIcon />;
    default:          return null;
  }
}
</file>

<file path="src/components/ui/ClosePageButton.jsx">
// src/components/ui/ClosePageButton.jsx
import { useApp } from "../../context/AppContext.jsx";
import { useHashRouter } from "../../routing/hashRouter";

/**
 * Close (go to main tabs view) floating button.
 */
export default function ClosePageButton({ title, offsetTop = 56 }) {
  const app = useApp();
  const { navigate } = useHashRouter();
  const { t } = app;
  const label = title || t("settings.back");

  const closeAndReturn = () => {
    navigate(app.lastTabRoute() || "/");
  };

  return (
    <button
      type="button"
      onClick={closeAndReturn}
      aria-label={label}
      title={label}
      class="fixed right-3 z-20 p-2 rounded-full
             bg-[hsl(var(--background))]/70
             hover:bg-[hsl(var(--accent))] hover:text-[hsl(var(--accent-foreground))] 
             shadow-sm transition-colors"
      style={{ top: `${offsetTop}px` }}
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        class="w-5 h-5"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        aria-hidden="true"
      >
        <line x1="18" y1="6" x2="6" y2="18" />
        <line x1="6" y1="6" x2="18" y2="18" />
      </svg>
    </button>
  );
}
</file>

<file path="src/components/ui/PostReactions.jsx">
// src/components/ui/PostReactions.jsx
import { For, createMemo, Show } from "solid-js";
import ReactionIcon from "./icons/ReactionIcon.jsx";

const REACTION_TYPES = [
  "like", "super", "ha_ha", "sad", "angry", 
  "wow", "trophy", "hot", "clap", "dislike"
];

export default function PostReactions(props) {
  const reactionsWithCount = createMemo(() => {
    const counts = props.item?._raw?.reactions || [];
    return REACTION_TYPES.map((type, i) => ({
      type,
      count: counts[i] || 0,
    })).filter(r => r.count > 0);
  });

  const totalReactions = createMemo(() => {
    return (props.item?._raw?.reactions || []).reduce((sum, count) => sum + (count || 0), 0);
  });

  return (
    <Show when={totalReactions() > 0}>
      <div class="flex items-center text-xs">
        <div class="flex items-center">
          <For each={reactionsWithCount()}>
            {(reaction) => <ReactionIcon type={reaction.type} />}
          </For>
        </div>
        <Show when={totalReactions() > 1}>
          <div class=" ml-0">{totalReactions()}</div>
        </Show>
      </div>
    </Show>
  );
}
</file>

<file path="src/components/ui/PostTime.jsx">
// src/components/ui/PostTime.jsx
import { createMemo } from "solid-js";
import { useApp } from "../../context/AppContext";

const MINUTE = 60;
const HOUR = MINUTE * 60;
const DAY = HOUR * 24;
const WEEK = DAY * 7;

// Technical comments for the i18n script. Do not remove.
// t("time.minute.singular")
// t("time.minute.plural")
// t("time.hour.singular")
// t("time.hour.plural")
// t("time.day.singular")
// t("time.day.plural")

export default function PostTime(props) {
  const { t, lang } = useApp();

  const parsedDate = createMemo(() => {
    const ts = props.timestamp;
    if (!ts) return null;
    const d = new Date(ts);
    return isNaN(d.getTime()) ? null : d;
  });

  const fullDateTime = createMemo(() => {
    const d = parsedDate();
    if (!d) return "";
    return new Intl.DateTimeFormat(lang(), {
      dateStyle: 'long',
      timeStyle: 'short',
    }).format(d);
  });

  const shortDate = createMemo(() => {
    const d = parsedDate();
    if (!d) return "";
    return new Intl.DateTimeFormat(lang(), {
      year: '2-digit',
      month: '2-digit',
      day: '2-digit',
    }).format(d);
  });

  const displayText = createMemo(() => {
    const d = parsedDate();
    if (!d) return "";

    if (props.format === 'short') {
      return shortDate();
    }

    // Default to 'long' format (relative time)
    const now = new Date();
    const diffSeconds = Math.round((now.getTime() - d.getTime()) / 1000);

    if (diffSeconds < MINUTE) {
      return t("time.now");
    }
    if (diffSeconds < HOUR) {
      const n = Math.floor(diffSeconds / MINUTE);
      const key = n === 1 ? "time.minute.singular" : "time.minute.plural";
      return t(key, { n });
    }
    if (diffSeconds < DAY) {
      const n = Math.floor(diffSeconds / HOUR);
      const key = n === 1 ? "time.hour.singular" : "time.hour.plural";
      return t(key, { n });
    }
    if (diffSeconds < WEEK) {
      const n = Math.floor(diffSeconds / DAY);
      const key = n === 1 ? "time.day.singular" : "time.day.plural";
      return t(key, { n });
    }

    return fullDateTime();
  });

  return (
    <div
      class="text-xs text-[hsl(var(--muted-foreground))]"
      title={fullDateTime()}
    >
      {displayText()}
    </div>
  );
}
</file>

<file path="src/components/ui/Spinner.jsx">
// src/components/ui/Spinner.jsx

export default function Spinner(props) {
  return (
    <svg
      class={`animate-spin ${props.class || "h-5 w-5 text-[hsl(var(--foreground))]"}`}
      xmlns="http://www.w3.org/2000/svg"
      fill="none"
      viewBox="0 0 24 24"
    >
      <circle
        class="opacity-25"
        cx="12"
        cy="12"
        r="10"
        stroke="currentColor"
        stroke-width="4"
      />
      <path
        class="opacity-75"
        fill="currentColor"
        d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
      />
    </svg>
  );
}
</file>

<file path="src/components/ui/StakerLevelIcon.jsx">
// src/components/ui/StakerLevelIcon.jsx
import { createMemo, Show, splitProps } from "solid-js";
import { useApp } from "../../context/AppContext.jsx";
import { stakerLevelIconFor } from "./icons/FishIcons.jsx";
import { formatUnits } from "viem";

const STAKER_LEVELS = [
    // do not remove comments !!!
    { min: 0, key: "guest" }, //t("stakerLevels.guest")
    { min: 5000, key: "clam" }, //t("stakerLevels.clam")
    { min: 10000, key: "shrimp" }, //t("stakerLevels.shrimp")
    { min: 20000, key: "seahorse" }, //t("stakerLevels.seahorse")
    { min: 50000, key: "fish" }, //t("stakerLevels.fish")
    { min: 100000, key: "dolphin" }, //t("stakerLevels.dolphin")
    { min: 200000, key: "shark" }, //t("stakerLevels.shark")
    { min: 500000, key: "stingray" }, //t("stakerLevels.stingray")
    { min: 1000000, key: "orca" }, //t("stakerLevels.orca")
    { min: 10000000, key: "whale" }, //t("stakerLevels.whale")
];

function getStakerLevel(levels, stakedAmount) {
    if (!Array.isArray(levels) || levels.length === 0) return null;
    try {
        const staked = formatUnits(BigInt(stakedAmount || 0), 18);
        const stakedNum = parseFloat(staked);
        let bestLevel = null;
        for (const level of levels) {
            if (stakedNum >= level.min) {
                bestLevel = level;
            }
        }
        return bestLevel;
    } catch (e) { return null; }
}

function formatStakeAmount(num) {
    if (num >= 1_000_000) return `${num / 1_000_000}M`;
    if (num >= 1_000) return `${num / 1_000}K`;
    return String(num);
}

export default function StakerLevelIcon(props) {
    const [local, rest] = splitProps(props, ["staked", "class"]);
    const app = useApp();

    const level = createMemo(() => getStakerLevel(STAKER_LEVELS, local.staked));

    const tooltipText = createMemo(() => {
        const l = level();
        if (!l) return "";
        const name = app.t(`stakerLevels.${l.key}`);
        if (l.min > 0) {
            return `${name} > ${formatStakeAmount(l.min)}`;
        }
        return name;
    });

    const IconComponent = createMemo(() => {
        const key = level()?.key;
        return key ? stakerLevelIconFor(key) : null;
    });

    return (
        <Show when={IconComponent()}>
            {(getIcon) => {
                const Icon = getIcon();
                return (
                    <span title={tooltipText()}>
                        <Icon
                            {...rest}
                            class={local.class || "w-4 h-4 text-[hsl(var(--muted-foreground))]"}
                        />
                    </span>
                );
            }}
        </Show>
    );
}
</file>

<file path="src/components/ui/ThemeToggle.jsx">
// src/components/ui/ThemeIconToggle.jsx
import { useTheme } from "../../hooks/useTheme";
import { useApp } from "../../context/AppContext.jsx";

function SunIcon(props) {
  return (
    <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true" {...props}>
      <path d="M12 4V2M12 22v-2M4.93 4.93L3.51 3.51M20.49 20.49l-1.42-1.42M4 12H2M22 12h-2M4.93 19.07L3.51 20.49M20.49 3.51l-1.42 1.42" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
      <circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="1.8" fill="none"/>
    </svg>
  );
}
function MoonIcon(props) {
  return (
    <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true" {...props}>
      <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" stroke="currentColor" stroke-width="1.8" fill="none" stroke-linejoin="round"/>
    </svg>
  );
}

export default function ThemeIconToggle(props) {
  const [theme, toggleTheme] = useTheme();
  const app = useApp();

  const isDark = () => theme() === "dark";

  return (
    <div class="themed-segment" role="group" aria-label={app.t("rightPane.theme")}>
      <button
        class={`themed-pill themed-pill--icon ${!isDark() ? "is-active" : ""}`}
        aria-pressed={!isDark()}
        aria-label={app.t("ui.mode.light")}
        onClick={() => { if (isDark()) toggleTheme(); }}
        title={app.t("ui.mode.light")}
        type="button"
      >
        <SunIcon />
      </button>
      <button
        class={`themed-pill themed-pill--icon ${isDark() ? "is-active" : ""}`}
        aria-pressed={isDark()}
        aria-label={app.t("ui.mode.dark")}
        onClick={() => { if (!isDark()) toggleTheme(); }}
        title={app.t("ui.mode.dark")}
        type="button"
      >
        <MoonIcon />
      </button>
    </div>
  );
}
</file>

<file path="src/components/ui/ToTopButton.jsx">
// src/components/ui/ToTopButton.jsx
import { createSignal, onMount, onCleanup, Show } from "solid-js";
import { useApp } from "../../context/AppContext.jsx";

/**
 * ToTopButton
 * - Appears when scrolled beyond `threshold` (default: 240px)
 * - By default listens to window scroll; pass `targetEl` to watch a specific container
 * - Position: bottom-center (fixed)  style via .sv-to-top classes
 */
export default function ToTopButton(props) {
  const app = useApp();
  const threshold = typeof props.threshold === "number" ? props.threshold : 240;

  const [visible, setVisible] = createSignal(false);

  let el; // button node (not strictly needed, but handy if you want to focus etc.)

  function getScrollTop() {
    const t = props.targetEl;
    if (t && t.scrollTop != null) return t.scrollTop;
    return window.scrollY || document.documentElement.scrollTop || 0;
  }

  function onScroll() {
    setVisible(getScrollTop() > threshold);
  }

  function scrollToTop() {
    const t = props.targetEl;
    if (t && typeof t.scrollTo === "function") {
      t.scrollTo({ top: 0, behavior: "smooth" });
    } else {
      window.scrollTo({ top: 0, behavior: "smooth" });
    }
  }

  onMount(() => {
    const target = props.targetEl || window;
    target.addEventListener("scroll", onScroll, { passive: true });
    // initial state
    onScroll();

    onCleanup(() => {
      target.removeEventListener("scroll", onScroll);
    });
  });

  return (
    <Show when={visible()}>
      <button
        ref={el}
        type="button"
        class={`sv-to-top ${props.class || ""}`}
        aria-label={app.t("ui.toTop")}
        title={app.t("ui.toTop")}
        onClick={scrollToTop}
      >
        {/* up arrow */}
        <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
          <path
            d="M12 4l-7 7m7-7l7 7M12 4v16"
            fill="none"
            stroke="currentColor"
            stroke-width="2.2"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
        </svg>
      </button>
    </Show>
  );
}
</file>

<file path="src/components/widgets/ContentListBlock.jsx">
// src/components/widgets/ContentListBlock.jsx
import { createMemo, createResource } from "solid-js";
import { useApp } from "../../context/AppContext.jsx";
import { loadAssetResource } from "../../utils/assetLoader.js";

/**
 * Selects the best title string from a locale object.
 * Logic: current lang -> '*' -> 'en' -> first available.
 */
function getLocalizedTitle(titleData, currentLang) {
    if (!titleData || typeof titleData !== 'object') return "";
    
    // 1. Current language
    if (titleData[currentLang]) return titleData[currentLang];
    // 2. Wildcard fallback
    if (titleData['*']) return titleData['*'];
    // 3. English fallback
    if (titleData.en) return titleData.en;
    // 4. First available fallback
    const firstKey = Object.keys(titleData)[0];
    return firstKey ? titleData[firstKey] : "";
}

export default function ContentListBlock(props) {
  const app = useApp();

  // 1. Get the path to the content_lists module from the main domain config.
  const modulePath = createMemo(() => app.domainAssetsConfig?.()?.modules?.content_lists);

  // 2. Fetch and parse the content_lists module file.
  const [contentListModule] = createResource(modulePath, async (path) => {
    if (!path) return null;
    try {
      return await loadAssetResource(app, path, { type: 'yaml' });
    } catch (e) {
      console.error(`Failed to load content list module from ${path}`, e);
      return null;
    }
  });
  
  // 3. Find the specific list definition using the list_name from props.
  const listDefinition = createMemo(() => {
    const listName = props.block?.list_name;
    if (!listName) return null;
    return contentListModule()?.list?.[listName] || null;
  });

  // 4. Extract the localized title from the definition.
  const title = createMemo(() => {
    const def = listDefinition();
    return getLocalizedTitle(def?.title, app.lang());
  });

  return (
    <div class="p-3">
      <h4 class="font-semibold text-sm mb-2">{title() || props.block?.list_name}</h4>
      <div class="text-xs text-[hsl(var(--muted-foreground))]">
        Content feed placeholder...
      </div>
    </div>
  );
}
</file>

<file path="src/components/widgets/HtmlBlock.jsx">
// src/components/widgets/HtmlBlock.jsx
import { createMemo, createResource } from "solid-js";
import { useApp } from "../../context/AppContext.jsx";
import { loadAssetResource } from "../../utils/assetLoader";

/**
 * Selects the best path from a block's locale object.
 * Logic: current lang -> '*' -> 'en' -> first available.
 */
function getLocalizedPath(block, currentLang) {
  if (!block || typeof block !== 'object') return null;
  
  if (block[currentLang]) return block[currentLang];
  if (block['*']) return block['*'];
  if (block.en) return block.en;
  
  // Fallback to the first key that isn't 'type'
  const fallbackKey = Object.keys(block).find(k => k !== 'type');
  return fallbackKey ? block[fallbackKey] : null;
}

export default function HtmlBlock(props) {
  const app = useApp();
  const path = createMemo(() => getLocalizedPath(props.block, app.lang()));
  
  const [htmlContent] = createResource(path, async (p) => {
    if (!p) return "";
    try {
      return await loadAssetResource(app, p, { type: 'text' });
    } catch (e) {
      console.error(`Failed to load HTML block from ${p}`, e);
      return `<p class="text-red-500">Error loading content.</p>`;
    }
  });

  return (
    <div class="p-3 text-sm space-y-2" innerHTML={htmlContent() || ""} />
  );
}
</file>

<file path="src/components/RightPaneFooter.jsx">
// File: src/components/ui/RightPaneFooter.jsx
import { APP_VERSION } from "../version.js";
import { useApp } from "../context/AppContext.jsx";

export default function RightPaneFooter() {
  const app = useApp();
  const { t } = app;
  const WEBSITE_URL = import.meta.env.VITE_WEBSITE_URL || "https://savva.app";

  return (
    <div class="mt-auto pt-3 border-t border-[hsl(var(--border))] text-sm text-[hsl(var(--muted-foreground))]">
      <div class=" items-center justify-between">
        <div>{t("app.versionLabel")} <b>v{APP_VERSION}</b></div>
        <div>
          Powered by{" "}
          <b><a
            href={WEBSITE_URL}
            target="_blank"
            rel="noreferrer"
            class="underline hover:opacity-80 text-[hsl(var(--foreground))]"
          >
            SAVVA Platform
          </a>
          </b>
        </div>
      </div>
    </div>
  );
}
</file>

<file path="src/hooks/useLocalIpfs.js">
// src/hooks/useLocalIpfs.js
import { createSignal, onCleanup } from "solid-js";
import { fetchWithTimeout } from "../utils/net.js";

// Constants are now local to this hook
const IPFS_LOCAL_KEY = "ipfs_local_enabled";
const IPFS_LOCAL_API_KEY = "ipfs_local_api";
const IPFS_LOCAL_GATEWAY_KEY = "ipfs_local_gateway";

function trimSlash(s) { if (!s) return ""; return s.endsWith("/") ? s.slice(0, -1) : s; }

export function useLocalIpfs(dependencies) {
  const { pushToast, pushErrorToast, t } = dependencies;

  const [localIpfsEnabled, setLocalIpfsEnabled] = createSignal(localStorage.getItem(IPFS_LOCAL_KEY) === "1");
  const [localIpfsApiUrl, setLocalIpfsApiUrl] = createSignal(localStorage.getItem(IPFS_LOCAL_API_KEY) || "http://127.0.0.1:5001");
  const [localIpfsGateway, setLocalIpfsGateway] = createSignal(localStorage.getItem(IPFS_LOCAL_GATEWAY_KEY) || "");
  const [localIpfsStatus, setLocalIpfsStatus] = createSignal("unknown");
  let ipfsMonitorTid = null;

  async function pingLocalIpfs() {
    try {
      const base = trimSlash(localIpfsApiUrl());
      if (!base) throw new Error("No API URL");
      const res = await fetchWithTimeout(`${base}/api/v0/id`, { method: "POST", timeoutMs: 5000 });
      if (!res.ok) throw new Error(`HTTP ${res.status}`);
      setLocalIpfsStatus("ok");
      return true;
    } catch (e) {
      setLocalIpfsStatus("down");
      pushErrorToast(e, { op: "pingLocalIpfs", apiUrl: localIpfsApiUrl() });
      return false;
    }
  }

  async function probeLocalIpfs(apiUrl) {
    const url = trimSlash(apiUrl || "");
    if (!url) throw new Error("Empty IPFS API URL");
    const res = await fetchWithTimeout(`${url}/api/v0/version`, { method: "POST", timeoutMs: 4000 });
    if (!res.ok) throw new Error(`HTTP ${res.status}`);
    const gw = url.replace(/:\d+$/, ":8080").replace(/\/api$/, "");
    return gw.endsWith("/") ? gw : gw + "/";
  }

  function startLocalIpfsMonitor() {
    stopLocalIpfsMonitor();
    ipfsMonitorTid = setInterval(() => { pingLocalIpfs(); }, 10_000);
    pingLocalIpfs();
  }

  function stopLocalIpfsMonitor() {
    if (ipfsMonitorTid) { clearInterval(ipfsMonitorTid); ipfsMonitorTid = null; }
  }

  async function enableLocalIpfs(apiUrl) {
    try {
      const gw = await probeLocalIpfs(apiUrl);
      setLocalIpfsApiUrl(apiUrl);
      setLocalIpfsGateway(gw);
      setLocalIpfsEnabled(true);
      localStorage.setItem(IPFS_LOCAL_KEY, "1");
      localStorage.setItem(IPFS_LOCAL_API_KEY, apiUrl);
      localStorage.setItem(IPFS_LOCAL_GATEWAY_KEY, gw);
      startLocalIpfsMonitor();
    } catch (e) {
      pushErrorToast(e, { op: "enableLocalIpfs", apiUrl });
      throw e;
    }
  }

  async function disableLocalIpfs() {
    stopLocalIpfsMonitor();
    setLocalIpfsEnabled(false);
    setLocalIpfsGateway("");
    localStorage.setItem(IPFS_LOCAL_KEY, "0");
    localStorage.removeItem(IPFS_LOCAL_GATEWAY_KEY);
    pushToast({ type: "info", message: t("settings.ipfs.localDisabled") });
  }

  // Start the monitor if it was enabled on page load
  if (localIpfsEnabled() && localIpfsApiUrl()) {
    startLocalIpfsMonitor();
  }

  onCleanup(() => stopLocalIpfsMonitor());

  return {
    localIpfsEnabled,
    localIpfsApiUrl,
    localIpfsGateway,
    localIpfsStatus,
    enableLocalIpfs,
    disableLocalIpfs,
    setLocalIpfsApiUrl,
  };
}
</file>

<file path="src/net/wsApi.js">
// File: src/net/wsApi.js
// Thin helper over WsClient for JSON-RPC-like calls and simple method sugar.

export function createWsApi(wsClient) {
  function call(method, params = {}, opts) {
    return wsClient.call(String(method), params, opts);
  }

  // Sugar: api.method("get-user") returns (...args) => call("get-user", ...mergedParams)
  function method(name, fixedParams = {}) {
    const m = String(name);
    return (params = {}, opts) => call(m, { ...fixedParams, ...params }, opts);
  }

  // Optional: define a few common factories here as you add them over time.
  const api = { call, method };

  return api;
}
</file>

<file path="src/net/wsBus.js">
// File: src/net/wsBus.js
// Lightweight event bus for WS alerts (type-based) with a small replay buffer.

export function createWsBus({ replay = 0 } = {}) {
  const map = new Map();          // type -> Set<fn>
  const any = new Set();          // watchers of all events
  const buf = [];                 // [{type, payload, ts}]
  const max = Math.max(0, replay | 0);

  function on(type, fn) {
    if (!type || type === "*") { any.add(fn); return () => any.delete(fn); }
    let set = map.get(type); if (!set) { set = new Set(); map.set(type, set); }
    set.add(fn);
    if (max > 0) {
      for (let i = 0; i < buf.length; i++) if (buf[i].type === type) try { fn(buf[i].payload); } catch {}
    }
    return () => set.delete(fn);
  }

  function off(type, fn) {
    if (!type || type === "*") { any.delete(fn); return; }
    const set = map.get(type); if (set) set.delete(fn);
  }

  function emit(type, payload) {
    if (max > 0) {
      buf.push({ type, payload, ts: Date.now() });
      if (buf.length > max) buf.splice(0, buf.length - max);
    }
    const set = map.get(type);
    if (set) for (const fn of Array.from(set)) try { fn(payload); } catch {}
    for (const fn of Array.from(any)) try { fn({ type, payload }); } catch {}
  }

  function clear() { map.clear(); any.clear(); buf.length = 0; }

  return { on, off, emit, clear };
}
</file>

<file path="src/net/wsRuntime.js">
// File: src/net/wsRuntime.js
import WsClient from "./WsClient";
import { wsUrl } from "./endpoints";
import { createWsBus } from "./wsBus";
import { createWsApi } from "./wsApi";
import { dbg } from "../utils/debug";

let _client = null;
let _bus = null;
let _api = null;
let _started = false;

// Initialize once; safe to call multiple times.
export function ensureWsStarted(reason = "init") {
  if (!_client) {
    _client = new WsClient();
    _bus = createWsBus({ replay: 32 });
    _api = createWsApi(_client);

    // Wire incoming notifications to the bus
    _client.on("message", (obj) => {
      const t = obj && (obj.type || obj.event);
      if (t) _bus.emit(String(t), obj);
    });
  }

  // Always pull the canonical URL from endpoints
  _client.setUrl(); // zero-arg; reads from endpoints
  const url = _client.url();
  if (!url) {
    dbg.warn("ws", "No WS URL configured");
    return { client: _client, bus: _bus, api: _api };
  }

  if (_client.status() !== "open" && !_started) {
    _client.connect();
    _started = true;
    dbg.log("ws", "singleton connect", { url, reason });
  }
  return { client: _client, bus: _bus, api: _api };
}

// React to backend/domain changes from endpoints
function onEndpointsUpdate() {
  if (!_client) return;
  const prev = _client.url();
  _client.setUrl();
  const next = _client.url();
  if (next && next !== prev) {
    dbg.log("ws", "singleton endpoints changed  reconnect", { prev, next });
    _client.reconnect("endpoints-updated");
  } else if (next && _client.status() !== "open") {
    _client.connect();
  }
}

if (typeof window !== "undefined") {
  window.addEventListener("savva:endpoints-updated", onEndpointsUpdate);

  // Dev aid: expose runtime for quick poking
  window.__ws = {
    get client() { return _client; },
    get bus() { return _bus; },
    get api() { return _api; },
    start: ensureWsStarted,
  };
}

export function getWsClient() { return ensureWsStarted().client; }
export function getWsApi()    { return ensureWsStarted().api; }
export function onAlert(type, fn){ return ensureWsStarted().bus.on(type, fn); }
export function offAlert(type, fn){ return ensureWsStarted().bus.off(type, fn); }
</file>

<file path="src/net/wsUrl.js">
// File: src/net/wsUrl.js
export function toWsUrl(backendHttpUrl, { path = "/ws", query = {} } = {}) {
  if (!backendHttpUrl) return "";
  const u = new URL(backendHttpUrl);
  u.protocol = u.protocol === "https:" ? "wss:" : "ws:";
  const basePath = u.pathname.endsWith("/") ? u.pathname : (u.pathname + "/");
  const wsPath = path.startsWith("/") ? path.slice(1) : path;
  u.pathname = basePath + wsPath;

  const params = new URLSearchParams(u.search);
  for (const [k, v] of Object.entries(query)) {
    if (v != null && v !== "") params.set(k, String(v));
  }
  u.search = params.toString() ? `?${params.toString()}` : "";
  return u.toString();
}
</file>

<file path="src/routing/hashRouter.js">
import { createSignal, onCleanup, onMount } from "solid-js";

function readHashPath() {
  const raw = window.location.hash || "";
  return raw.replace(/^#/, "") || "/";
}

const [route, setRoute] = createSignal(readHashPath());

function setFromHash() {
  setRoute(readHashPath());
}

export function navigate(path, { replace = false } = {}) {
  const target = path.startsWith("#") ? path : `#${path}`;
  if (replace) window.location.replace(target);
  else window.location.hash = path.startsWith("#") ? path.slice(1) : path;
}

export function useHashRouter() {
  onMount(() => {
    window.addEventListener("hashchange", setFromHash);
  });
  onCleanup(() => {
    window.removeEventListener("hashchange", setFromHash);
  });
  return { route, navigate };
}
</file>

<file path="src/routing/tabRoutes.js">
// src/routing/tabRoutes.js
// Tiny helpers for tab <-> URL
export const TAB_PREFIX = "/t";

function slug(s) {
  return String(s || "").trim().toLowerCase();
}

/** e.g., "leaders" -> "/t/leaders" */
export function tabPath(idOrType) {
  const key = slug(idOrType);
  return `${TAB_PREFIX}/${encodeURIComponent(key)}`;
}

/** If route is "/t/<key>" returns "<key>", else "" */
export function tabKeyFromRoute(route) {
  const r = String(route || "");
  if (!r.startsWith(TAB_PREFIX + "/")) return "";
  const key = r.slice((TAB_PREFIX + "/").length);
  return decodeURIComponent(key || "");
}
</file>

<file path="src/theme/FaviconLoader.jsx">
// src/theme/FaviconLoader.jsx
import { createEffect, onCleanup } from "solid-js";
import { useApp } from "../context/AppContext.jsx";
import { dbg } from "../utils/debug";

const ID = {
  apple:   "savva-fav-apple",
  icon16:  "savva-fav-16",
  icon32:  "savva-fav-32",
  base:    "savva-fav-base",
  manifest:"savva-fav-manifest",
  mask:    "savva-fav-mask",
};

function ensureHeadEl(tag, id) {
  let el = document.getElementById(id);
  if (!el) {
    el = document.createElement(tag);
    el.id = id;
    el.setAttribute("data-savva", "1");
    (document.head || document.getElementsByTagName("head")[0]).appendChild(el);
  }
  return el;
}
function removeEl(id) {
  const el = document.getElementById(id);
  if (el?.parentNode) el.parentNode.removeChild(el);
}

function setOrRemoveLink(id, rel, href, attrs = {}) {
  if (!href) return removeEl(id);
  const el = ensureHeadEl("link", id);
  el.setAttribute("rel", rel);
  el.setAttribute("href", href);
  // clean attrs we may set
  ["sizes", "type", "color", "crossorigin"].forEach((a) => el.removeAttribute(a));
  Object.entries(attrs).forEach(([k, v]) => v != null && el.setAttribute(k, v));
}

function slugMetaId(name) {
  return "savva-meta-" + String(name || "").toLowerCase().replace(/[^a-z0-9_-]+/g, "-");
}
function setOrRemoveMeta(name, content) {
  const id = slugMetaId(name);
  if (!content) return removeEl(id);
  const el = ensureHeadEl("meta", id);
  el.setAttribute("name", name);
  el.setAttribute("content", content);
}

export default function FaviconLoader() {
  const app = useApp();

  createEffect(() => {
    const prefix = app.domainAssetsPrefix?.() || "";
    const cfg    = app.domainAssetsConfig?.();
    const fav    = cfg?.favicon || null;
    const revKey = `${prefix}|${cfg?.assets_cid || cfg?.cid || ""}`;

    const withRev = (relPath) => {
      if (!relPath) return "";
      const abs = app.assetUrl?.(relPath);
      if (!abs) return "";
      return `${abs}${abs.includes("?") ? "&" : "?"}rev=${encodeURIComponent(revKey)}`;
    };

    // Resolve all hrefs up front
    const hrefs = {
      apple:    fav?.["apple-touch-icon"] ? withRev(fav["apple-touch-icon"]) : "",
      icon16:   fav?.["16"] ? withRev(fav["16"]) : "",
      icon32:   fav?.["32"] ? withRev(fav["32"]) : "",
      base:     fav?.base ? withRev(fav.base) : "",
      manifest: fav?.manifest ? withRev(fav.manifest) : "",
      mask:     fav?.["mask-icon"]?.href ? withRev(fav["mask-icon"].href) : "",
    };

    dbg.log("assets", "FaviconLoader  apply", {
      prefix, revKey,
      hasFavConfig: !!fav,
      hrefs,
    });

    // Links
    setOrRemoveLink(ID.apple, "apple-touch-icon", hrefs.apple);
    setOrRemoveLink(ID.icon16, "icon", hrefs.icon16, { sizes: "16x16", type: "image/png" });
    setOrRemoveLink(ID.icon32, "icon", hrefs.icon32, { sizes: "32x32", type: "image/png" });
    setOrRemoveLink(ID.base,   "icon", hrefs.base,   { type: "image/x-icon" });
    setOrRemoveLink(ID.manifest, "manifest", hrefs.manifest);
    setOrRemoveLink(ID.mask, "mask-icon", hrefs.mask, { color: fav?.["mask-icon"]?.color || undefined });

    // Meta (generic list; we only manage our own <meta> with data-savva/id)
    const metaList = Array.isArray(fav?.meta) ? fav.meta : [];
    const keepIds = new Set();
    metaList.forEach((m) => {
      if (m && m.name && m.content != null) {
        setOrRemoveMeta(m.name, String(m.content));
        keepIds.add(slugMetaId(m.name));
      }
    });
    // Remove any previous managed meta not present anymore
    const prevManaged = Array.from(document.querySelectorAll('meta[id^="savva-meta-"][data-savva="1"]'));
    prevManaged.forEach((el) => { if (!keepIds.has(el.id)) el.parentNode?.removeChild(el); });

    // If theres no favicon section at all, drop our managed nodes and keep index.html default
    if (!fav) {
      Object.values(ID).forEach(removeEl);
      prevManaged.forEach((el) => el.parentNode?.removeChild(el));
    }
  });

  onCleanup(() => {
    // Remove the nodes we manage (so a different shell can take over if unmounted)
    Object.values(ID).forEach(removeEl);
    const prevManaged = Array.from(document.querySelectorAll('meta[id^="savva-meta-"][data-savva="1"]'));
    prevManaged.forEach((el) => el.parentNode?.removeChild(el));
  });

  return null;
}
</file>

<file path="src/theme/GoogleAnalyticsLoader.jsx">
// src/theme/GoogleAnalyticsLoader.jsx
import { createEffect, onCleanup } from "solid-js";
import { useApp } from "../context/AppContext.jsx";
import { dbg } from "../utils/debug";

const SRC_ID  = "savva-ga-src";
const INIT_ID = "savva-ga-init";

function removeNode(id) {
  const el = document.getElementById(id);
  if (el && el.parentNode) el.parentNode.removeChild(el);
}

export default function GoogleAnalyticsLoader() {
  const app = useApp();

  createEffect(() => {
    const cfg = app.domainAssetsConfig?.(); // parsed per-domain config.yaml
    const tag = String(cfg?.GA_tag || cfg?.ga_tag || "").trim();

    const prevSrc  = document.getElementById(SRC_ID);
    const prevInit = document.getElementById(INIT_ID);

    // If tag is empty  remove our scripts (if any) and stop.
    if (!tag) {
      if (prevSrc || prevInit) {
        removeNode(SRC_ID);
        removeNode(INIT_ID);
        dbg.log("analytics", "GA disabled (no tag in config)");
      }
      return;
    }

    // If already loaded for the same tag  nothing to do.
    if (prevSrc?.getAttribute("data-ga-id") === tag && prevInit?.getAttribute("data-ga-id") === tag) {
      return;
    }

    // Replace previous GA scripts if tag changed.
    removeNode(SRC_ID);
    removeNode(INIT_ID);

    // Load gtag.js
    const s1 = document.createElement("script");
    s1.id = SRC_ID;
    s1.async = true;
    s1.src = `https://www.googletagmanager.com/gtag/js?id=${encodeURIComponent(tag)}`;
    s1.setAttribute("data-ga-id", tag);
    (document.head || document.documentElement).appendChild(s1);

    // Init + first config
    const s2 = document.createElement("script");
    s2.id = INIT_ID;
    s2.setAttribute("data-ga-id", tag);
    s2.text =
      `window.dataLayer = window.dataLayer || [];` +
      `function gtag(){dataLayer.push(arguments);} ` +
      `gtag('js', new Date()); ` +
      `gtag('config', '${tag}', { 'anonymize_ip': true });`;
    (document.head || document.documentElement).appendChild(s2);

    // Simple SPA page_view on hash route changes
    const onHash = () => {
      try {
        window.gtag && window.gtag('config', tag, { page_path: location.pathname + location.hash });
      } catch {}
    };
    window.addEventListener("hashchange", onHash);

    dbg.log("analytics", "GA enabled", { tag });

    // Clean the event handler when the effect re-runs
    onCleanup(() => {
      window.removeEventListener("hashchange", onHash);
    });
  });

  // Remove our scripts if component unmounts
  onCleanup(() => {
    removeNode(SRC_ID);
    removeNode(INIT_ID);
  });

  return null;
}
</file>

<file path="src/utils/assetLoader.js">
// src/utils/assetLoader.js
import { parse } from "yaml";
import { fetchWithTimeout } from "./net";

/**
 * Load a resource from the active domain assets (or domain_default fallback).
 * @param {object} app useApp() context
 * @param {string} relPath relative path inside the asset pack (e.g. "tabs.yaml")
 * @param {object} opts { type: "yaml"|"json"|"text", timeoutMs?: number }
 */
export async function loadAssetResource(app, relPath, opts = {}) {
  const url = app.assetUrl(relPath);
  const timeoutMs = opts.timeoutMs || 8000;
  const res = await fetchWithTimeout(url, { timeoutMs });

  if (!res.ok) {
    throw new Error(`Asset fetch failed: ${url} (${res.status})`);
  }

  const text = await res.text();

  switch (opts.type) {
    case "yaml":
      return parse(text) || null;
    case "json":
      return JSON.parse(text);
    case "text":
    default:
      return text;
  }
}
</file>

<file path="src/vite-env.d.js">
/// <reference types="vite/client" />
</file>

<file path="README.md">
## Usage

```bash
$ npm install # or pnpm install or yarn install
```

### Learn more on the [Solid Website](https://solidjs.com) and come chat with us on our [Discord](https://discord.com/invite/solidjs)

## Available Scripts

In the project directory, you can run:

### `npm run dev`

Runs the app in the development mode.<br>
Open [http://localhost:5173](http://localhost:5173) to view it in the browser.

### `npm run build`

Builds the app for production to the `dist` folder.<br>
It correctly bundles Solid in production mode and optimizes the build for the best performance.

The build is minified and the filenames include the hashes.<br>
Your app is ready to be deployed!

## Deployment

Learn more about deploying your application with the [documentations](https://vite.dev/guide/static-deploy.html)
</file>

<file path="tsconfig.app.json">
{
  "compilerOptions": {
    "tsBuildInfoFile": "./node_modules/.tmp/tsconfig.app.tsbuildinfo",
    "target": "ES2022",
    "useDefineForClassFields": true,
    "module": "ESNext",
    "lib": ["ES2022", "DOM", "DOM.Iterable"],
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "verbatimModuleSyntax": true,
    "moduleDetection": "force",
    "noEmit": true,
    "jsx": "preserve",
    "jsxImportSource": "solid-js",

    /* Linting */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "erasableSyntaxOnly": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedSideEffectImports": true
  },
  "include": ["src"]
}
</file>

<file path="tsconfig.node.json">
{
  "compilerOptions": {
    "tsBuildInfoFile": "./node_modules/.tmp/tsconfig.node.tsbuildinfo",
    "target": "ES2023",
    "lib": ["ES2023"],
    "module": "ESNext",
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "verbatimModuleSyntax": true,
    "moduleDetection": "force",
    "noEmit": true,

    /* Linting */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "erasableSyntaxOnly": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedSideEffectImports": true
  },
  "include": ["vite.config.js"]
}
</file>

<file path="public/dev_docs/en/index.md">
# SAVVA Developer Documentation

Welcome to the **SAVVA Platform** developer docs.


## What is SAVVA?

SAVVA is an **open-source platform** for building next-generation social networks.  
Unlike traditional platforms, SAVVA combines **blockchain** and **IPFS** to create a decentralized, trustable, and censorship-resistant foundation.

- **Blockchain-anchored posts**  
  Every piece of content is registered on-chain and signed with the authors cryptographic key. This ensures authenticity and makes it possible to trust that the post truly comes from its stated author.

- **Decentralized storage with IPFS**  
  Content is stored in the InterPlanetary File System rather than in a single companys database. This removes single points of failure and makes the system more resilient.

Together, blockchain and IPFS form a new kind of social network: one without centralized control, without a single company behind it, and without a pressure point that can be exploited.


## About This Documentation

This is **developer documentation**, not end-user help.  
SAVVA is open source, and we actively encourage developers to fork, extend, and adapt the codebase.  

Here youll find:

- The **core principles** behind the architecture.  
- How the **interfaces and APIs** are structured.  
- Best practices for extending and integrating the platform.

If you are a developer exploring SAVVA, this is the place to start. 
</file>

<file path="public/dev_docs/en/sidebar.yaml">
# public/dev_docs/en/sidebar.yaml
sections:
  - title: Getting Started
    items:
      - label: Overview
        file: index.md
      - label: Setup
        file: getting-started.md

  - title: Core Concepts
    items:
      - label: Overview
        file: core-concepts/index.md
      - label: App initialization & backend connect
        file: core-concepts/app-init.md
      - label: Working with domains
        file: core-concepts/domain.md
</file>

<file path="public/domain_default/config.yaml">
logo:
  light: images/logo_light.png
  dark: images/logo_dark.png
  light_mobile: images/logo_light.png
  dark_mobile: images/logo_dark.png
favicon:
  apple-touch-icon: favicon/apple-touch-icon.png
  16: favicon/favicon-16x16.png
  32: favicon/favicon-32x32.png
  manifest: favicon/site.webmanifest
  mask-icon:
    href: favicon/safari-pinned-tab.svg
    color: '#5bbad5'
  base: favicon/favicon.ico
  meta:
    - name: msapplication-TileColor
      content: '#da532c'
    - name: theme-color
      content: '#ffffff'
GA_tag: G-XDSTY1ND4P
modules:
  content_lists: modules/content_lists.yaml
  categories: modules/categories.yaml
  tabs: modules/tabs.yaml
default_locale: en
locales:
  - code: en
    name: English
    title: 'SAVVA.APP - Beyond Likes Social'
    dictionary: i18n/en.yaml
  - code: ru
    name: 
    title: 'SAVVA.APP -   '
    dictionary: i18n/ru.yaml
  - code: fr
    name: Franais
    title: 'SAVVA.APP - Au-del des likes'
    dictionary: i18n/fr.yaml
  - code: ua
    name: 
    title: 'SAVVA.APP -   '
    dictionary: i18n/ua.yaml
</file>

<file path="scripts/release.mjs">
// scripts/release.mjs
import fs from "node:fs";
import path from "node:path";
import { execSync } from "node:child_process";
import dotenv from "dotenv";

const ROOT = process.cwd();
dotenv.config({ path: path.join(ROOT, ".env") });

const VERSION_FILE = path.join(ROOT, "src", "version.js");
const MAIN_BRANCH = process.env.GIT_MAIN_BRANCH || "main";
const PROD_BRANCH = process.env.PROD_BRANCH || "Prod";

const DEPLOY_HOST = process.env.DEPLOY_HOST || "";
const DEPLOY_USER = process.env.DEPLOY_USER || "";
const DEPLOY_PATH = process.env.DEPLOY_PATH || "";
const DEPLOY_PORT = process.env.DEPLOY_PORT || "";
const DEPLOY_SSH_KEY = process.env.DEPLOY_SSH_KEY || "";

function sh(cmd, opts = {}) {
  console.log(`$ ${cmd}`);
  return execSync(cmd, { stdio: "inherit", ...opts });
}

function readVersion() {
  const text = fs.readFileSync(VERSION_FILE, "utf8");
  const m = text.match(/APP_VERSION\s*=\s*["'`](\d+)\.(\d+)["'`]/);
  if (!m) throw new Error("Could not parse APP_VERSION in src/version.js");
  return { major: Number(m[1]), minor: Number(m[2]), text };
}

function writeVersion(major, minor, prevText) {
  const next = `${major}.${minor}`;
  const out = prevText.replace(/APP_VERSION\s*=\s*["'`](\d+\.\d+)["'`]/, `APP_VERSION = "${next}"`);
  fs.writeFileSync(VERSION_FILE, out, "utf8");
  return next;
}

function runI18nScripts() {
  console.log("Running i18n scripts...");
  sh("node scripts/i18n.mjs");
  sh("node scripts/i18n-docs.mjs");
}

function build() {
  sh("npm run build");
}

function gitCommitAndPush(version) {
  try { sh("git add -A"); } catch {}
  try { sh(`git commit -m "release: v${version}"`); }
  catch { console.warn("No changes to commit."); }
  // Push current branch
  try { sh("git rev-parse --abbrev-ref HEAD"); } catch {}
  try { sh("git push"); } catch {}
  // Also push HEAD to Prod branch (without switching)
  try { sh(`git push origin HEAD:${PROD_BRANCH}`); } catch {}
}

function deploy() {
  if (!DEPLOY_HOST || !DEPLOY_USER || !DEPLOY_PATH) {
    console.error("Missing DEPLOY_HOST / DEPLOY_USER / DEPLOY_PATH in .env  skipping SCP.");
    return;
  }
  const keyOpt = DEPLOY_SSH_KEY ? `-i "${DEPLOY_SSH_KEY}"` : "";
  const portOpt = DEPLOY_PORT ? `-P ${DEPLOY_PORT}` : "";

  // Ensure path exists, then scp
  sh(`ssh ${keyOpt} ${portOpt} ${DEPLOY_USER}@${DEPLOY_HOST} "mkdir -p '${DEPLOY_PATH}'"`);
  sh(`scp ${keyOpt} ${portOpt} -r dist/* ${DEPLOY_USER}@${DEPLOY_HOST}:"${DEPLOY_PATH}/"`);
}

(async function main() {
  const { major, minor, text } = readVersion();
  const nextVersion = writeVersion(major, minor + 1, text);
  console.log(`Bumped version to ${nextVersion}`);

  runI18nScripts();
  build();
  gitCommitAndPush(nextVersion);
  deploy();

  console.log(`Done. Released v${nextVersion}.`);
})().catch((err) => {
  console.error(err);
  process.exit(1);
});
</file>

<file path="src/blockchain/chainLogos.js">
// src/blockchain/chainLogos.js
export const CHAIN_LOGOS = {
  1: "/assets/chain_logos/ethereum.svg", // Ethereum Mainnet
  943: "/assets/chain_logos/puilsechain-test-v4.svg", // PulseChain Testnet
  369: "/assets/chain_logos/pulsechain.svg", // PulseChain Mainnet
  // Add more as you need
};

export function getChainLogo(chainId) {
  return CHAIN_LOGOS[chainId] || null;
}
</file>

<file path="src/blockchain/chains.js">
// src/blockchain/chains.js
export const CHAINS = {
  943: {
    id: 943,
    chainId: 943, // required by wallet.js
    name: "PulseChain Testnet v4",
    rpcUrls: ["https://rpc.v4.testnet.pulsechain.com"],
    nativeCurrency: { name: "Test Pulse", symbol: "tPLS", decimals: 18 },
    // wallet_addEthereumChain expects an array of URLs, not objects
    blockExplorers: ["https://scan.v4.testnet.pulsechain.com"],
  },
  369: {
    id: 369,
    chainId: 369, // required by wallet.js
    name: "PulseChain",
    rpcUrls: ["https://rpc.pulsechain.com"],
    nativeCurrency: { name: "Pulse", symbol: "PLS", decimals: 18 },
    blockExplorers: ["https://scan.pulsechain.com"],
  },
  // Add more chains as needed
};

/**
 * Return chain meta in the shape expected by switchOrAddChain():
 * {
 *   chainId: number, name: string, nativeCurrency, rpcUrls: string[],
 *   blockExplorers: string[]
 * }
 */
export function getChainMeta(chainId) {
  const raw = CHAINS[chainId];
  if (!raw) return null;

  // normalize shapes to be resilient to older entries
  const chainIdNum = raw.chainId ?? raw.id ?? Number(chainId);
  const rpcUrls = Array.isArray(raw.rpcUrls)
    ? raw.rpcUrls
    : raw.rpcUrls ? [raw.rpcUrls] : [];

  let explorers = [];
  if (Array.isArray(raw.blockExplorers)) {
    explorers = raw.blockExplorers
      .map((x) => (typeof x === "string" ? x : x?.url))
      .filter(Boolean);
  } else if (Array.isArray(raw.blockExplorerUrls)) {
    explorers = raw.blockExplorerUrls.filter(Boolean);
  }

  return {
    chainId: chainIdNum,
    name: raw.name,
    nativeCurrency: raw.nativeCurrency,
    rpcUrls,
    blockExplorers: explorers,
  };
}
</file>

<file path="src/blockchain/wallet.js">
// src/blockchain/wallet.js
import { createSignal } from "solid-js";

const [walletAccount, setWalletAccount] = createSignal(null);
const [walletChainId, setWalletChainId] = createSignal(null);

export function isWalletAvailable() {
  return typeof window !== "undefined" && !!window.ethereum;
}

function hexChainId(n) {
  const id = Number(n);
  if (!Number.isFinite(id)) throw new Error(`Invalid chain id: ${n}`);
  return "0x" + id.toString(16);
}

let listenersReady = false;
function setupListeners() {
  const eth = window.ethereum;
  if (!eth || listenersReady) return;
  eth.on?.("accountsChanged", (accs) => {
    setWalletAccount(accs?.[0] || null);
  });
  eth.on?.("chainChanged", (id) => {
    const n = typeof id === "string" ? parseInt(id, 16) : +id;
    setWalletChainId(Number.isFinite(n) ? n : null);
  });
  listenersReady = true;
}

export async function eagerConnect() {
  const eth = window.ethereum;
  if (!eth) return false;
  setupListeners();
  try {
    const [accounts, chainIdHex] = await Promise.all([
      eth.request({ method: "eth_accounts" }),
      eth.request({ method: "eth_chainId" }).catch(() => null),
    ]);
    if (chainIdHex) {
      const n = parseInt(chainIdHex, 16);
      setWalletChainId(Number.isFinite(n) ? n : null);
    }
    if (accounts && accounts[0]) {
      setWalletAccount(accounts[0]);
      return true;
    }
    setWalletAccount(null);
    return false;
  } catch {
    return false;
  }
}

export async function connectWallet() {
  const eth = window.ethereum;
  if (!eth) throw new Error("No Ethereum wallet found");
  setupListeners();
  const accounts = await eth.request({ method: "eth_requestAccounts" });
  const chainIdHex = await eth.request({ method: "eth_chainId" }).catch(() => null);
  if (chainIdHex) {
    const n = parseInt(chainIdHex, 16);
    setWalletChainId(Number.isFinite(n) ? n : null);
  }
  setWalletAccount(accounts?.[0] || null);
}

/**
 * Switch to a chain; if the wallet doesn't know it, try to add it.
 * meta = {
 *   chainId: number,
 *   name: string,
 *   nativeCurrency: { name, symbol, decimals },
 *   rpcUrls: string[],
 *   blockExplorers?: string[]
 * }
 */
export async function switchOrAddChain(meta) {
  const eth = window.ethereum;
  if (!eth) throw new Error("No Ethereum wallet found");
  if (!meta || !meta.chainId) throw new Error("Missing chain metadata");

  const chainIdHexVal = hexChainId(meta.chainId);
  try {
    await eth.request({
      method: "wallet_switchEthereumChain",
      params: [{ chainId: chainIdHexVal }],
    });
  } catch (e) {
    // 4902 = Unrecognized chain
    const code = e?.code ?? e?.data?.originalError?.code;
    if (code === 4902) {
      await eth.request({
        method: "wallet_addEthereumChain",
        params: [
          {
            chainId: chainIdHexVal,
            chainName: meta.name || `Chain ${meta.chainId}`,
            nativeCurrency: meta.nativeCurrency || { name: "ETH", symbol: "ETH", decimals: 18 },
            rpcUrls: meta.rpcUrls || [],
            blockExplorerUrls: meta.blockExplorers || [],
          },
        ],
      });
    } else {
      throw e;
    }
  }

  // update signal with the (new) chain id
  try {
    const cid = await eth.request({ method: "eth_chainId" });
    if (cid) {
      const n = parseInt(cid, 16);
      setWalletChainId(Number.isFinite(n) ? n : null);
    }
  } catch { /* ignore */ }
}

export { walletAccount, walletChainId };
</file>

<file path="src/components/docs/DocsContent.jsx">
// src/components/docs/DocsContent.jsx
import { createMemo, createResource, Show } from "solid-js";
import { useApp } from "../../context/AppContext.jsx";
import MarkdownView from "./MarkdownView.jsx";
import DocsPager from "./DocsPager.jsx";

async function fetchMd({ lang, relPath }) {
  const clean = String(relPath || "index.md").replace(/^\/*/, "");
  const res = await fetch(`/dev_docs/${lang}/${clean}`, { cache: "no-store" });
  if (!res.ok) return { ok: false, text: `# 404\n\n/dev_docs/${lang}/${clean}` };
  return { ok: true, text: await res.text() };
}

export default function DocsContent(props) {
  const app = useApp();
  const lang = createMemo(() => (app.lang?.() || "en").toLowerCase());
  const params = createMemo(() => ({ lang: lang(), relPath: props.relPath }));
  const [doc] = createResource(params, fetchMd);

  return (
    <div class="p-4">
      <Show when={!doc.loading} fallback={
        <div class="text-sm text-[hsl(var(--muted-foreground))]">{app.t("common.loading")}</div>
      }>
        <MarkdownView markdown={doc()?.text || ""} />
        {/* Pager */}
        <DocsPager activeRelPath={props.relPath} onPick={props.onPick} />
      </Show>
    </div>
  );
}
</file>

<file path="src/components/docs/DocsPager.jsx">
// src/components/docs/DocsPager.jsx
import { createMemo, createResource, Show } from "solid-js";
import { useApp } from "../../context/AppContext.jsx";

async function fetchSidebar(lang) {
  const res = await fetch(`/dev_docs/${lang}/sidebar.yaml`, { cache: "no-store" });
  if (!res.ok) return { sections: [] };
  const text = await res.text();
  try {
    const y = (await import("js-yaml")).default.load(text) || {};
    if (Array.isArray(y.sections)) return { sections: y.sections };
    if (Array.isArray(y.items)) return { sections: [{ title: "Docs", items: y.items }] };
    if (Array.isArray(y)) return { sections: [{ title: "Docs", items: y }] };
  } catch {}
  return { sections: [] };
}

export default function DocsPager(props) {
  const app = useApp();
  const lang = createMemo(() => (app.lang?.() || "en").toLowerCase());
  const [data] = createResource(lang, fetchSidebar);

  const flat = createMemo(() => {
    const sections = data()?.sections || [];
    const items = [];
    sections.forEach((s) => (s.items || []).forEach((it) => {
      const label = it.label || it.title || it.file || "";
      const file  = it.file || it.path  || "";
      if (file) items.push({ label, file, section: s.title || "" });
    }));
    return items;
  });

  const nav = createMemo(() => {
    const list = flat();
    const idx = list.findIndex((x) => String(x.file) === String(props.activeRelPath || ""));
    if (idx < 0) return { prev: null, next: null };
    return { prev: list[idx - 1] || null, next: list[idx + 1] || null };
  });

  const go = (file) => props.onPick?.(file);

  return (
    <Show when={!data.loading && (nav().prev || nav().next)}>
      <nav class="mt-8 pt-4 border-t border-[hsl(var(--border))] flex items-stretch justify-between gap-3 text-sm">
        {/* Prev (left) */}
        <div class="min-w-0 flex-1">
          <Show when={nav().prev}>
            {(p) => (
              <button
                type="button"
                class="w-full rounded-md px-3 py-2 bg-[hsl(var(--muted))] hover:bg-[hsl(var(--accent))] text-left"
                onClick={() => go(p().file)}
                aria-label={app.t("docs.prev")}
                title={p().label}
              >
                <div class="flex items-start gap-2">
                  <span aria-hidden="true"></span>
                  <div class="min-w-0">
                    <div class="font-medium whitespace-normal break-words leading-snug">
                      {p().label}
                    </div>
                    <div class="opacity-70 text-xs whitespace-normal break-words leading-snug">
                      {p().section}
                    </div>
                  </div>
                </div>
              </button>
            )}
          </Show>
        </div>

        {/* Next (right) */}
        <div class="min-w-0 flex-1 text-right">
          <Show when={nav().next}>
            {(n) => (
              <button
                type="button"
                class="w-full rounded-md px-3 py-2 bg-[hsl(var(--muted))] hover:bg-[hsl(var(--accent))]"
                onClick={() => go(n().file)}
                aria-label={app.t("docs.next")}
                title={n().label}
              >
                <div class="flex items-start gap-2 justify-end">
                  <div class="min-w-0">
                    <div class="font-medium whitespace-normal break-words leading-snug text-right">
                      {n().label}
                    </div>
                    <div class="opacity-70 text-xs whitespace-normal break-words leading-snug text-right">
                      {n().section}
                    </div>
                  </div>
                  <span aria-hidden="true"></span>
                </div>
              </button>
            )}
          </Show>
        </div>
      </nav>
    </Show>
  );
}
</file>

<file path="src/components/docs/MarkdownView.jsx">
// src/components/docs/MarkdownView.jsx
import { createSignal, onMount, onCleanup } from "solid-js";
import { useApp } from "../../context/AppContext.jsx";

/* Inject a copy button into each <pre> before stringify */
function rehypeCopyButton() {
  return (tree) =>
    import("unist-util-visit").then(({ visit }) => {
      visit(tree, "element", (node) => {
        if (node.tagName !== "pre") return;
        const exists =
          Array.isArray(node.children) &&
          node.children.some(
            (c) =>
              c?.type === "element" &&
              c?.properties?.className?.includes?.("sv-copy-btn")
          );
        if (exists) return;
        node.children.push({
          type: "element",
          tagName: "button",
          properties: { className: ["sv-copy-btn"], type: "button" },
          children: [{ type: "text", value: "Copy" }],
        });
      });
      return tree;
    });
}

export default function MarkdownView(props) {
  const { t } = useApp();
  const [html, setHtml] = createSignal("");
  let disposed = false;
  let container;

  async function renderMd() {
    try {
      const [
        { unified },
        { default: remarkParse },
        { default: remarkGfm },
        { default: remarkFrontmatter },
        { default: remarkRehype },
        { default: rehypeSlug },
        { default: rehypeAutolinkHeadings },
        { default: rehypePrettyCode },
        { default: rehypeStringify },
        DOMPurify,
      ] = await Promise.all([
        import("unified"),
        import("remark-parse"),
        import("remark-gfm"),
        import("remark-frontmatter"),
        import("remark-rehype"),
        import("rehype-slug"),
        import("rehype-autolink-headings"),
        import("rehype-pretty-code"),
        import("rehype-stringify"),
        import("dompurify"),
      ]);

      // Preserve Shiki styles: allow CSS variables and var() uses on style attrs
      DOMPurify.default.addHook("uponSanitizeAttribute", (node, data) => {
        if (data.attrName !== "style") return;
        const src = String(data.attrValue || "");
        const safe = [];
        for (const decl of src.split(";")) {
          const i = decl.indexOf(":");
          if (i <= 0) continue;
          const prop = decl.slice(0, i).trim().toLowerCase();
          const val = decl.slice(i + 1).trim();
          const isVarDecl = prop.startsWith("--"); // e.g., --shiki-*
          const isVarUse = /^var\(/i.test(val);
          const isColorProp =
            prop === "color" ||
            prop === "background" ||
            prop === "background-color";
          if (isVarDecl || isVarUse || isColorProp) safe.push(`${prop}:${val}`);
        }
        data.attrValue = safe.join(";");
        if (data.attrValue) data.keepAttr = true;
      });

      const processor = unified()
        .use(remarkParse)
        .use(remarkFrontmatter, ["yaml", "toml"])
        .use(remarkGfm)
        .use(remarkRehype, { allowDangerousHtml: true })
        .use(rehypeSlug)
        .use(rehypeAutolinkHeadings, { behavior: "wrap" })
        .use(rehypePrettyCode, {
          keepBackground: true,
          theme: { light: "github-light", dark: "github-dark" },
        })
        .use(rehypeCopyButton)
        .use(rehypeStringify, { allowDangerousHtml: true });

      const file = await processor.process(String(props.markdown || ""));
      const rawHtml = String(file);

      const safe = DOMPurify.default.sanitize(rawHtml, {
        USE_PROFILES: { html: true },
        ADD_ATTR: ["style", "data-theme", "data-language", "data-line"],
        ALLOW_DATA_ATTR: true,
      });

      if (!disposed) setHtml(safe);
    } catch {
      const safe = `<pre>${String(props.markdown || "")
        .replace(/&/g, "&amp;")
        .replace(/</g, "&lt;")}</pre>`;
      if (!disposed) setHtml(safe);
    }
  }

  function copy(text) {
    if (navigator.clipboard?.writeText) return navigator.clipboard.writeText(text);
    return new Promise((res, rej) => {
      try {
        const ta = document.createElement("textarea");
        ta.value = text;
        ta.style.position = "fixed";
        ta.style.opacity = "0";
        document.body.appendChild(ta);
        ta.select();
        document.execCommand("copy");
        document.body.removeChild(ta);
        res();
      } catch (e) {
        rej(e);
      }
    });
  }

  function onClick(e) {
    const btn = e.target.closest?.(".sv-copy-btn");
    if (!btn) return;
    const code = btn.closest("pre")?.querySelector("code");
    const text = code ? code.innerText : "";
    copy(text).then(() => {
      const prev = btn.textContent;
      btn.textContent = t("docs.copied") || "Copied";
      setTimeout(() => {
        btn.textContent = t("docs.copy") || prev || "Copy";
      }, 1200);
    });
  }

  function relabelButtons() {
    container?.querySelectorAll(".sv-copy-btn").forEach((b) => {
      b.textContent = t("docs.copy") || "Copy";
      b.title = t("docs.copy") || "Copy";
      b.setAttribute("aria-label", t("docs.copy") || "Copy");
    });
  }

  onMount(async () => {
    await renderMd();
    relabelButtons();
    container?.addEventListener("click", onClick);
  });

  onCleanup(() => {
    disposed = true;
    container?.removeEventListener("click", onClick);
  });

  return (
    <article
      ref={(el) => (container = el)}
      class="sv-docs prose prose-sm md:prose-base max-w-none"
      innerHTML={html()}
      aria-label={t("docs.article")}
    />
  );
}
</file>

<file path="src/components/feed/PostInfo.jsx">
// src/components/feed/PostInfo.jsx
import { Show, createMemo } from "solid-js";
import { formatUnits } from "viem";
import { useApp } from "../../context/AppContext.jsx";
import SavvaTokenIcon from "../ui/icons/SavvaTokenIcon.jsx";
import PostTime from "../ui/PostTime.jsx";
import PostReactions from "../ui/PostReactions.jsx";

function PostComments(props) {
  const count = () => props.item?._raw?.total_childs || 0;
  return (
    <Show when={count() > 0}>
      <div class="flex items-center gap-1 text-xs">
        <span></span>
        <span>{count()}</span>
      </div>
    </Show>
  );
}

function PostRewards(props) {
  const amount = createMemo(() => {
    const rawAmount = props.item?._raw?.fund?.total_author_share;
    if (!rawAmount) return 0;
    const formatted = formatUnits(BigInt(rawAmount), 18);
    return parseFloat(formatted);
  });

  const localizedAmount = createMemo(() => {
    // Access the lang prop to ensure this memo re-runs on language change
    const currentLang = props.lang();
    return amount().toLocaleString(currentLang, {
      minimumFractionDigits: 2,
      maximumFractionDigits: 2,
    });
  });

  return (
    <Show when={amount() > 0}>
      <div class="flex items-center gap-1 text-xs">
        <span>{localizedAmount()}</span>
        <SavvaTokenIcon class="w-3.5 h-3.5" />
      </div>
    </Show>
  );
}

export default function PostInfo(props) {
  const { lang } = useApp();
  const isListMode = () => props.mode === 'list';

  return (
    <div class={`pt-2 flex items-center border-t border-[hsl(var(--border))] ${isListMode() ? 'gap-2' : 'gap-4'}`}>
      <PostTime timestamp={props.item?._raw?.effective_time} format="short" />
      <PostReactions item={props.item} />
      <PostComments item={props.item} />
      <div class="ml-auto">
        <PostRewards item={props.item} lang={lang} />
      </div>
    </div>
  );
}
</file>

<file path="src/components/settings/Assets.jsx">
// src/components/settings/Assets.jsx
import { createSignal, createMemo, Show } from "solid-js";
import { useApp } from "../../context/AppContext.jsx";
import { assessAssets } from "../../utils/assetsDiagnostics";

export default function Assets() {
  const app = useApp();
  const { t } = app;

  const env = createMemo(() => app.assetsEnv?.() || "prod");
  const [busySwitch, setBusySwitch] = createSignal(false);
  async function switchEnv(next) {
    if (next === env()) return;
    try {
      setBusySwitch(true);
      app.setAssetsEnv?.(next);
      await app.refreshDomainAssets?.();
    } finally { setBusySwitch(false); }
  }

  const [busyDiag, setBusyDiag] = createSignal(false);
  const [report, setReport] = createSignal(null);
  const [err, setErr] = createSignal(null);

  async function runDiagnostics() {
    setBusyDiag(true); setErr(null);
    try {
      const r = await assessAssets({
        env: app.assetsEnv?.(),
        assetsBaseUrl: app.assetsBaseUrl?.(),
        selectedDomainName: (() => { const d = app.selectedDomain?.(); return typeof d === "string" ? d : (d?.name || ""); })(),
        domainAssetsPrefixActive: app.domainAssetsPrefix?.(),
        domainAssetsConfig: app.domainAssetsConfig?.(),
        domainAssetsSource: app.domainAssetsSource?.(),
      });
      setReport(r);
    } catch (e) { setErr(e); } finally { setBusyDiag(false); }
  }

  const Row = (props) => (
    <div class="grid grid-cols-[160px_1fr] gap-2 py-1">
      <div class="text-sm text-[hsl(var(--muted-foreground))]">{props.label}</div>
      <div class="text-sm break-all">{props.children}</div>
    </div>
  );

  return (
    <section class="bg-[hsl(var(--card))] text-[hsl(var(--card-foreground))] rounded-lg shadow p-4 space-y-4">
      <div class="flex flex-wrap items-center justify-between gap-3">
        <h3 class="text-lg font-medium">{t("settings.dev.assets.title")}</h3>
        <div class="flex items-center gap-2">
          <span class="text-sm text-[hsl(var(--muted-foreground))]">{t("settings.dev.assets.env")}</span>
          <div class="inline-flex rounded-md border border-[hsl(var(--border))] overflow-hidden">
            <button
              class={`px-3 py-1.5 text-sm ${env() === "prod" ? "bg-[hsl(var(--primary))] text-[hsl(var(--primary-foreground))]" : "text-[hsl(var(--foreground))]"}`}
              disabled={busySwitch()} onClick={() => switchEnv("prod")}
            >
              {t("settings.dev.assets.env.prod")}
            </button>
            <button
              class={`px-3 py-1.5 text-sm border-l border-[hsl(var(--border))] ${env() === "test" ? "bg-[hsl(var(--primary))] text-[hsl(var(--primary-foreground))]" : "text-[hsl(var(--foreground))]"}`}
              disabled={busySwitch()} onClick={() => switchEnv("test")}
            >
              {t("settings.dev.assets.env.test")}
            </button>
          </div>
        </div>
      </div>

      <div class="rounded-md bg-[hsl(var(--muted))] p-3 space-y-1">
        <Row label={t("settings.dev.assets.env")}>{env()}</Row>
        <Row label={t("settings.dev.assets.baseUrl")}>{app.assetsBaseUrl?.() || ""}</Row>
        <Row label={t("settings.dev.assets.prefix.active")}>{app.domainAssetsPrefix?.() || ""}</Row>
        <Row label={t("settings.dev.assets.source")}>{app.domainAssetsSource?.() || ""}</Row>
      </div>

      <div class="flex items-center justify-between">
        <div class="text-sm font-medium">{t("settings.dev.assets.diagnostics.title")}</div>
        <button
          class="px-3 py-1.5 rounded-md border border-[hsl(var(--border))] text-sm hover:bg-[hsl(var(--accent))]"
          onClick={runDiagnostics}
          disabled={busyDiag()}
        >
          {busyDiag() ? t("common.loading") : t("settings.dev.assets.diagnostics.run")}
        </button>
      </div>

      {err() && <div class="text-sm text-[hsl(var(--destructive))]">
        {t("settings.dev.assets.diagnostics.error")}: {String(err())}
      </div>}

      <Show when={report()}>
        <div class="space-y-2">
          <Row label={t("settings.dev.assets.domain")}>{report().domain || ""}</Row>
          <Row label={t("settings.dev.assets.prefix.computed")}>{report().computedDomainPrefix || ""}</Row>

          {/* Active config (what the app is really using) */}
          <Row label={t("settings.dev.assets.configUrl")}>
            <Show when={report().appConfigUrl} fallback={""}>
              <span class="inline-flex items-center gap-2">
                <a href={report().appConfigUrl} target="_blank" rel="noreferrer" class="underline">{report().appConfigUrl}</a>
                <a href={report().appConfigUrl} target="_blank" rel="noreferrer" class="px-2 py-0.5 rounded-md border border-[hsl(var(--border))] text-xs hover:bg-[hsl(var(--accent))]" aria-label={t("settings.dev.assets.configUrl.open")} title={t("settings.dev.assets.configUrl.open")}></a>
              </span>
            </Show>
          </Row>

          {/* Also show the env+domain computed config */}
          <Row label={t("settings.dev.assets.configUrl.computed")}>
            <Show when={report().computedDomainPrefix} fallback={""}>
              <span class="inline-flex items-center gap-2">
                <a href={report().computedDomainPrefix + "config.yaml"} target="_blank" rel="noreferrer" class="underline">
                  {report().computedDomainPrefix + "config.yaml"}
                </a>
                <a href={report().computedDomainPrefix + "config.yaml"} target="_blank" rel="noreferrer" class="px-2 py-0.5 rounded-md border border-[hsl(var(--border))] text-xs hover:bg-[hsl(var(--accent))]" aria-label={t("settings.dev.assets.configUrl.open")} title={t("settings.dev.assets.configUrl.open")}></a>
              </span>
            </Show>
          </Row>

          {/* Checks */}
          <div class="pt-2 text-xs space-y-1">
            <div><b>{t("settings.dev.assets.diagnostics.primary")}</b>: {report().primaryConfig.url}  {report().primaryConfig.exists ? t("common.exists") : t("common.notFound")} ({report().primaryConfig.status})</div>
            <Show when={report().primaryConfig.status === -1 && report().primaryConfig.error}>
              <div class="text-[hsl(var(--muted-foreground))]">{t("settings.dev.assets.diagnostics.noteNetwork")} {report().primaryConfig.error}</div>
            </Show>
            <div><b>{t("settings.dev.assets.diagnostics.default")}</b>: {report().defaultConfig.url}  {report().defaultConfig.exists ? t("common.exists") : t("common.notFound")} ({report().defaultConfig.status})</div>
          </div>

          {/* Summary */}
          <div class="pt-2 text-xs space-y-1">
            <div> {t("settings.dev.assets.diagnostics.hasConfig")}: {String(report().appParsedConfigPresence.hasConfigObject)}</div>
            <div> {t("settings.dev.assets.diagnostics.hasLogos")}: {String(report().appParsedConfigPresence.hasLogos)} ({(report().appParsedConfigPresence.logoFields || []).join(", ") || ""})</div>
            <div> {t("settings.dev.assets.diagnostics.hasLocales")}: {String(report().appParsedConfigPresence.hasLocales)}</div>
            <div> {t("settings.dev.assets.diagnostics.hasTabs")}: {String(report().appParsedConfigPresence.hasTabs)}</div>
            <div> {t("settings.dev.assets.diagnostics.hasCategories")}: {String(report().appParsedConfigPresence.hasCategories)}</div>
            <div> {t("settings.dev.assets.diagnostics.hasFavicon")}: {String(report().appParsedConfigPresence.hasFavicon)}</div>
          </div>

          {/* Sample fetches */}
          <Show when={report().resolvedSamples?.length}>
            <div class="pt-2">
              <div class="text-sm font-semibold">{t("settings.dev.assets.diagnostics.sampleFetches")}</div>
              <ul class="mt-1 space-y-1 text-xs">
                {report().resolvedSamples.map((s) => (
                  <li>{s.kind}: {s.url}  {s.exists ? t("common.ok") : t("common.fail")} ({s.status})</li>
                ))}
              </ul>
            </div>
          </Show>
        </div>
      </Show>
    </section>
  );
}
</file>

<file path="src/components/ui/LangSelector.jsx">
// src/components/ui/LangSelector.jsx
import { For } from "solid-js";
import { useApp } from "../../context/AppContext.jsx";
import { LANG_INFO } from "../../i18n/useI18n";

export default function LangSelector(props) {
  const app = useApp();

  // The component now receives the list of codes directly.
  const codes = () => props.codes || [];
  const value = () => (props.value || app.lang?.() || "").toLowerCase();
  const onChange = (code) => (props.onChange ? props.onChange(code) : app.setLang?.(code));

  return (
    <div class={`themed-segment ${props.class || ""}`} role="radiogroup" aria-label={app.t("rightPane.language")}>
      <For each={codes()}>
        {(code) => {
          const c = String(code).toLowerCase();
          const info = LANG_INFO[c] || { code: c.toUpperCase(), name: c.toUpperCase() };
          const active = () => value() === c;
          return (
            <button
              type="button"
              class={`themed-pill ${active() ? "is-active" : ""}`}
              role="radio"
              aria-checked={active()}
              onClick={() => onChange(c)}
              title={info.name}
            >
              {info.code}
            </button>
          );
        }}
      </For>
    </div>
  );
}
</file>

<file path="src/components/ui/toast.js">
// src/components/ui/toast.js
import { createSignal } from "solid-js";

export const [toasts, setToasts] = createSignal([]); // {id, type, message, details, expanded}

let counter = 0;

export function pushToast({ type = "info", message = "", details = null, autohideMs = 5000 }) {
  const id = ++counter;
  const item = { id, type, message: String(message || ""), details, expanded: false };
  setToasts((curr) => [...curr, item]);

  // MODIFICATION: Removed '&& type !== "error"' to allow the timer to apply to all toast types.
  if (autohideMs > 0) {
    setTimeout(() => dismissToast(id), autohideMs);
  }
  return id;
}

export function dismissToast(id) {
  setToasts((curr) => curr.filter((t) => t.id !== id));
}

export function toggleToast(id) {
  setToasts((curr) =>
    curr.map((t) => (t.id === id ? { ...t, expanded: !t.expanded } : t))
  );
}

/** Convenience: turn any Error (or unknown) into a compact, useful details object */
export function errorDetails(err, extra = {}) {
  if (!err) return extra || {};
  const base = {
    name: err.name,
    message: err.message,
    code: err.code,
    type: err.type,
    status: err.status,
    stack: err.stack,
    cause: err.cause && typeof err.cause === "object" ? {
      name: err.cause.name,
      message: err.cause.message,
      code: err.cause.code,
      status: err.cause.status,
    } : undefined,
  };
  
  if (Array.isArray(err.causes)) {
    base.causes = err.causes.map((e) => ({
      name: e?.name,
      message: e?.message,
      code: e?.code,
      status: e?.status,
      url: e?.url 
    }));
  }
  
  return { ...base, ...extra };
}

/** push an error toast with extracted details */
export function pushErrorToast(err, context = {}) {
  return pushToast({
    type: "error",
    message: err?.message || "Unexpected error",
    details: errorDetails(err, context),
    // MODIFICATION: Changed from 0 to 60000ms (1 minute).
    autohideMs: 60000,
  });
}
</file>

<file path="src/components/ui/UserCard.jsx">
// src/components/ui/UserCard.jsx
import { Show } from "solid-js";
import { useApp } from "../../context/AppContext.jsx";
import IpfsImage from "./IpfsImage.jsx";
import UnknownUserIcon from "./icons/UnknownUserIcon.jsx";
import VerifiedBadge from "./icons/VerifiedBadge.jsx";
import StakerLevelIcon from "./StakerLevelIcon.jsx";

function isVerified(a) {
    return Boolean(a && a.name);
}

export default function UserCard(props) {
    const { t } = useApp();
    const author = () => props.author || {};

    return (
        <Show when={author()}>
            {/* Reduced height from h-10 to h-8 */}
            <div class="flex items-center gap-2 w-full h-8">
                {/* Reduced avatar size from w-8 h-8 to w-7 h-7 */}
                <div class="w-7 h-7 rounded-full overflow-hidden shrink-0 bg-[hsl(var(--muted))]">
                    <Show
                        when={author().avatar}
                        fallback={<UnknownUserIcon class="w-full h-full object-cover" />}
                    >
                        <IpfsImage
                            src={author().avatar}
                            alt={`${author().name || t("default.user")} ${t("default.avatar")}`}
                            class="w-full h-full object-cover"
                        />
                    </Show>
                </div>

                <div class="min-w-0 flex-1">
                    <Show when={author().display_name}>
                        <div class="text-xs truncate text-[hsl(var(--foreground))]">
                            {author().display_name}
                        </div>
                    </Show>

                    <div class="flex items-center gap-1 text-xs text-[hsl(var(--muted-foreground))] min-w-0">
                        <Show when={author().name}>
                            <div class="min-w-0 flex items-center">
                                <span class="truncate uppercase font-semibold">{author().name}</span>
                                <Show when={isVerified(author())}>
                                    <VerifiedBadge class="ml-0.5 w-3.5 h-3.5 shrink-0" />
                                </Show>
                            </div>
                        </Show>

                        <StakerLevelIcon
                            staked={author().staked}
                            class="w-6 h-6 shrink-0 text-[hsl(var(--muted-foreground))]"
                        />
                    </div>
                </div>
            </div>
        </Show>
    );
}
</file>

<file path="src/components/ui/ViewModeToggle.jsx">
// src/components/ui/ViewModeToggle.jsx
import { createSignal } from "solid-js";
import { useApp } from "../../context/AppContext.jsx";

//  Global view mode (list|grid), persisted 
const VIEW_KEY = "content_list_view_mode"; // match your simple style like `lang`, `theme`

function readInitial() {
  let initial = "grid"; // default = grid
  try {
    const v = localStorage.getItem(VIEW_KEY);
    if (v === "list" || v === "grid") initial = v;
    else localStorage.setItem(VIEW_KEY, initial); // write default once so key appears
  } catch {}
  return initial;
}

const [viewMode, setViewModeSignal] = createSignal(readInitial());

function setViewMode(next) {
  const v = next === "list" ? "list" : "grid";
  setViewModeSignal(v);
  try { localStorage.setItem(VIEW_KEY, v); } catch {}
}

// crosstab sync
if (typeof window !== "undefined") {
  window.addEventListener("storage", (e) => {
    if (e.key === VIEW_KEY && (e.newValue === "list" || e.newValue === "grid")) {
      setViewModeSignal(e.newValue);
    }
  });
}

//  Provided SVGs (paths untouched), just color/size inherit 
function ListIcon(props) {
  return (
    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"
         width={props.size || "1.25em"} height={props.size || "1.25em"}
         fill="none" stroke="currentColor" stroke-width="2"
         stroke-linecap="round" stroke-linejoin="round" class={props.class}>
      <path d="M8 6L21 6.00078M8 12L21 12.0008M8 18L21 18.0007M3 6.5H4V5.5H3V6.5ZM3 12.5H4V11.5H3V12.5ZM3 18.5H4V17.5H3V18.5Z" />
    </svg>
  );
}
function GridIcon(props) {
  return (
    <svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"
         width={props.size || "1.25em"} height={props.size || "1.25em"}
         fill="currentColor" class={props.class}>
      <path fill-rule="evenodd" clip-rule="evenodd"
            d="M7 1H1V7H7V1ZM7 9H1V15H7V9ZM9 1H15V7H9V1ZM15 9H9V15H15V9Z" />
    </svg>
  );
}

/**
 * Compact toggle for list/grid view mode.
 * If value/onChange are not provided, uses the global viewMode above.
 */
export default function ViewModeToggle(props) {
  const { t } = useApp();
  const controlled = typeof props.value !== "undefined" && typeof props.onChange === "function";

  const current = () => (controlled ? (props.value === "list" ? "list" : "grid") : viewMode());
  const change = (next) => (controlled ? props.onChange(next) : setViewMode(next));

  const size = props.size === "sm" ? { box: "h-8 w-8", icon: "w-4 h-4" } : { box: "h-9 w-9", icon: "w-5 h-5" };
  const btnCls = (active) =>
    `inline-flex items-center justify-center ${size.box} rounded-md border transition-colors ` +
    (active
      ? "bg-[hsl(var(--primary))] text-[hsl(var(--primary-foreground))] border-[hsl(var(--primary))]"
      : "bg-[hsl(var(--muted))] text-[hsl(var(--foreground))] border-[hsl(var(--border))] hover:bg-[hsl(var(--accent))]");

  return (
    <div class={`inline-flex items-center gap-2 ${props.class || ""}`} role="group" aria-label={t("newTab.view.group")}>
      <button
        type="button"
        class={btnCls(current() === "list")}
        onClick={() => change("list")}
        aria-pressed={current() === "list" ? "true" : "false"}
        aria-label={t("newTab.view.list")}
        title={t("newTab.view.list")}
      >
        <ListIcon class={size.icon} />
      </button>
      <button
        type="button"
        class={btnCls(current() === "grid")}
        onClick={() => change("grid")}
        aria-pressed={current() === "grid" ? "true" : "false"}
        aria-label={t("newTab.view.grid")}
        title={t("newTab.view.grid")}
      >
        <GridIcon class={size.icon} />
      </button>
    </div>
  );
}

export { viewMode, setViewMode };
</file>

<file path="src/dev/AssetDebugTap.jsx">
// src/dev/AssetDebugTap.jsx
/* src/dev/AssetDebugTap.jsx */
import { createEffect } from "solid-js";
import { useApp } from "../context/AppContext.jsx";
import { dbg } from "../utils/debug";

const dn = (d) => (typeof d === "string" ? d : d?.name || "");

export default function AssetDebugTap() {
    const app = useApp();

    // Track & log env
    let prevEnv;
    createEffect(() => {
        const next = app.assetsEnv?.();
        if (prevEnv !== next) {
            dbg.log("assets", "assetsEnv changed:", { prev: prevEnv, next });
            prevEnv = next;
        }
    });

    // Track & log base URL from /info
    let prevBase;
    createEffect(() => {
        const next = app.assetsBaseUrl?.();
        if (prevBase !== next) {
            dbg.log("assets", "assetsBaseUrl changed:", { prev: prevBase, next });
            prevBase = next;
        }
    });

    // Track & log selected domain
    let prevDomain;
    createEffect(() => {
        const next = dn(app.selectedDomain?.());
        if (prevDomain !== next) {
            dbg.log("assets", "selectedDomain changed:", { prev: prevDomain, next });
            prevDomain = next;
        }
    });

    // Track & log ACTIVE prefix the app uses for all assets
    let prevPrefix;
    createEffect(() => {
        const next = app.domainAssetsPrefix?.();
        if (prevPrefix !== next) {
            dbg.log("assets", "domainAssetsPrefix (ACTIVE) changed:", { prev: prevPrefix, next });
            prevPrefix = next;
        }
    });

    // Track & log where the config came from: remote (domain) vs default pack
    let prevSource;
    createEffect(() => {
        const next = app.domainAssetsSource?.();
        if (prevSource !== next) {
            dbg.log("assets", "domainAssetsSource changed:", { prev: prevSource, next });
            prevSource = next;
        }
    });

    // Track & log parsed config.yaml presence and key fields (logos/tabs)
    let prevStamp;
    createEffect(() => {
        const cfg = app.domainAssetsConfig?.();
        const stamp = cfg
            ? JSON.stringify({
                cid: cfg.assets_cid || cfg.cid || null,
                gotLogos: !!(cfg.logos || cfg.logo),
                tabs: !!cfg.modules?.tabs,
            })
            : "null";

        if (prevStamp !== stamp) {
            dbg.group("assets: domainAssetsConfig loaded/changed");
            dbg.log("assets", "summary:", {
                hasConfig: !!cfg,
                hasLogos: !!(cfg?.logos || cfg?.logo),
                tabsPath: cfg?.modules?.tabs || null,
                assets_cid: cfg?.assets_cid || cfg?.cid || null,
            });
            dbg.groupEnd();
            prevStamp = stamp;
        }
    });

    // Nothing to render
    return null;
}
</file>

<file path="src/i18n/fr.js">
// Auto-generated by scripts/i18n.mjs. Do not edit by hand.
export default {
  "app.versionLabel": "Version",
  "brand.name": "SAVVA",
  "categories.all": "Toutes les catgories",
  "common.apply": "Appliquer",
  "common.applying": "Application",
  "common.cancel": "Annuler",
  "common.checking": "Vrification",
  "common.error": "Erreur",
  "common.exists": "Existe",
  "common.fail": "chouer",
  "common.loading": "Chargement",
  "common.notFound": "Non trouv",
  "common.ok": "OK",
  "default.avatar": "Avatar",
  "default.user": "Utilisateur",
  "docs.article": "Article de documentation",
  "docs.copied": "Copi",
  "docs.copy": "Copier",
  "docs.nav": "Docs Dveloppeur",
  "docs.next": "Suivant",
  "docs.prev": "Prcdent",
  "docs.section": "Section",
  "docs.sidebar.empty": "Pas encore de docs. Ajoutez sidebar.yaml sous dev_docs/<lang>/",
  "docs.title": "Documentation dveloppeur",
  "error.connection.message": "L'application n'a pas pu se connecter au serveur backend. Il est peut-tre temporairement hors ligne. Veuillez ressayer plus tard.",
  "error.connection.retry": "Rafrachir la page",
  "error.connection.title": "chec de la connexion",
  "error.ws.message": "Impossible de se connecter. Veuillez ressayer.",
  "error.ws.title": "Erreur de connexion",
  "ipfs.diag.cors.error": "Problme de configuration CORS.",
  "ipfs.diag.cors.name": "Vrification CORS de la passerelle",
  "ipfs.diag.cors.ok": "CORS est configur correctement.",
  "ipfs.diag.fetch.errorFirewall": "chec de la rcupration en raison d'un pare-feu.",
  "ipfs.diag.fetch.name": "Rcupration de la passerelle en direct",
  "ipfs.diag.fetch.ok": "Rcupration russie.",
  "ipfs.diag.fetch.warnSkipped": "Ignor : ABI CID non trouv dans la rponse /info.",
  "ipfs.diag.fix.browser": "S'il fonctionne, vrifiez votre navigateur. Pour Brave, dsactivez les boucliers pour ce site. Pour d'autres navigateurs comme Chrome, vous devrez peut-tre 'Autoriser le contenu non scuris' dans les paramtres du site.",
  "ipfs.diag.fix.cors": "S'il choue toujours, excutez cette commande pour corriger la politique CORS de l'API :",
  "ipfs.diag.fix.daemon": "Tout d'abord, assurez-vous que votre dmon IPFS fonctionne dans un terminal :",
  "ipfs.diag.fix.title": "Pour corriger, excutez ceci dans votre terminal (puis redmarrez le dmon) :",
  "ipfs.diag.liveness.error": "Le nud ne rpond pas.",
  "ipfs.diag.liveness.name": "Vrification de la vivacit de l'API",
  "ipfs.diag.liveness.ok": "Le nud est actif.",
  "ipfs.diag.run": "Excuter les diagnostics",
  "ipfs.diag.title": "Diagnostics du nud IPFS",
  "ipfs.imageNotAvailable": "Image non disponible",
  "main.tabs.empty": "Cet onglet est vide pour l'instant.",
  "main.tabs.loading": "Chargement des onglets",
  "main.tabs.untitled": "Sans titre",
  "menu.open": "Ouvrir le menu",
  "newTab.category": "Catgorie",
  "newTab.view.grid": "Vue en grille",
  "newTab.view.group": "Groupe de vue",
  "newTab.view.list": "Vue en liste",
  "rightPane.language": "Langue",
  "rightPane.settings": "Paramtres",
  "rightPane.switch.backend.help": "L'application rcuprera /info depuis cette URL pour lister les domaines pris en charge.",
  "rightPane.switch.backend.label": "URL du backend",
  "rightPane.switch.backend.placeholder": "https://example.com/api/",
  "rightPane.switch.domain.label": "Domaine",
  "rightPane.switch.domain.website": "Site Web",
  "rightPane.switch.noDomains": "Le backend n'a retourn aucun domaine. Vous pouvez toujours postuler, mais le domaine sera vide.",
  "rightPane.switch.open": "Changer de backend / domaine",
  "rightPane.switch.reload": "Charger les domaines",
  "rightPane.switch.reload.title": "Rcuprer /info et rafrachir la liste des domaines",
  "rightPane.switch.reset": "Rinitialiser aux valeurs par dfaut",
  "rightPane.switch.reset.title": "Effacer la surcharge locale et recharger les valeurs par dfaut depuis default_connect.yaml",
  "rightPane.switch.title": "Changer de backend / domaine",
  "rightPane.switch.validation.domain": "Le domaine ne peut pas tre vide.",
  "rightPane.switch.validation.protocol": "L'URL du backend doit commencer par http:// ou https://",
  "rightPane.theme": "Thme",
  "settings.back": "Retour",
  "settings.dev.assets.baseUrl": "URL de base des actifs",
  "settings.dev.assets.configUrl": "URL de configuration",
  "settings.dev.assets.configUrl.computed": "URL calcule",
  "settings.dev.assets.configUrl.open": "Ouvrir l'URL de configuration",
  "settings.dev.assets.diagnostics.default": "Configuration par dfaut",
  "settings.dev.assets.diagnostics.error": "Erreur de diagnostic",
  "settings.dev.assets.diagnostics.hasCategories": "A des catgories",
  "settings.dev.assets.diagnostics.hasConfig": "A une configuration",
  "settings.dev.assets.diagnostics.hasFavicon": "Favicon dtect",
  "settings.dev.assets.diagnostics.hasLocales": "A des locales",
  "settings.dev.assets.diagnostics.hasLogos": "A des logos",
  "settings.dev.assets.diagnostics.hasTabs": "A des onglets",
  "settings.dev.assets.diagnostics.noteNetwork": "Vrifiez votre connexion rseau.",
  "settings.dev.assets.diagnostics.primary": "Configuration principale",
  "settings.dev.assets.diagnostics.run": "Excuter les diagnostics",
  "settings.dev.assets.diagnostics.sampleFetches": "Exemples de rcuprations",
  "settings.dev.assets.diagnostics.title": "Diagnostics des actifs",
  "settings.dev.assets.domain": "Domaine",
  "settings.dev.assets.env": "Environnement",
  "settings.dev.assets.env.prod": "Production",
  "settings.dev.assets.env.test": "Test",
  "settings.dev.assets.prefix.active": "Prfixe actif",
  "settings.dev.assets.prefix.computed": "Prfixe calcul",
  "settings.dev.assets.source": "Source",
  "settings.dev.assets.title": "Actifs",
  "settings.developer.debug.clear": "Effacer le journal",
  "settings.developer.debug.copied": "Journal copi dans le presse-papiers",
  "settings.developer.debug.copy": "Copier le journal",
  "settings.developer.debug.enable": "Activer la journalisation de dbogage",
  "settings.developer.showKeys": "Afficher les cls API",
  "settings.developer.title": "Paramtres du dveloppeur",
  "settings.ipfs.localDisabled": "IPFS local dsactiv",
  "settings.localIpfs.apiUrl.label": "URL API IPFS local",
  "settings.localIpfs.disable": "Dsactiver",
  "settings.localIpfs.enableCheckbox": "Utiliser le nud IPFS local",
  "settings.localIpfs.gateway.label": "Passerelle",
  "settings.localIpfs.status.label": "Statut",
  "settings.localIpfs.testEnable": "Tester et activer",
  "settings.localIpfs.title": "IPFS local",
  "settings.title": "Paramtres",
  "stakerLevels.${l.key}": "Niveau de Staker {l.key}",
  "stakerLevels.clam": "Palourde",
  "stakerLevels.dolphin": "Dauphin",
  "stakerLevels.fish": "Poisson",
  "stakerLevels.guest": "Invit",
  "stakerLevels.orca": "Orque",
  "stakerLevels.seahorse": "Hippocampe",
  "stakerLevels.shark": "Requin",
  "stakerLevels.shrimp": "Crevette",
  "stakerLevels.stingray": "Raie",
  "stakerLevels.whale": "Baleine",
  "tabs.aria": "Onglets de section",
  "tabs.title.${slug(tab.type)}": "Onglet : {tab.type}",
  "tabs.title.actual": "Actuel",
  "tabs.title.comments": "Commentaires",
  "tabs.title.for-you": "Pour Vous",
  "tabs.title.leaders": "Leaders",
  "tabs.title.new": "Nouveau",
  "time.day.plural": "il y a {n} jours",
  "time.day.singular": "il y a {n} jour",
  "time.hour.plural": "il y a {n} heures",
  "time.hour.singular": "il y a {n} heure",
  "time.minute.plural": "il y a {n} minutes",
  "time.minute.singular": "il y a {n} minute",
  "time.now": "Maintenant",
  "ui.mode.dark": "Mode sombre",
  "ui.mode.light": "Mode clair",
  "ui.toTop": "Retour en haut",
  "wallet.changeChain": "Changer de rseau",
  "wallet.connect": "Connecter le portefeuille",
  "wallet.copied": "Copi",
  "wallet.copyAddress": "Copier l'adresse",
  "wallet.onRequiredNetwork": "Sur le rseau requis"
};
</file>

<file path="src/i18n/sr.js">
// Auto-generated by scripts/i18n.mjs. Do not edit by hand.
export default {
  "app.versionLabel": "Verzija",
  "brand.name": "SAVVA",
  "categories.all": "Sve kategorije",
  "common.apply": "Primeni",
  "common.applying": "Primena",
  "common.cancel": "Otkai",
  "common.checking": "Proveravam",
  "common.error": "Greka",
  "common.exists": "Postoji",
  "common.fail": "Neuspeh",
  "common.loading": "Uitavanje",
  "common.notFound": "Nije pronaeno",
  "common.ok": "U redu",
  "default.avatar": "Avatar",
  "default.user": "Korisnik",
  "docs.article": "Dokumentacioni lanak",
  "docs.copied": "Kopirano",
  "docs.copy": "Kopiraj",
  "docs.nav": "Dokumentacija za programere",
  "docs.next": "Sledee",
  "docs.prev": "Prethodno",
  "docs.section": "Sekcija",
  "docs.sidebar.empty": "Jo nema dokumenata. Dodajte sidebar.yaml pod dev_docs/<lang>/",
  "docs.title": "Dokumentacija za programere",
  "error.connection.message": "Aplikacija nije mogla da se povee sa backend serverom. Moda je privremeno van mree. Pokuajte ponovo kasnije.",
  "error.connection.retry": "Osvei stranicu",
  "error.connection.title": "Neuspena konekcija",
  "error.ws.message": "Nije mogue povezati se. Pokuajte ponovo.",
  "error.ws.title": "Greka u vezi",
  "ipfs.diag.cors.error": "Problem sa CORS konfiguracijom.",
  "ipfs.diag.cors.name": "Provera CORS-a na gateway-u",
  "ipfs.diag.cors.ok": "CORS je ispravno konfigurisan.",
  "ipfs.diag.fetch.errorFirewall": "Preuzimanje nije uspelo zbog vatrozida.",
  "ipfs.diag.fetch.name": "Preuzimanje sa aktivnog gateway-a",
  "ipfs.diag.fetch.ok": "Preuzimanje uspeno.",
  "ipfs.diag.fetch.warnSkipped": "Preskoeno: ABI CID nije pronaen u /info odgovoru.",
  "ipfs.diag.fix.browser": "Ako radi, proverite va pregleda. Za Brave, onemoguite Shields za ovu stranicu. Za druge pregledae kao to je Chrome, moda ete morati da 'Dozvolite nesiguran sadraj' u podeavanjima stranice.",
  "ipfs.diag.fix.cors": "Ako i dalje ne radi, pokrenite ovu komandu da popravite CORS politiku API-ja:",
  "ipfs.diag.fix.daemon": "Prvo, proverite da li va IPFS demon radi u terminalu:",
  "ipfs.diag.fix.title": "Da biste popravili, pokrenite ovo u vaem terminalu (zatim restartujte demon):",
  "ipfs.diag.liveness.error": "vor ne odgovara.",
  "ipfs.diag.liveness.name": "Provera aktivnog API-ja",
  "ipfs.diag.liveness.ok": "vor je aktivan.",
  "ipfs.diag.run": "Pokreni dijagnostiku",
  "ipfs.diag.title": "IPFS Dijagnostika vora",
  "ipfs.imageNotAvailable": "Slika nije dostupna",
  "main.tabs.empty": "Ovaj tab je trenutno prazan.",
  "main.tabs.loading": "Uitavanje tabova",
  "main.tabs.untitled": "Bez naslova",
  "menu.open": "Otvorite meni",
  "newTab.category": "Kategorija",
  "newTab.view.grid": "Mreni prikaz",
  "newTab.view.group": "Grupni prikaz",
  "newTab.view.list": "Lista",
  "rightPane.language": "Jezik",
  "rightPane.settings": "Podeavanja",
  "rightPane.switch.backend.help": "Aplikacija e preuzeti /info sa ove URL adrese da bi prikazala podrane domene.",
  "rightPane.switch.backend.label": "Backend URL",
  "rightPane.switch.backend.placeholder": "https://example.com/api/",
  "rightPane.switch.domain.label": "Domen",
  "rightPane.switch.domain.website": "Vebsajt",
  "rightPane.switch.noDomains": "Backend nije vratio nijedan domen. Moete se prijaviti, ali domen e biti prazan.",
  "rightPane.switch.open": "Promeni backend / domen",
  "rightPane.switch.reload": "Uitaj domene",
  "rightPane.switch.reload.title": "Preuzmi /info i osvei listu domena",
  "rightPane.switch.reset": "Vrati na podrazumevano",
  "rightPane.switch.reset.title": "Obrii lokalne izmene i ponovo uitaj podrazumevane vrednosti iz default_connect.yaml",
  "rightPane.switch.title": "Promeni backend / domen",
  "rightPane.switch.validation.domain": "Domen ne moe biti prazan.",
  "rightPane.switch.validation.protocol": "Backend URL mora poeti sa http:// ili https://",
  "rightPane.theme": "Tema",
  "settings.back": "Nazad",
  "settings.dev.assets.baseUrl": "Osnovni URL resursa",
  "settings.dev.assets.configUrl": "Config URL",
  "settings.dev.assets.configUrl.computed": "Izraunati URL",
  "settings.dev.assets.configUrl.open": "Otvorite Config URL",
  "settings.dev.assets.diagnostics.default": "Podrazumevana konfiguracija",
  "settings.dev.assets.diagnostics.error": "Greka u dijagnostici",
  "settings.dev.assets.diagnostics.hasCategories": "Ima kategorije",
  "settings.dev.assets.diagnostics.hasConfig": "Ima konfiguraciju",
  "settings.dev.assets.diagnostics.hasFavicon": "Favicon otkriven",
  "settings.dev.assets.diagnostics.hasLocales": "Ima jezike",
  "settings.dev.assets.diagnostics.hasLogos": "Ima logotipe",
  "settings.dev.assets.diagnostics.hasTabs": "Ima kartice",
  "settings.dev.assets.diagnostics.noteNetwork": "Proverite vau mrenu konekciju.",
  "settings.dev.assets.diagnostics.primary": "Primarna konfiguracija",
  "settings.dev.assets.diagnostics.run": "Pokreni dijagnostiku",
  "settings.dev.assets.diagnostics.sampleFetches": "Uzorci preuzimanja",
  "settings.dev.assets.diagnostics.title": "Dijagnostika resursa",
  "settings.dev.assets.domain": "Domen",
  "settings.dev.assets.env": "Okruenje",
  "settings.dev.assets.env.prod": "Proizvodnja",
  "settings.dev.assets.env.test": "Test",
  "settings.dev.assets.prefix.active": "Aktivni prefiks",
  "settings.dev.assets.prefix.computed": "Izraunati prefiks",
  "settings.dev.assets.source": "Izvor",
  "settings.dev.assets.title": "Resursi",
  "settings.developer.debug.clear": "Obrii log",
  "settings.developer.debug.copied": "Log kopiran u meuspremnik",
  "settings.developer.debug.copy": "Kopiraj log",
  "settings.developer.debug.enable": "Omogui logovanje greaka",
  "settings.developer.showKeys": "Prikai API kljueve",
  "settings.developer.title": "Podeavanja za programere",
  "settings.ipfs.localDisabled": "Lokalni IPFS onemoguen",
  "settings.localIpfs.apiUrl.label": "Lokalni IPFS API URL",
  "settings.localIpfs.disable": "Onemogui",
  "settings.localIpfs.enableCheckbox": "Koristi lokalni IPFS vor",
  "settings.localIpfs.gateway.label": "Gateway",
  "settings.localIpfs.status.label": "Status",
  "settings.localIpfs.testEnable": "Testiraj i omogui",
  "settings.localIpfs.title": "Lokalni IPFS",
  "settings.title": "Podeavanja",
  "stakerLevels.${l.key}": "Nivo stakera {l.key}",
  "stakerLevels.clam": "koljka",
  "stakerLevels.dolphin": "Delfin",
  "stakerLevels.fish": "Riba",
  "stakerLevels.guest": "Gost",
  "stakerLevels.orca": "Orka",
  "stakerLevels.seahorse": "Morski konji",
  "stakerLevels.shark": "Ajkula",
  "stakerLevels.shrimp": "Krevetica",
  "stakerLevels.stingray": "Raa",
  "stakerLevels.whale": "Kit",
  "tabs.aria": "Kartice sekcija",
  "tabs.title.${slug(tab.type)}": "Kartica: {tab.type}",
  "tabs.title.actual": "Trenutno",
  "tabs.title.comments": "Komentari",
  "tabs.title.for-you": "Za Vas",
  "tabs.title.leaders": "Lideri",
  "tabs.title.new": "Novi",
  "time.day.plural": "pre {n} dana",
  "time.day.singular": "pre {n} dan",
  "time.hour.plural": "pre {n} sati",
  "time.hour.singular": "pre {n} sat",
  "time.minute.plural": "pre {n} minuta",
  "time.minute.singular": "pre {n} minut",
  "time.now": "Sada",
  "ui.mode.dark": "Tamni reim",
  "ui.mode.light": "Svetli reim",
  "ui.toTop": "Nazad na vrh",
  "wallet.changeChain": "Promeni mreu",
  "wallet.connect": "Povei novanik",
  "wallet.copied": "Kopirano",
  "wallet.copyAddress": "Kopiraj adresu",
  "wallet.onRequiredNetwork": "Na potrebnoj mrei"
};
</file>

<file path="src/i18n/ua.js">
// Auto-generated by scripts/i18n.mjs. Do not edit by hand.
export default {
  "app.versionLabel": "",
  "brand.name": "SAVVA",
  "categories.all": " ",
  "common.apply": "",
  "common.applying": "",
  "common.cancel": "",
  "common.checking": "",
  "common.error": "",
  "common.exists": "",
  "common.fail": " ",
  "common.loading": "",
  "common.notFound": " ",
  "common.ok": "",
  "default.avatar": "",
  "default.user": "",
  "docs.article": " ",
  "docs.copied": "",
  "docs.copy": "",
  "docs.nav": "  ",
  "docs.next": "",
  "docs.prev": "",
  "docs.section": "",
  "docs.sidebar.empty": "  .  sidebar.yaml  dev_docs/<lang>/",
  "docs.title": "  ",
  "error.connection.message": "      .     .    .",
  "error.connection.retry": " ",
  "error.connection.title": "  ",
  "error.ws.message": "  .  ,   .",
  "error.ws.title": " '",
  "ipfs.diag.cors.error": "   CORS.",
  "ipfs.diag.cors.name": " CORS ",
  "ipfs.diag.cors.ok": "CORS  .",
  "ipfs.diag.fetch.errorFirewall": "    .",
  "ipfs.diag.fetch.name": "   ",
  "ipfs.diag.fetch.ok": " .",
  "ipfs.diag.fetch.warnSkipped": ": ABI CID     /info.",
  "ipfs.diag.fix.browser": "  ,   .  Brave  Shields   .   ,   Chrome, ,   '  '   .",
  "ipfs.diag.fix.cors": "    ,   ,    CORS API:",
  "ipfs.diag.fix.daemon": " ,   IPFS    :",
  "ipfs.diag.fix.title": " ,      (  ):",
  "ipfs.diag.liveness.error": "  .",
  "ipfs.diag.liveness.name": "  API",
  "ipfs.diag.liveness.ok": " .",
  "ipfs.diag.run": " ",
  "ipfs.diag.title": "  IPFS",
  "ipfs.imageNotAvailable": " ",
  "main.tabs.empty": "    .",
  "main.tabs.loading": " ",
  "main.tabs.untitled": " ",
  "menu.open": " ",
  "newTab.category": "",
  "newTab.view.grid": " ",
  "newTab.view.group": " ",
  "newTab.view.list": " ",
  "rightPane.language": "",
  "rightPane.settings": "",
  "rightPane.switch.backend.help": "  /info   URL,    .",
  "rightPane.switch.backend.label": "URL ",
  "rightPane.switch.backend.placeholder": "https://example.com/api/",
  "rightPane.switch.domain.label": "",
  "rightPane.switch.domain.website": "",
  "rightPane.switch.noDomains": "   .      ,    .",
  "rightPane.switch.open": "  / ",
  "rightPane.switch.reload": " ",
  "rightPane.switch.reload.title": " /info    ",
  "rightPane.switch.reset": "    ",
  "rightPane.switch.reset.title": "         default_connect.yaml",
  "rightPane.switch.title": "  / ",
  "rightPane.switch.validation.domain": "    .",
  "rightPane.switch.validation.protocol": "URL     http://  https://",
  "rightPane.theme": "",
  "settings.back": "",
  "settings.dev.assets.baseUrl": " URL ",
  "settings.dev.assets.configUrl": "URL ",
  "settings.dev.assets.configUrl.computed": " URL",
  "settings.dev.assets.configUrl.open": " URL ",
  "settings.dev.assets.diagnostics.default": "  ",
  "settings.dev.assets.diagnostics.error": " ",
  "settings.dev.assets.diagnostics.hasCategories": " ",
  "settings.dev.assets.diagnostics.hasConfig": " ",
  "settings.dev.assets.diagnostics.hasFavicon": " ",
  "settings.dev.assets.diagnostics.hasLocales": " ",
  "settings.dev.assets.diagnostics.hasLogos": " ",
  "settings.dev.assets.diagnostics.hasTabs": " ",
  "settings.dev.assets.diagnostics.noteNetwork": "   '.",
  "settings.dev.assets.diagnostics.primary": " ",
  "settings.dev.assets.diagnostics.run": " ",
  "settings.dev.assets.diagnostics.sampleFetches": " ",
  "settings.dev.assets.diagnostics.title": " ",
  "settings.dev.assets.domain": "",
  "settings.dev.assets.env": "",
  "settings.dev.assets.env.prod": "",
  "settings.dev.assets.env.test": "",
  "settings.dev.assets.prefix.active": " ",
  "settings.dev.assets.prefix.computed": " ",
  "settings.dev.assets.source": "",
  "settings.dev.assets.title": "",
  "settings.developer.debug.clear": " ",
  "settings.developer.debug.copied": "    ",
  "settings.developer.debug.copy": " ",
  "settings.developer.debug.enable": "  ",
  "settings.developer.showKeys": " API ",
  "settings.developer.title": " ",
  "settings.ipfs.localDisabled": " IPFS ",
  "settings.localIpfs.apiUrl.label": "URL API  IPFS",
  "settings.localIpfs.disable": "",
  "settings.localIpfs.enableCheckbox": "   IPFS",
  "settings.localIpfs.gateway.label": "",
  "settings.localIpfs.status.label": "",
  "settings.localIpfs.testEnable": "  ",
  "settings.localIpfs.title": " IPFS",
  "settings.title": "",
  "stakerLevels.${l.key}": "  {l.key}",
  "stakerLevels.clam": "",
  "stakerLevels.dolphin": "",
  "stakerLevels.fish": "",
  "stakerLevels.guest": "",
  "stakerLevels.orca": "",
  "stakerLevels.seahorse": " ",
  "stakerLevels.shark": "",
  "stakerLevels.shrimp": "",
  "stakerLevels.stingray": "",
  "stakerLevels.whale": "",
  "tabs.aria": " ",
  "tabs.title.${slug(tab.type)}": ": {tab.type}",
  "tabs.title.actual": "",
  "tabs.title.comments": "",
  "tabs.title.for-you": " ",
  "tabs.title.leaders": "",
  "tabs.title.new": "",
  "time.day.plural": "__N__  ",
  "time.day.singular": "__N__  ",
  "time.hour.plural": "__N__  ",
  "time.hour.singular": "__N__  ",
  "time.minute.plural": "__N__  ",
  "time.minute.singular": "__N__  ",
  "time.now": "",
  "ui.mode.dark": " ",
  "ui.mode.light": " ",
  "ui.toTop": "  ",
  "wallet.changeChain": " ",
  "wallet.connect": " ",
  "wallet.copied": "",
  "wallet.copyAddress": " ",
  "wallet.onRequiredNetwork": "  "
};
</file>

<file path="src/net/endpoints.js">
// File: src/net/endpoints.js
// Single source of truth. Configure once, zero-arg getters. Emits a CustomEvent on changes.

function ensureSlash(s) { return s.endsWith("/") ? s : s + "/"; }

let _backendHttpBase = "";
let _wsUrl = "";
let _domain = "";

function buildHttpBase(backendLink) {
  if (!backendLink) return "";
  const u = new URL(backendLink);
  u.pathname = ensureSlash(u.pathname || "/");
  return u.toString();
}

function buildWsUrl(backendBase, domain) {
  if (!backendBase) return "";
  const u = new URL(backendBase);
  const hasApi = (u.pathname || "/").toLowerCase().includes("/api/");
  const wsPath = hasApi ? "ws" : "api/ws";
  u.protocol = u.protocol === "https:" ? "wss:" : "ws:";
  u.pathname = ensureSlash(u.pathname || "/") + wsPath;

  // Only domain as query (per your request)  no lang.
  const q = new URLSearchParams(u.search);
  if (domain) q.set("domain", String(domain));
  u.search = q.toString() ? `?${q.toString()}` : "";
  return u.toString();
}

function notify() {
  if (typeof window !== "undefined") {
    window.dispatchEvent(
      new CustomEvent("savva:endpoints-updated", {
        detail: { httpBase: _backendHttpBase, wsUrl: _wsUrl, domain: _domain },
      })
    );
  }
}

/** Configure once per backend/domain switch */
export function configureEndpoints({ backendLink, domain }) {
  _domain = domain || "";
  _backendHttpBase = buildHttpBase(backendLink || "");
  _wsUrl = buildWsUrl(_backendHttpBase, _domain);
  notify();
}

export function httpBase() { return _backendHttpBase; }
export function wsUrl()    { return _wsUrl; }
export function currentDomain() { return _domain; }
</file>

<file path="src/net/index.js">
// src/ws/index.js
</file>

<file path="src/net/WsClient.js">
// File: src/net/WsClient.js
import { dbg } from "../utils/debug";
import { wsUrl as endpointsWsUrl } from "./endpoints";

/**
 * Pure WebSocket transport.
 * Request:  { id: number, type: string, data: any }
 * Response: { id?: number, type?: string, error?: string, data?: any }
 * Alerts:   { type: string, data?: any }  (no id)
 */
export default class WsClient {
  constructor({ url = "", protocols } = {}) {
    this._url = url || "";
    this._protocols = protocols || undefined;
    this._ws = null;
    this._manualClose = false;

    this._status = "idle"; // idle | connecting | open | closed
    this._attempt = 0;
    this._shouldReconnect = true;
    this._reconnectTid = null;

    this._heartbeatTid = null;
    this._heartbeatMs = 25_000;

    this._sendQueue = [];
    this._pending = new Map(); // id (string) -> { resolve, reject, timer }
    this._nextId = 1;

    this._listeners = new Map();

    this._onOnline = () => this.reconnect("online");
    if (typeof window !== "undefined") {
      window.addEventListener("online", this._onOnline);
      window.addEventListener("visibilitychange", () => {
        if (document.visibilityState === "visible" && this._status !== "open") {
          this.reconnect("visible");
        }
      });
    }
  }

  //  public API 
  dispose() {
    this._shouldReconnect = false;
    this._clearReconnect();
    this._stopHeartbeat();
    if (this._ws) {
      try {
        this._ws.close();
      } catch {}
    }
    this._ws = null;
    if (typeof window !== "undefined") {
      window.removeEventListener("online", this._onOnline);
    }
    this._failInflight(new Error("WS disposed"));
    this._emit("status", "closed");
  }

  url() {
    return this._url;
  }
  status() {
    return this._status;
  }
  attempt() {
    return this._attempt;
  }

  setUrl(nextUrl) {
    const source = nextUrl == null ? endpointsWsUrl() : nextUrl;
    const u = String(source || "");
    if (!u) {
      dbg.warn("ws", "No WS URL configured");
      return;
    }
    if (u === this._url) return;
    this._url = u;
    dbg.log("ws", "URL updated", { url: u });
  }

  setAutoReconnect(on) {
    this._shouldReconnect = !!on;
  }

  connect() {
    if (!this._url) return;
    if (
      this._ws &&
      (this._ws.readyState === WebSocket.OPEN ||
        this._ws.readyState === WebSocket.CONNECTING)
    ) {
      return;
    }
    this._clearReconnect();
    this._setStatus("connecting");
    dbg.log("ws", "Connecting", { url: this._url });

    try {
      const ws = new WebSocket(this._url, this._protocols);
      this._ws = ws;

      ws.addEventListener("open", () => {
        this._attempt = 0;
        this._setStatus("open");
        dbg.log("ws", "Connected", { url: this._url });
        this._flushQueue();
        this._startHeartbeat();
        this._emit("open");
      });

      ws.addEventListener("message", (ev) => this._onMessage(ev));

      ws.addEventListener("error", (ev) => {
        dbg.warn("ws", "Error", { event: ev });
        this._emit("error", ev);
      });

      ws.addEventListener("close", (ev) => {
        dbg.warn("ws", "Closed", { code: ev.code, reason: ev.reason });
        this._stopHeartbeat();
        this._setStatus("closed");
        this._emit("close", ev);
        this._failInflight(new Error("WS closed"));
        if (this._shouldReconnect && !this._manualClose) {
          this._scheduleReconnect();
        }
        this._manualClose = false; // Reset the flag after handling the close event.
      });
    } catch (e) {
      dbg.error("ws", "Connect exception", e);
      this._setStatus("closed");
      this._scheduleReconnect();
    }
  }

  reconnect(reason = "manual") {
    dbg.log("ws", "Reconnecting", { reason });
    this._clearReconnect();
    if (this._ws) {
      this._manualClose = true; 
      try { this._ws.close(1000, `reconnect: ${reason}`); } catch {}
    }
    this._ws = null;
    this._failInflight(new Error("WS reconnected"));
    this.connect();
  }

  close() {
    this._manualClose = true;
    this._clearReconnect();
    this._stopHeartbeat();
    this._shouldReconnect = false;
    try {
      this._ws && this._ws.close(1000, "client-close");
    } catch {}
    this._ws = null;
    this._setStatus("closed");
    this._failInflight(new Error("WS closed by client"));
  }

  send(data) {
    const open = this._ws && this._ws.readyState === WebSocket.OPEN;
    if (open) this._ws.send(data);
    else this._sendQueue.push(data);
  }
  sendJson(obj) {
    this.send(JSON.stringify(obj));
  }

  /** Backend dialect:
   * send: { id: number, name: "<handler>", data: {...} }
   * ok:   { id, data, [type] }
   * err:  { id, error: "<string>", [type] }
   */
  call(method, params = {}, { timeoutMs = 15_000, id } = {}) {
    const numericId = Number.isFinite(id) ? id : this._nextId++;
    const callId = String(numericId);

    return new Promise((resolve, reject) => {
      const timer = setTimeout(() => {
        this._pending.delete(callId);
        const err = new Error("WS request timeout");
        err.code = "ETIMEDOUT";
        reject(err);
      }, timeoutMs);

      this._pending.set(callId, { resolve, reject, timer });
      this.sendJson({
        id: numericId,
        type: String(method),
        data: params || {},
      });
    });
  }

  on(type, fn) {
    const key = String(type || "");
    const set = this._listeners.get(key) || new Set();
    set.add(fn);
    this._listeners.set(key, set);
    return () => this.off(key, fn);
  }
  off(type, fn) {
    const set = this._listeners.get(type);
    if (!set) return;
    set.delete(fn);
    if (set.size === 0) this._listeners.delete(type);
  }

  //  internals 
  _setStatus(s) {
    if (this._status !== s) {
      this._status = s;
      this._emit("status", s);
    }
  }

  _emit(type, payload) {
    const set = this._listeners.get(type);
    if (!set || set.size === 0) return;
    for (const fn of Array.from(set)) {
      try {
        fn(payload);
      } catch (e) {
        dbg.error("ws", "listener error", e);
      }
    }
  }

  _onMessage(ev) {
    let data = ev.data;
    try {
      const obj = JSON.parse(data);

      // Correlated response: match (stringified) id
      if (obj && obj.id != null) {
        const key = String(obj.id);
        const entry = this._pending.get(key);
        if (entry) {
          clearTimeout(entry.timer);
          this._pending.delete(key);

          if (typeof obj.error === "string" && obj.error) {
            const err = new Error(obj.error || "WS error");
            err.code = "WS_ERROR";
            entry.reject(err);
            return;
          }

          if ("data" in obj) {
            entry.resolve(obj.data);
            return;
          }
          // if backend someday returns {result: ...}, accept that too
          if ("result" in obj) {
            entry.resolve(obj.result);
            return;
          }

          entry.resolve(obj);
          return;
        }
      }

      // Alerts / broadcasts: frames with a type and no matching id
      if (obj && obj.type) {
        // forward both the whole obj on "message" and the typed payload
        this._emit(obj.type, obj.data ?? obj);
        this._emit("message", obj);
        return;
      }

      // Fallback
      this._emit("message", obj);
    } catch {
      this._emit("raw", data);
    }
  }

  _flushQueue() {
    if (!this._ws || this._ws.readyState !== WebSocket.OPEN) return;
    while (this._sendQueue.length) {
      const item = this._sendQueue.shift();
      try {
        this._ws.send(item);
      } catch {}
    }
  }

  _startHeartbeat() {
    this._stopHeartbeat();
    if (this._heartbeatMs > 0) {
      this._heartbeatTid = setInterval(() => {
        try {
          if (this._ws && this._ws.readyState === WebSocket.OPEN) {
            this._ws.send('{"type":"ping"}');
          }
        } catch {}
      }, this._heartbeatMs);
    }
  }
  _stopHeartbeat() {
    if (this._heartbeatTid) {
      clearInterval(this._heartbeatTid);
      this._heartbeatTid = null;
    }
  }

  _scheduleReconnect() {
    if (!this._shouldReconnect) return;
    this._attempt += 1;
    const base = 300 * Math.pow(2, this._attempt - 1);
    const jitter = Math.floor(Math.random() * 400);
    const delay = Math.min(10_000, base + jitter);
    dbg.log("ws", "Reconnect scheduled", {
      inMs: delay,
      attempt: this._attempt,
    });
    this._clearReconnect();
    this._reconnectTid = setTimeout(() => this.connect(), delay);
  }
  _clearReconnect() {
    if (this._reconnectTid) {
      clearTimeout(this._reconnectTid);
      this._reconnectTid = null;
    }
  }

  _failInflight(err) {
    if (!this._pending.size) return;
    for (const [, entry] of this._pending) {
      clearTimeout(entry.timer);
      try {
        entry.reject(err);
      } catch {}
    }
    this._pending.clear();
  }
}
</file>

<file path="src/styles/layout.css">
/* src/styles/layout.css */
:root {
  --sv-container-max: 1600px;           /* main max width for content container */
  --sv-container-gutter: clamp(16px, 2vw, 32px); /* responsive padding */
  --sv-aside-w: clamp(300px, 24vw, 380px);       /* sidebar width on desktop */
  --sv-content-max-ch: 68ch;            /* comfortable text line length */
}

/* Centered container */
.sv-container {
  max-width: var(--sv-container-max);
  margin-inline: auto;
  /* padding-inline: var(--sv-container-gutter); */
}

/* Content grid: main column + sidebar */
.sv-content-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: clamp(16px, 2vw, 24px);
}
@media (min-width: 1024px) {
  .sv-content-grid {
    grid-template-columns: minmax(0, 1fr) var(--sv-aside-w);
    align-items: start;
  }
}

.sv-main { min-width: 0; }
.sv-aside { min-width: 0; }

/* Text limiter for typography-heavy content */
.sv-typography {
  max-width: var(--sv-content-max-ch);
}

/* Full-bleed section for backgrounds/hero areas */
.full-bleed {
  width: 100vw;
  margin-left: 50%;
  transform: translateX(-50%);
}

@media (min-width: 1800px) {
  :root { --sv-container-max: 1600px; }
}

.sv-container--no-gutter {
  padding-inline: 0; /* keep max-width centering, remove side padding */
}
</file>

<file path="src/theme/DomainCssLoader.jsx">
// src/theme/DomainCssLoader.jsx
import { createEffect, onCleanup, createMemo } from "solid-js";
import { useApp } from "../context/AppContext.jsx";
import { dbg } from "../utils/debug";

const LINK_ID = "savva-domain-css";

export default function DomainCssLoader() {
  const app = useApp();

  function ensureLink() {
    let el = document.getElementById(LINK_ID);
    if (!el) {
      el = document.createElement("link");
      el.id = LINK_ID;
      el.rel = "stylesheet";
      el.media = "all";
      (document.head || document.getElementsByTagName("head")[0]).appendChild(el);
    }
    return el;
  }

  // Flip when env/domain/pack changes; used only for cache busting
  const rev = createMemo(() => {
    const cfg = app.domainAssetsConfig?.();
    const cid = cfg?.assets_cid || cfg?.cid || "";
    const env = app.assetsEnv?.() || "prod";
    const dom = (() => {
      const d = app.selectedDomain?.();
      return typeof d === "string" ? d : d?.name || "";
    })();
    return `${env}|${dom}|${cid}`;
  });

  createEffect(() => {
    const hrefBase = app.assetUrl?.("domain.css"); // <- single source of truth
    const el = ensureLink();

    if (!hrefBase) {
      el.parentNode && el.parentNode.removeChild(el);
      return;
    }

    const href = `${hrefBase}${hrefBase.includes("?") ? "&" : "?"}rev=${encodeURIComponent(rev())}`;
    if (el.getAttribute("href") === href) return;

    dbg.log("assets", "DomainCssLoader: applying domain.css", { hrefBase, href });

    const onLoad = () => dbg.log("assets", "domain.css loaded", { href });
    const onError = () => dbg.warn("assets", "domain.css failed to load", { href });

    el.addEventListener("load", onLoad, { once: true });
    el.addEventListener("error", onError, { once: true });
    el.setAttribute("href", href);
  });

  onCleanup(() => {
    const el = document.getElementById(LINK_ID);
    if (el?.parentNode) el.parentNode.removeChild(el);
  });

  return null;
}
</file>

<file path="src/utils/debug.js">
// src/utils/debug.js
/* src/utils/debug.js */
const STORE_KEY = "savva_debug_enabled";
const MAX_LINES = 4000;

function nowStamp() {
  const d = new Date();
  const hh = String(d.getHours()).padStart(2, "0");
  const mm = String(d.getMinutes()).padStart(2, "0");
  const ss = String(d.getSeconds()).padStart(2, "0");
  const ms = String(d.getMilliseconds()).padStart(3, "0");
  return `${hh}:${mm}:${ss}.${ms}`;
}

function safeStr(x) {
  if (x instanceof Error) return `${x.name}: ${x.message}`;
  if (typeof x === "string") return x;
  try { return JSON.stringify(x, null, 2); } catch { return String(x); }
}

const state = {
  enabled: (() => { try { return localStorage.getItem(STORE_KEY) === "1"; } catch { return false; } })(),
  indent: 0,
  lines: [],
  listeners: new Set(),
};

function push(kind, scope, parts) {
  const pad = "  ".repeat(Math.max(0, state.indent));
  const text = `[${nowStamp()}]  ${pad}${scope}${parts.length ? " " + parts.map(safeStr).join(" ") : ""}`;
  state.lines.push(text);
  if (state.lines.length > MAX_LINES) state.lines.splice(0, state.lines.length - MAX_LINES);
  state.listeners.forEach((fn) => { try { fn(text, kind, scope); } catch {} });
  // mirror to console when enabled
  if (state.enabled) {
    const c = console[kind] || console.log;
    c.call(console, `${scope}:`, ...parts);
  }
}

export const dbg = {
  // enable/disable + both property-style and method-style accessors
  enable(on = true) {
    state.enabled = !!on;
    try { localStorage.setItem(STORE_KEY, state.enabled ? "1" : "0"); } catch {}
    return state.enabled;
  },
  enabled() { return !!state.enabled; },     // method, for call-sites that do dbg.enabled()
  get isEnabled() { return !!state.enabled; },// getter, in case someone reads dbg.isEnabled

  // core logging
  log(scope, ...args)  { push("log", scope, args); },
  info(scope, ...args) { push("info", scope, args); },
  warn(scope, ...args) { push("warn", scope, args); },
  error(scope, ...args){ push("error", scope, args); },

  // groups (safe even if console.group* is missing)
  group(label) {
    push("log", "", [label]);
    if (state.enabled && console.groupCollapsed) console.groupCollapsed(label);
    state.indent++;
  },
  groupEnd() {
    state.indent = Math.max(0, state.indent - 1);
    if (state.enabled && console.groupEnd) console.groupEnd();
  },

  // listeners
  onChange(fn) { state.listeners.add(fn); return () => state.listeners.delete(fn); },

  // buffer ops
  clear() { state.lines = []; },
  entries() { return state.lines.slice(); },

  // text dump helpers used by the UI
  getText() { return state.lines.join("\n"); },
  text()    { return state.lines.join("\n"); }, // backwards compat
  async copy() {
    try { await navigator.clipboard.writeText(this.getText()); return true; }
    catch { return false; }
  },
};

export default dbg;
</file>

<file path="src/utils/net.js">
// src/utils/net.js
export async function fetchWithTimeout(
  url,
  { timeoutMs = 7000, method = "GET", headers, signal, body } = {}
) {
  const controller = new AbortController();
  const timer = setTimeout(
    () => controller.abort(new DOMException("Timeout", "TimeoutError")),
    timeoutMs
  );
  if (signal) {
    signal.addEventListener("abort", () => controller.abort(signal.reason), { once: true });
  }
  try {
    return await fetch(url, {
      method,
      headers,
      body,
      signal: controller.signal,
      // Change 'no-store' to 'force-cache' for aggressive caching of immutable assets.
      cache: "force-cache",
    });
  } finally {
    clearTimeout(timer);
  }
}
</file>

<file path=".gitignore">
# Logs
logs
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*
pnpm-debug.log*
lerna-debug.log*

node_modules
dist
dist-ssr
*.local
.env

# Editor directories and files
.vscode/*
!.vscode/extensions.json
.idea
.DS_Store
*.suo
*.ntvs*
*.njsproj
*.sln
*.sw?
</file>

<file path="postcss.config.js">
// postcss.config.js
export default {
  plugins: {
    '@tailwindcss/postcss': { config: './tailwind.config.js' },
    autoprefixer: {},
  },
};
</file>

<file path="vite.config.js">
// vite.config.js
import { defineConfig } from 'vite';
import solid from 'vite-plugin-solid';

export default defineConfig({
  plugins: [solid()],
  server: {
    port: 5173,
  },
  build: {
    target: 'esnext',
  },
});
</file>

<file path="public/dev_docs/en/getting-started.md">
# Getting Started

Welcome to the **Getting Started** guide for the SAVVA Platform.

This page walks you through the basic steps to set up the project locally and start contributing.

## Prerequisites

Before you begin, make sure you have the following tools installed:

- **Node.js** (v18 or later recommended)  
- **npm** or **yarn** package manager  
- **Git** for cloning the repository  
- A modern **browser** (Chrome, Firefox, Edge) for development and testing  

## Clone the Repository

The source code is hosted on GitHub. To get the latest version:

```bash
git clone https://github.com/AlexNa-Holdings/savva-ui-solidjs
cd savva-ui-solidjs
````

## Install Dependencies

Inside the project folder, install all required dependencies:

```bash
npm install
# or
yarn install
```

## Start the Development Server

Run the dev server with hot reloading:

```bash
npm run dev
# or
yarn dev
```

The app will be available at [http://localhost:5173](http://localhost:5173).

## Build for Production

To create an optimized build:

```bash
npm run build
```

The output will be in the `dist/` folder.

## Next Steps

* Explore the **Developer Docs** for architecture and modules.
* Try switching domains and assets in the **Right Pane**.
* Contribute by opening issues or pull requests on GitHub.

Thats it!  Youre ready to start working with the **SAVVA Platform**.

```html
<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SAVVA  SolidJS</title>

  <!-- Preload theme to avoid flash -->
  <script>
    (function () {
      try {
        const saved = localStorage.getItem("theme");
        const systemDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
        const theme = saved || (systemDark ? "dark" : "light");
        document.documentElement.classList.toggle("dark", theme === "dark");
      } catch { }
    })();
  </script>

  <script>
    (function () {
      // If there is a real path (e.g., /settings) but no hash, rewrite to hash form: /#/settings
      if (!location.hash && location.pathname !== "/") {
        var newHash = "#" + location.pathname + location.search + location.hash;
        history.replaceState(null, "", "/" + newHash);
      }
    })();
  </script>


  <!-- Load app after theme class is set -->
  <script type="module" src="/src/index.jsx"></script>
</head>

<body>
  <div id="root"></div>
</body>

</html>
```
</file>

<file path="public/domain_default/modules/tabs.yaml">
tabs:
  - type: leaders
    right_panel:
      available: true
      blocks:
        - type: html
          en: /html/info_block_en.html
          ru: /html/info_block_ru.html
          ua: /html/info_block_ua.html
          fr: /html/info_block_fr.html
        - type: content_List
          list_name: main
          count: 7
  - type: actual
    right_panel:
      available: true
      blocks:
        - type: content_List
          list_name: main
          count: 7
  - type: comments
    right_panel:
      available: true
      blocks:
        - type: content_List
          list_name: main
          count: 7
  - type: new
    right_panel:
      available: false
      blocks:
        - type: content_List
          list_name: main
          count: 7
  - type: for-you
    private: true
    right_panel:
      available: true
      blocks:
        - type: content_List
          list_name: main
          count: 7
</file>

<file path="public/default_connect.yaml">
domain: savva.app
backendLink: https://ui.savva.app/api/
gear: true
</file>

<file path="scripts/i18n.mjs">
// scripts/i18n.mjs
import fs from "node:fs";
import path from "node:path";
import { pathToFileURL } from "node:url";
import dotenv from "dotenv";
import OpenAI from "openai";

// ---------- Config ----------
const ROOT = process.cwd();
dotenv.config({ path: path.join(ROOT, ".env") });

const SRC_DIR = path.join(ROOT, "src");
const I18N_DIR = path.join(SRC_DIR, "i18n");
const OPENAI_KEY = process.env.OPENAI_API_KEY || "";
const OPENAI_MODEL = process.env.OPENAI_MODEL || "gpt-4o-mini";
const BATCH_SIZE = 60; // how many keys to ask the model about per request

// ---------- Collect used keys (scan t("key") calls) ----------
const exts = [".js", ".jsx", ".ts", ".tsx"];
const usedKeys = new Set();

/**
 * Finds t('foo.bar'), t("foo.bar") and t(`foo.bar`) with static literals only.
 * (If you build keys dynamically, they wont be picked up by any static scan.)
 */
const T_CALL = /\b(?:i18n\.)?t\(\s*([`'"])([^`'"]+)\1\s*\)/g;

function walk(dir) {
  for (const entry of fs.readdirSync(dir, { withFileTypes: true })) {
    const p = path.join(dir, entry.name);
    if (entry.isDirectory()) {
      if (entry.name === "node_modules" || entry.name === "dist") continue;
      walk(p);
    } else if (exts.includes(path.extname(entry.name))) {
      const text = fs.readFileSync(p, "utf8");
      let m;
      while ((m = T_CALL.exec(text))) {
        usedKeys.add(m[2]);
      }
    }
  }
}

walk(SRC_DIR);

// ---------- Helpers to load & write lang files ----------
function isLangFile(name) {
  return name.endsWith(".js") && !/useI18n\.js$/i.test(name);
}
function toModuleURL(filePath) {
  return pathToFileURL(filePath).href;
}
async function loadLang(filePath) {
  const mod = await import(toModuleURL(filePath));
  const dict = mod?.default || {};
  const normalized = {};
  for (const [k, v] of Object.entries(dict)) {
    normalized[k] = typeof v === "string" ? v : String(v);
  }
  return normalized;
}
function writeLang(filePath, obj) {
  const sorted = Object.keys(obj)
    .sort()
    .reduce((acc, k) => {
      acc[k] = obj[k];
      return acc;
    }, {});
  const body =
    "// Auto-generated by scripts/i18n.mjs. Do not edit by hand.\n" +
    "export default " +
    JSON.stringify(sorted, null, 2) +
    ";\n";
  fs.writeFileSync(filePath, body, "utf8");
}

// ---------- OpenAI helpers ----------
let openai = null;
if (OPENAI_KEY) {
  openai = new OpenAI({ apiKey: OPENAI_KEY });
}

function chunk(arr, size) {
  const out = [];
  for (let i = 0; i < arr.length; i += size) out.push(arr.slice(i, i + size));
  return out;
}

async function askJson(prompt, schemaHint = "an object mapping keys to strings") {
  if (!openai) return {};
  const res = await openai.chat.completions.create({
    model: OPENAI_MODEL,
    temperature: 0.2,
    response_format: { type: "json_object" },
    messages: [
      {
        role: "system",
        content:
          `You are a localization copywriter for a web app. ` +
          `Return ONLY valid JSON (${schemaHint}). Keep strings concise, natural, and product-quality. ` +
          `Preserve punctuation, capitalization, and any placeholders like {name}, {amount}, {n}, %s, %d exactly. ` +
          `Do not add extra keys.`,
      },
      { role: "user", content: prompt },
    ],
  });
  const text = res.choices?.[0]?.message?.content || "{}";
  try {
    return JSON.parse(text);
  } catch {
    return {};
  }
}

async function fillEnglish(keys) {
  const out = {};
  for (const group of chunk(keys, BATCH_SIZE)) {
    const prompt =
      `For each key, produce an English UI string (microcopy). ` +
      `Be terse where appropriate (button labels, placeholders) and clear for longer texts.\n\n` +
      JSON.stringify({ keys: group }, null, 2);
    const json = await askJson(prompt);
    Object.assign(out, json);
  }
  return out;
}

async function translateTo(langCode, englishPairs) {
  const out = {};
  const keys = Object.keys(englishPairs);
  for (const keyGroup of chunk(keys, BATCH_SIZE)) {
    const batchToTranslate = {};
    for (const k of keyGroup) {
      batchToTranslate[k] = englishPairs[k];
    }
    const prompt =
      `Translate the values in the following JSON object to ${langCode}. ` +
      `Return a JSON object with the same keys, but with translated string values. ` +
      `Keep placeholders (like {amount}, {n}, %s, %d) unchanged. ` +
      `Use natural ${langCode} for a consumer web app (not formal/legal).\n\n` +
      JSON.stringify(batchToTranslate, null, 2);
    const json = await askJson(prompt);
    Object.assign(out, json);
  }
  return out;
}

// ---------- Main ----------
(async function main() {
  // Sanity
  if (!fs.existsSync(I18N_DIR)) {
    console.error(`[i18n] Not found: ${path.relative(ROOT, I18N_DIR)}`);
    process.exit(1);
  }

  const langFiles = fs.readdirSync(I18N_DIR).filter(isLangFile);
  if (langFiles.length === 0) {
    console.error("[i18n] No language files found in src/i18n");
    process.exit(1);
  }

  const enPath = path.join(I18N_DIR, "en.js");
  if (!fs.existsSync(enPath)) {
    console.error("[i18n] Missing src/i18n/en.js (source of truth)");
    process.exit(1);
  }

  // Load all dicts
  const dicts = {};
  for (const f of langFiles) {
    dicts[f] = await loadLang(path.join(I18N_DIR, f));
  }

  const desiredKeys = new Set(usedKeys);

  // ---------- 1) Clean English (keep only used, mark missing & "???" as missing) ----------
  const enOrig = dicts["en.js"] || {};
  const enNew = {};
  const missingEn = [];

  for (const k of desiredKeys) {
    const v = enOrig[k];
    const isMissingValue =
      v == null || (typeof v === "string" && (v.trim() === "" || v.trim() === "???"));
    if (isMissingValue) {
      enNew[k] = "???";
      missingEn.push(k);
    } else {
      enNew[k] = v;
    }
  }

  writeLang(enPath, enNew);

  // ---------- 2) Fill English "???" via OpenAI ----------
  if (missingEn.length > 0) {
    if (!openai) {
      console.warn(
        "[i18n] OPENAI_API_KEY not set; skip filling English. Set it in .env to auto-fill."
      );
    } else {
      console.log(`[i18n] Filling ${missingEn.length} missing English strings...`);
      const filled = await fillEnglish(missingEn);
      let filledCount = 0;
      for (const k of missingEn) {
        const candidate = filled[k];
        if (typeof candidate === "string" && candidate.trim()) {
          enNew[k] = candidate.trim();
          filledCount++;
        }
      }
      if (filledCount > 0) {
        writeLang(enPath, enNew);
        console.log(`[i18n] Filled ${filledCount} English strings.`);
      }
    }
  } else {
    console.log("[i18n] No missing English strings to fill.");
  }

  // ---------- 3) For each non-English, prune + add "???" + translate from English ----------
  for (const f of langFiles) {
    if (f === "en.js") continue;

    const langPath = path.join(I18N_DIR, f);
    const langCode = path.basename(f, ".js");
    const langDict = dicts[f] || {};

    // Prune/prepare
    const out = {};
    const toTranslate = {};
    for (const k of desiredKeys) {
      const v = langDict[k];
      const isMissing = v == null || (typeof v === "string" && (v.trim() === "" || v.trim() === "???"));
      if (isMissing) {
        out[k] = "???";
        // Only translate if we have an English source string that isn't a placeholder
        if (typeof enNew[k] === "string" && enNew[k].trim() && enNew[k] !== "???") {
          toTranslate[k] = enNew[k];
        }
      } else {
        out[k] = v;
      }
    }

    writeLang(langPath, out);
    const toTranslateCount = Object.keys(toTranslate).length;

    if (toTranslateCount === 0) {
      console.log(`[i18n] ${langCode}: nothing to translate.`);
      continue;
    }

    if (!openai) {
      console.warn(`[i18n] ${langCode}: OPENAI_API_KEY not set; skip translation.`);
      continue;
    }

    console.log(`[i18n] ${langCode}: translating ${toTranslateCount} keys...`);
    const translated = await translateTo(langCode, toTranslate);
    let translatedCount = 0;
    for (const key of Object.keys(toTranslate)) {
      const t = translated[key];
      if (typeof t === "string" && t.trim() && out[key] === "???") {
        out[key] = t.trim();
        translatedCount++;
      }
    }
    
    if (translatedCount > 0) {
        writeLang(langPath, out);
    }
    console.log(`[i18n] ${langCode}: translated ${translatedCount} keys.`);
  }
})().catch((err) => {
  console.error(err);
  process.exit(1);
});
</file>

<file path="src/components/feed/PostCard.jsx">
// src/components/feed/PostCard.jsx
import { Show, createMemo } from "solid-js";
import { useApp } from "../../context/AppContext.jsx";
import IpfsImage from "../ui/IpfsImage.jsx";
import UserCard from "../ui/UserCard.jsx";
import UnknownUserIcon from "../ui/icons/UnknownUserIcon.jsx";
import PostInfo from "./PostInfo.jsx";

function getLocalizedField(locales, fieldName, currentLang) {
  if (!locales || typeof locales !== 'object') return "";
  if (locales[currentLang]?.[fieldName]) return locales[currentLang][fieldName];
  if (locales.en?.[fieldName]) return locales.en[fieldName];
  const firstLocaleKey = Object.keys(locales)[0];
  if (firstLocaleKey && locales[firstLocaleKey]?.[fieldName]) {
    return locales[firstLocaleKey][fieldName];
  }
  return "";
}

export default function PostCard(props) {
  const app = useApp();
  const author = () => props.item._raw?.author;
  const content = () => props.item._raw?.savva_content;
  const isListMode = () => props.mode === 'list';
  
  const displayImageSrc = createMemo(() => {
    return content()?.thumbnail || author()?.avatar;
  });

  const title = createMemo(() => {
    return getLocalizedField(content()?.locales, "title", app.lang());
  });

  const textPreview = createMemo(() => {
    return getLocalizedField(content()?.locales, "text_preview", app.lang());
  });

  const articleClasses = createMemo(() => {
    const base = "rounded-lg border border-[hsl(var(--border))] bg-[hsl(var(--card))] text-[hsl(var(--card-foreground))] flex overflow-hidden";
    return isListMode() ? `${base} flex-row h-40` : `${base} flex-col`;
  });

  const imageContainerClasses = createMemo(() => {
    return isListMode()
      ? "h-full shrink-0 aspect-video border-l border-[hsl(var(--border))]"
      : "aspect-video w-full border-b border-[hsl(var(--border))]";
  });

  const contentContainerClasses = createMemo(() => {
    return isListMode()
      // Reduced vertical padding from p-3 to py-2
      ? "px-3 py-2 flex-1 flex flex-col min-w-0"
      : "px-3 pb-3 flex-1 flex flex-col";
  });

  const textPreviewClasses = createMemo(() => {
    const base = "text-xs leading-snug text-[hsl(var(--muted-foreground))]";
    return isListMode() ? `${base} line-clamp-2` : `${base} line-clamp-3`;
  });

  const ImageBlock = () => (
    <div class={imageContainerClasses()}>
      <Show
        when={displayImageSrc()}
        fallback={<UnknownUserIcon class="absolute inset-0 w-full h-full" />}
      >
        {(cid) => <IpfsImage src={cid()} />}
      </Show>
    </div>
  );

  const ContentBlock = () => (
    <div class={contentContainerClasses()}>
      <div class="flex-1 space-y-1 min-h-0">
        <Show when={title()}>
          <h4 class="font-semibold line-clamp-2 text-sm text-[hsl(var(--foreground))]">
            {title()}
          </h4>
        </Show>
        <Show when={textPreview()}>
          <p class={textPreviewClasses()}>
            {textPreview()}
          </p>
        </Show>
      </div>
      
      <div class="mt-1">
        <UserCard author={author()} />
      </div>

      <PostInfo item={props.item} mode={props.mode} />
    </div>
  );

  return (
    <article class={articleClasses()}>
      <Show
        when={isListMode()}
        fallback={
          <>
            <ImageBlock />
            <ContentBlock />
          </>
        }
      >
        <ContentBlock />
        <ImageBlock />
      </Show>
    </article>
  );
}
</file>

<file path="src/components/feed/PostListView.jsx">
// src/components/feed/PostListView.jsx
import { For, createMemo } from "solid-js";
import PostCard from "./PostCard.jsx";

export default function PostListView(props) {
  const mode = () => (props.mode === "grid" ? "grid" : "list");

  const gridClass = createMemo(() => {
    const base = "grid gap-3 grid-cols-1 sm:grid-cols-2";
    // If the right rail is NOT visible, we have more space. Use up to 4 columns.
    // If the right rail IS visible, we have less space. Use up to 3 columns.
    return props.isRailVisible
      ? `${base} lg:grid-cols-2 xl:grid-cols-3`
      : `${base} lg:grid-cols-3 xl:grid-cols-4`;
  });

  return (
    <div class={mode() === "grid" ? gridClass() : "flex flex-col gap-3"}>
      <For each={props.items}>
        {(item) => <PostCard item={item} mode={mode()} />}
      </For>
    </div>
  );
}
</file>

<file path="src/components/main/MainView.jsx">
// src/components/main/MainView.jsx
import { createMemo, Show } from "solid-js";
import { useApp } from "../../context/AppContext";
import TabsBar from "./TabsBar";
import Container from "../layout/Container";
import ToTopButton from "../ui/ToTopButton";

export default function MainView() {
  const { t, selectedDomain, domainAssetsConfig } = useApp();

  // reactive domain name
  const domainName = createMemo(() => {
    const d = selectedDomain?.();
    return !d ? "" : typeof d === "string" ? d : d.name || "";
  });

  // localized title (not rendered here but kept ready)
  const title = createMemo(() => t("main.title", { domain: domainName() || "SAVVA" }));

  // change key when domain or assets pack changes to remount children
  const revision = createMemo(() => {
    const cfg = domainAssetsConfig?.();
    const cid = cfg?.assets_cid || cfg?.cid || "";
    const tabs = cfg?.modules?.tabs || "";
    return `${domainName()}|${cid}|${tabs}`;
  });

  return (
    <Container>
      <ToTopButton />
      <div class="w-full">
        <Show when={revision()} keyed>
          {() => <TabsBar />}
        </Show>
      </div>
    </Container>
  );
}
</file>

<file path="src/components/tabs/index.js">
// src/components/tabs/index.js
import ActualTab from "./ActualTab.jsx";
import CommentsTab from "./CommentsTab.jsx";
import ForYouTab from "./ForYouTab.jsx";
import LeadersTab from "./LeadersTab.jsx";
import NewTab from "./NewTab.jsx";

/**
 * Registry of tab type -> component.
 * Add more mappings as you implement new tab types.
 */
const REGISTRY = {
  actual: ActualTab,
  comments: CommentsTab,
  "for-you": ForYouTab,
  leaders: LeadersTab,
  new: NewTab,
};

export function getTabComponent(type) {
  const key = String(type || "").toLowerCase();
  return REGISTRY[key] || null;
}
</file>

<file path="src/components/tabs/RightRailLayout.jsx">
// src/components/tabs/RightRailLayout.jsx
import { Show } from "solid-js";
import RightRail from "../layout/RightRail.jsx";

const HEADER_H = 48;

export default function RightRailLayout(props) {
  return (
    <section
      class="w-full"
      style={{ "min-height": `calc(100vh - ${HEADER_H}px)` }}
    >
      <Show
        when={props.rightPanelConfig?.available}
        fallback={
          // When the right panel is unavailable, render content in a single column.
          <div>{props.children}</div>
        }
      >
        {/* When the right panel is available, render the two-column grid. */}
        <div class="grid gap-4 grid-cols-1 md:grid-cols-[minmax(0,1fr)_320px] items-start">
          <div>{props.children}</div>
          <aside class="hidden md:block sticky top-16">
            <div class="rounded-lg border border-[hsl(var(--border))] bg-[hsl(var(--card))] text-[hsl(var(--card-foreground))]">
              <RightRail config={props.rightPanelConfig} />
            </div>
          </aside>
        </div>
      </Show>
    </section>
  );
}
</file>

<file path="src/components/ui/icons/UnknownUserIcon.jsx">
// src/components/ui/icons/UnknownUserIcon.jsx
export default function UnknownUserIcon(props) {
  return (
    <svg
      viewBox="0 0 250 250"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      preserveAspectRatio="xMidYMid slice"
      {...props}
    >
      <mask id="mask_unknown_user" mask-type="alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="250" height="250">
        <circle cx="125" cy="125" r="125" fill="white" />
      </mask>
      <g mask="url(#mask_unknown_user)">
        <path d="M190.314 204.7L145.31 180C145.31 180 144.347 196.897 124.5 196.897C104.653 196.897 102.661 180 102.661 180L58.5863 204.7C55.2674 206.552 52.8111 209.594 51.6495 213.198L40 250H121.812H124.202H209L197.351 213.264C196.189 209.627 193.667 206.552 190.314 204.7Z" fill="#646464" />
        <path d="M64.7864 78.2826C54.3768 93.2166 59.5648 118.206 59.5648 118.206L67.0002 108.881C67.9585 142.001 82.4989 156.338 92.6111 162.311C94.8582 165.597 97.4359 168.451 100.146 170.907C101.269 171.936 102.36 172.732 103.054 173.23C107.515 176.416 112.472 178.573 117.892 179.469C118.288 179.535 118.685 179.602 119.114 179.635C119.643 179.701 120.205 179.768 120.734 179.834C121.791 179.934 122.849 180 123.939 180C125.063 180 126.153 179.934 127.244 179.834C127.905 179.768 128.533 179.668 129.194 179.569C129.557 179.502 129.887 179.469 130.251 179.403C136.199 178.374 141.652 175.852 146.411 172.002C147.038 171.471 147.997 170.741 149.352 169.38C152.293 166.46 154.97 163.042 157.283 159.126C159.96 157.201 163.066 154.678 166.668 151.393C193.237 126.968 175.227 87.5416 175.227 87.5416L186 95.3737C184.513 64.7423 171.129 56.9103 171.129 56.9103L181.902 61.3904C170.006 26.312 134.316 35.9362 134.316 35.9362L144.725 27.4072C97.502 13.2364 81.9041 47.8502 81.9041 47.8502C54.013 54.8526 55.0044 83.7915 55.0044 83.7915L64.7864 78.2826ZM78.9629 99.4225C78.996 99.4225 79.0291 99.4225 79.0622 99.3894C79.2274 106.193 79.8222 110.938 79.8222 110.938H82.8957C82.6643 107.055 83.2924 101.812 84.2838 96.4026C95.3543 95.5729 113.86 91.159 124.798 72.3089L117.363 93.4157C117.363 93.4157 140.033 88.0063 141.354 63.5476C141.354 63.5476 149.715 82.5968 146.939 88.7364C146.939 88.7364 156.06 83.3269 158.109 71.5788C158.109 71.5788 166.371 98.4933 165.611 110.972H168.684C168.684 110.972 169.279 106.226 169.444 99.4225C169.444 99.4225 169.444 99.4225 169.477 99.4225C175.425 101.414 175.558 110.872 172.22 128.295C170.369 138.052 167.329 139.512 165.214 139.114C163.793 138.848 162.736 137.753 162.736 137.753L162.801 136.127V136.028C162.107 139.247 161.249 142.333 160.257 145.22C160.257 145.253 160.224 145.32 160.224 145.353C159.761 146.747 159.232 148.074 158.704 149.402C158.671 149.468 158.671 149.535 158.638 149.568C156.093 155.741 152.855 160.951 149.121 165.132C148.394 165.929 147.666 166.725 146.873 167.455C146.741 167.588 146.642 167.688 146.51 167.82C145.717 168.584 144.858 169.281 144.031 169.944C143.932 170.044 143.8 170.11 143.701 170.21C142.842 170.874 141.982 171.471 141.09 172.035C140.958 172.102 140.826 172.201 140.727 172.268C139.868 172.799 138.975 173.296 138.083 173.728C137.918 173.794 137.752 173.894 137.587 173.993C136.728 174.391 135.836 174.757 134.944 175.088C134.712 175.155 134.514 175.254 134.316 175.321C133.456 175.619 132.597 175.852 131.738 176.051C131.474 176.117 131.21 176.217 130.945 176.283C130.086 176.482 129.194 176.615 128.334 176.715C128.07 176.748 127.773 176.814 127.508 176.847C126.352 176.98 125.195 177.046 124.005 177.046C122.882 177.046 121.791 176.98 120.667 176.881C120.601 176.881 120.502 176.847 120.436 176.847C112.869 176.018 105.962 172.5 100.212 166.659C99.8153 166.261 99.4189 165.796 99.0554 165.398C97.5683 163.772 96.1472 161.946 94.8584 160.022C94.8254 159.988 94.7922 159.922 94.7592 159.889C94.1313 158.96 93.5367 157.964 92.9419 156.968C92.9088 156.902 92.8426 156.802 92.8096 156.703C92.2478 155.707 91.686 154.679 91.1572 153.65C91.0912 153.517 91.0579 153.417 90.9919 153.285C90.4962 152.256 90.0006 151.161 89.5049 150.066C89.4388 149.933 89.4056 149.8 89.3395 149.667C88.8769 148.572 88.4472 147.444 88.0176 146.282C87.9846 146.15 87.9187 146.017 87.8857 145.884C87.0265 143.395 86.2331 140.773 85.5722 138.019C85.4731 138.118 85.3409 138.218 85.1757 138.351C85.1426 138.351 85.143 138.384 85.1099 138.384C84.5481 138.749 83.7217 139.18 82.7634 139.18C80.6814 139.18 78.0048 137.189 76.3195 128.295C72.9157 110.872 73.0146 101.414 78.9629 99.4225Z" fill="#646464" />
      </g>
    </svg>
  );
}
</file>

<file path="src/components/ui/icons/VerifiedBadge.jsx">
// src/components/ui/icons/VerifiedBadge.jsx
// Compact, AAlegible verification badge. Sizing & color are controlled by parent.
export default function VerifiedBadge(props) {
    return (
        <svg {...props} viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" data-name="Layer 1" fill="currentColor">
            <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
            <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
            <g id="SVGRepo_iconCarrier">
                <path fill-rule="evenodd" clip-rule="evenodd"
                    d="M9.5924 3.20027C9.34888 3.4078 9.22711 3.51158 9.09706 3.59874C8.79896 3.79854 8.46417 
                    3.93721 8.1121 4.00672C7.95851 4.03705 7.79903 4.04977 7.48008 4.07522C6.6787 4.13918 6.278 
                    4.17115 5.94371 4.28923C5.17051 4.56233 4.56233 5.17051 4.28923 5.94371C4.17115 6.278 4.13918
                    6.6787 4.07522 7.48008C4.04977 7.79903 4.03705 7.95851 4.00672 8.1121C3.93721 8.46417 
                    3.79854 8.79896 3.59874 9.09706C3.51158 9.22711 3.40781 9.34887 3.20027 9.5924C2.67883 
                    10.2043 2.4181 10.5102 2.26522 10.8301C1.91159 11.57 1.91159 12.43 2.26522 13.1699C2.41811 
                    13.4898 2.67883 13.7957 3.20027 14.4076C3.40778 14.6511 3.51158 14.7729 3.59874 
                    14.9029C3.79854 15.201 3.93721 15.5358 4.00672 15.8879C4.03705 16.0415 4.04977 
                    16.201 4.07522 16.5199C4.13918 17.3213 4.17115 17.722 4.28923 18.0563C4.56233 18.8295 
                    5.17051 19.4377 5.94371 19.7108C6.278 19.8288 6.6787 19.8608 7.48008 19.9248C7.79903 
                    19.9502 7.95851 19.963 8.1121 19.9933C8.46417 20.0628 8.79896 20.2015 9.09706 20.4013C9.22711 
                    20.4884 9.34887 20.5922 9.5924 20.7997C10.2043 21.3212 10.5102 21.5819 10.8301 21.7348C11.57 
                    22.0884 12.43 22.0884 13.1699 21.7348C13.4898 21.5819 13.7957 21.3212 14.4076 20.7997C14.6511 
                    20.5922 14.7729 20.4884 14.9029 20.4013C15.201 20.2015 15.5358 20.0628 15.8879 
                    19.9933C16.0415 19.963 16.201 19.9502 16.5199 19.9248C17.3213 19.8608 17.722 19.8288 18.0563 
                    19.7108C18.8295 19.4377 19.4377 18.8295 19.7108 18.0563C19.8288 17.722 19.8608 17.3213 
                    19.9248 16.5199C19.9502 16.201 19.963 16.0415 19.9933 15.8879C20.0628 15.5358 20.2015 
                    15.201 20.4013 14.9029C20.4884 14.7729 20.5922 14.6511 20.7997 14.4076C21.3212 13.7957 
                    21.5819 13.4898 21.7348 13.1699C22.0884 12.43 22.0884 11.57 21.7348 10.8301C21.5819 
                    10.5102 21.3212 10.2043 20.7997 9.5924C20.5922 9.34887 20.4884 9.22711 20.4013 
                    9.09706C20.2015 8.79896 20.0628 8.46417 19.9933 8.1121C19.963 7.95851 19.9502 7.79903 
                    19.9248 7.48008C19.8608 6.6787 19.8288 6.278 19.7108 5.94371C19.4377 5.17051 18.8295 
                    4.56233 18.0563 4.28923C17.722 4.17115 17.3213 4.13918 16.5199 4.07522C16.201 4.04977 
                    16.0415 4.03705 15.8879 4.00672C15.5358 3.93721 15.201 3.79854 14.9029 3.59874C14.7729 
                    3.51158 14.6511 3.40781 14.4076 3.20027C13.7957 2.67883 13.4898 2.41811 13.1699 
                    2.26522C12.43 1.91159 11.57 1.91159 10.8301 2.26522C10.5102 2.4181 10.2043 2.67883 9.5924 
                    3.20027ZM16.3735 9.86314C16.6913 9.5453 16.6913 9.03 16.3735 8.71216C16.0557 8.39433 
                    15.5403 8.39433 15.2225 8.71216L10.3723 13.5624L8.77746 11.9676C8.45963 11.6498 7.94432 
                    11.6498 7.62649 11.9676C7.30866 12.2854 7.30866 12.8007 7.62649 13.1186L9.79678 
                    15.2889C10.1146 15.6067 10.6299 15.6067 10.9478 15.2889L16.3735 9.86314Z" >
                </path>
            </g>
        </svg>
    );
}
</file>

<file path="src/components/ui/BrandLogo.jsx">
// src/components/ui/BrandLogo.jsx
/* src/components/ui/BrandLogo.jsx */
import { createMemo, createSignal, onMount, onCleanup, Show, createEffect } from "solid-js";
import { useApp } from "../../context/AppContext";
import { dbg } from "../../utils/debug";

export default function BrandLogo(props) {
  const app = useApp();
  const { t, domainAssetsConfig, assetUrl } = app;

  // Single source of truth for the domain name (falls back to i18n brand name)
  const domainTitle = createMemo(() => {
    const fromCfg = app.config?.()?.domain?.trim();
    const fallback = t("brand.name");
    return fromCfg || (fallback && !/^\[.+\]$/.test(fallback) ? fallback : "SAVVA");
  });

  // Theme + mobile detection
  const [isDark, setIsDark] = createSignal(false);
  const [isMobile, setIsMobile] = createSignal(false);
  onMount(() => {
    const el = document.documentElement;
    const updateDark = () => setIsDark(el.classList.contains("dark"));
    updateDark();
    const mo = new MutationObserver(updateDark);
    mo.observe(el, { attributes: true, attributeFilter: ["class"] });

    const mql = window.matchMedia("(max-width: 640px)");
    const onMQ = (e) => setIsMobile(!!e.matches);
    onMQ(mql);
    mql.addEventListener ? mql.addEventListener("change", onMQ) : mql.addListener(onMQ);

    onCleanup(() => {
      mo.disconnect();
      mql.removeEventListener ? mql.removeEventListener("change", onMQ) : mql.removeListener(onMQ);
    });
  });

  // logos from active domain assets config
  const logos = createMemo(() => {
    const cfg = domainAssetsConfig?.();
    const raw = cfg?.logos ?? cfg?.logo ?? null;
    if (!raw) return null;
    if (typeof raw === "string") return { default: raw };
    return {
      dark_mobile:  raw.dark_mobile  ?? raw.mobile_dark  ?? null,
      light_mobile: raw.light_mobile ?? raw.mobile_light ?? null,
      mobile:       raw.mobile       ?? null,
      dark:         raw.dark         ?? null,
      light:        raw.light        ?? null,
      default:      raw.default      ?? raw.fallback     ?? null,
    };
  });

  const relPath = createMemo(() => {
    const l = logos();
    if (!l) return "";
    const dark = isDark();
    const mobile = isMobile();
    const order = dark
      ? (mobile ? [l.dark_mobile, l.dark, l.mobile, l.default, l.light] : [l.dark, l.default, l.light, l.mobile])
      : (mobile ? [l.light_mobile, l.light, l.mobile, l.default, l.dark] : [l.light, l.default, l.dark, l.mobile]);
    return order.find(Boolean) || "";
  });

  const src = createMemo(() => (relPath() ? assetUrl(relPath()) : ""));

  //  Debug: log whenever the chosen logo src changes
  createEffect(() => {
    const s = src();
    if (!s) return;
    dbg.log("logo", "BrandLogo src picked", {
      src: s,
      relPath: relPath(),
      dark: isDark(),
      mobile: isMobile(),
      domain: app.config?.()?.domain,
      activePrefix: app.domainAssetsPrefix?.(),
      source: app.domainAssetsSource?.(),
    });
  });

  const [imgBroken, setImgBroken] = createSignal(false);
  // reset broken flag whenever src changes
  createMemo(() => { src(); setImgBroken(false); });

  return (
    <div class="flex items-center">
      <Show when={src() && !imgBroken()} fallback={
        <span class={props.classTitle || "text-xl font-bold"}>{domainTitle()}</span>
      }>
        <img
          src={src()}
          alt={t("brand.logoAlt", { domain: domainTitle() })}
          class={props.class || "h-8 w-auto"}
          decoding="async"
          loading="eager"
          onError={() => {
            dbg.log("logo", "BrandLogo image failed to load", { src: src(), relPath: relPath() });
            setImgBroken(true);
          }}
        />
      </Show>
    </div>
  );
}
</file>

<file path="src/components/ui/IpfsImage.jsx">
// src/components/ui/IpfsImage.jsx
import { createSignal, createEffect, Show } from "solid-js";
import { useApp } from "../../context/AppContext.jsx";
import { ipfs } from "../../ipfs/index.js";
import { pushErrorToast } from "./toast.js";
import Spinner from "./Spinner.jsx";

export default function IpfsImage(props) {
  const app = useApp();
  const [imageUrl, setImageUrl] = createSignal(null);
  const [loading, setLoading] = createSignal(true);
  const [error, setError] = createSignal(false);
  const [notFound, setNotFound] = createSignal(false);

  createEffect(async () => {
    setLoading(true);
    setError(false);
    setNotFound(false);
    setImageUrl(null);

    const gateways = app.activeIpfsGateways();
    if (!props.src || gateways.length === 0) {
      console.warn("[IpfsImage] Aborting: No src or no gateways available.", { src: props.src, gateways });
      setError(true);
      setLoading(false);
      return;
    }

    try {
      const { url } = await ipfs.fetchBest(app, props.src);
      setImageUrl(url);
    } catch (e) {
      if (e.is404) {
        setNotFound(true);
      } else {
        pushErrorToast(e, {
          context: "IPFS image failed to load.",
          cid: props.src,
        });
        setError(true);
      }
      console.error(`[IpfsImage] All gateways failed for ${props.src}:`, e.causes || e);
    } finally {
      setLoading(false);
    }
  });

  return (
    <div class={`relative w-full h-full ${props.class || ""}`}>
      <Show when={loading()}>
        <div class="absolute inset-0 flex items-center justify-center bg-[hsl(var(--muted))]">
          <Spinner />
        </div>
      </Show>
      <Show when={!loading() && imageUrl()}>
        <img
          src={imageUrl()}
          alt={props.alt || "IPFS Image"}
          class="absolute inset-0 w-full h-full object-cover"
        />
      </Show>
      <Show when={notFound()}>
        <div class="absolute inset-0 flex items-center justify-center bg-[hsl(var(--muted))] text-center p-2">
          <span class="text-xs text-[hsl(var(--muted-foreground))]">{app.t("ipfs.imageNotAvailable")}</span>
        </div>
      </Show>
      <Show when={!loading() && error() && !notFound()}>
        <div class="absolute inset-0 flex items-center justify-center bg-[hsl(var(--muted))]">
          {/* Generic error icon can go here */}
        </div>
      </Show>
    </div>
  );
}
</file>

<file path="src/components/Toaster.jsx">
// src/components/Toaster.jsx
import { For, Show } from "solid-js";
import { toasts, dismissToast, toggleToast } from "./ui/toast";

const typeStyles = {
  info:    "bg-blue-600",
  success: "bg-emerald-600",
  warning: "bg-amber-600",
  error:   "bg-red-600",
};

function pretty(obj) {
  try { return JSON.stringify(obj, null, 2); } catch { return String(obj); }
}

async function copy(text) {
  try { await navigator.clipboard.writeText(text); } catch {}
}

export default function Toaster() {
  return (
    // Full-width bottom bar container; toasts align right when compact.
    // We disable pointer events on the container so it doesn't block the page,
    // and re-enable them on each toast.
    <div class="fixed inset-x-0 bottom-0 z-[1000] p-3 pointer-events-none">
      <div class="flex flex-col gap-2 items-end">
        <For each={toasts()}>
          {(t) => {
            const headerColor = typeStyles[t.type] || typeStyles.info;
            return (
              // When expanded: stretch to full width; when compact: hug right (max ~28rem)
              <div
                class={`pointer-events-auto w-full ${
                  t.expanded ? "" : "sm:w-[28rem] max-w-[92vw]"
                }`}
              >
                <div class="text-white rounded shadow overflow-hidden">
                  {/* Header bar */}
                  <div class={`flex items-center justify-between px-3 py-2 ${headerColor}`}>
                    <span class="text-sm font-medium">{t.message}</span>
                    <div class="flex items-center gap-1">
                      <Show when={t.details}>
                        <button
                          class="px-2 py-1 rounded bg-black/20 hover:bg-black/30 text-xs"
                          onClick={() => toggleToast(t.id)}
                          aria-expanded={t.expanded}
                          title={t.expanded ? "Hide details" : "Show details"}
                        >
                          {t.expanded ? "Hide" : "Details"}
                        </button>
                      </Show>
                      <button
                        class="px-2 py-1 rounded bg-black/20 hover:bg-black/30"
                        onClick={() => dismissToast(t.id)}
                        aria-label="Close notification"
                      >
                        
                      </button>
                    </div>
                  </div>

                  {/* Details panel  takes full width, tall & scrollable */}
                  <Show when={t.expanded && t.details}>
                    <div class="bg-gray-900 text-gray-100 px-4 py-3 max-h-[60vh] overflow-auto">
                      <pre class="whitespace-pre-wrap break-words text-[12px] leading-tight">
{pretty(t.details)}
                      </pre>
                      <div class="mt-2 flex justify-end">
                        <button
                          class="px-2 py-1 rounded bg-gray-700 hover:bg-gray-600 text-xs"
                          onClick={() => copy(pretty(t.details))}
                          title="Copy details to clipboard"
                        >
                          Copy
                        </button>
                      </div>
                    </div>
                  </Show>
                </div>
              </div>
            );
          }}
        </For>
      </div>
    </div>
  );
}
</file>

<file path="src/hooks/useConnect.js">
// src/hooks/useConnect.js
import { createSignal, onMount } from "solid-js";
import { parse } from "yaml";
import { configureEndpoints, httpBase } from "../net/endpoints";

export function useConnect() {
  const [config, setConfig] = createSignal(null);
  const [info, setInfo] = createSignal(null);
  const [error, setError] = createSignal(null);
  const [loading, setLoading] = createSignal(true);

  onMount(async () => {
    try {
      const res = await fetch("/default_connect.yaml", { cache: "no-store" });
      if (!res.ok) throw new Error(`YAML load failed: ${res.status}`);
      const text = await res.text();
      const data = parse(text);
      if (!data.backendLink) throw new Error("Missing backendLink in config");

      // Configure endpoints once
      configureEndpoints({
        backendLink: data.backendLink,
        domain: data.domain || "",
      });

      const cfg = {
        domain: data.domain || "",
        backendLink: httpBase(), // normalized canonical HTTP base
        default_ipfs_link: data.default_ipfs_link || ""
      };
      setConfig(cfg);

      const infoRes = await fetch(httpBase() + "info", { headers: { Accept: "application/json" } });
      if (!infoRes.ok) throw new Error(`/info failed: ${infoRes.status}`);
      setInfo(await infoRes.json());
    } catch (err) {
      setError(err);
    } finally {
      setLoading(false);
    }
  });

  return { config, info, error, loading };
}
</file>

<file path="src/hooks/useTheme.js">
// src/hooks/useTheme.js
import { createSignal, onMount } from "solid-js";

export function useTheme() {
  const [theme, setTheme] = createSignal("light");

  onMount(() => {
    const savedTheme = localStorage.getItem("theme") || "light";
    setTheme(savedTheme);
    document.documentElement.classList.toggle("dark", savedTheme === "dark");
  });

  const toggleTheme = () => {
    const next = theme() === "dark" ? "light" : "dark";
    setTheme(next);
    document.documentElement.classList.toggle("dark", next === "dark");
    try { localStorage.setItem("theme", next); } catch {}
  };

  // Expose theme signal for external use
  useTheme.theme = theme;

  return [theme, toggleTheme];
}
</file>

<file path="src/net/WsConnector.jsx">
// src/net/WsConnector.jsx
import { onMount, onCleanup, createSignal } from "solid-js";
import { useApp } from "../context/AppContext.jsx";
import { ensureWsStarted, getWsClient, getWsApi, onAlert, offAlert } from "./wsRuntime";
import { wsUrl } from "./endpoints";
import { pushToast } from "../components/ui/toast.js"; // Import the toast helper
import { useI18n } from "../i18n/useI18n.js"; // Import i18n for the message

let _mounted = false;

export default function WsConnector() {
  if (_mounted) return null;
  _mounted = true;

  const app = useApp();
  const { t } = useI18n();

  // Expose helpers from the singleton runtime
  const ws = getWsClient();
  const api = getWsApi();

  app.ws = ws;
  app.wsUrl = wsUrl;
  app.wsStatus = () => ws.status();
  app.wsConnected = () => ws.status() === "open";
  app.wsReconnect = (r) => ws.reconnect(r || "manual");
  app.wsCall = api.call;
  app.wsMethod = api.method;
  app.alertBus = { on: onAlert, off: offAlert };
  app.onAlert = onAlert;
  app.offAlert = offAlert;

  onMount(() => {
    ensureWsStarted("connector-mount");

    // This logic prevents the toast from showing on every reconnect attempt.
    // It only shows if the *initial* connection fails.
    const [hasConnectedOnce, setHasConnectedOnce] = createSignal(false);

    const onOpen = () => {
      setHasConnectedOnce(true);
    };

    const onClose = () => {
      if (!hasConnectedOnce()) {
        pushToast({
          type: "warning", // A warning is less severe than a hard error
          message: t("error.ws.title"),
          details: t("error.ws.message"),
          autohideMs: 15000, // Show for 15 seconds
        });
      }
    };

    // Attach listeners to the WebSocket client
    ws.on("open", onOpen);
    ws.on("close", onClose);

    // Clean up listeners when the component is unmounted
    onCleanup(() => {
      ws.off("open", onOpen);
      ws.off("close", onClose);
    });
  });

  return null;
}
</file>

<file path="src/utils/assetsDiagnostics.js">
// src/utils/assetsDiagnostics.js
// Utility to assess domain asset resources and common pitfalls.

import { fetchWithTimeout } from "./net";

function join(base, rel) {
  const b = base?.endsWith("/") ? base : (base || "") + "/";
  const r = String(rel || "").replace(/^\/+/, "");
  return b + r;
}

function summarizeLogos(cfg) {
  if (!cfg) return { has: false, fields: [], pickable: [] };
  const raw = cfg.logos ?? cfg.logo ?? null;
  if (!raw) return { has: false, fields: [], pickable: [] };
  if (typeof raw === "string") return { has: true, fields: ["default"], pickable: ["default"] };
  const l = {
    dark_mobile:  raw.dark_mobile  ?? raw.mobile_dark  ?? null,
    light_mobile: raw.light_mobile ?? raw.mobile_light ?? null,
    mobile:       raw.mobile ?? null,
    dark:         raw.dark   ?? null,
    light:        raw.light  ?? null,
    default:      raw.default?? raw.fallback ?? null,
  };
  const fields = Object.entries(l).filter(([,v]) => !!v).map(([k]) => k);
  return { has: fields.length > 0, fields, pickable: fields };
}

export async function assessAssets(p) {
  const fetcher = p.fetcher || ((url, opts) => fetchWithTimeout(url, { timeoutMs: 8000, ...(opts || {}) }));
  const base = String(p.assetsBaseUrl || "");
  const domain = String(p.selectedDomainName || "");
  const computedDomainPrefix = base && domain ? join(base, domain + "/") : "";
  const activePrefix = String(p.domainAssetsPrefixActive || "");
  const primaryConfigUrl = computedDomainPrefix ? join(computedDomainPrefix, "config.yaml") : "";
  const defaultConfigUrl = "/domain_default/config.yaml";

  async function check(url) {
    if (!url) return { url, ok: false, status: 0, exists: false, error: null };
    let res, method = "HEAD";
    try {
      res = await fetcher(url, { method, cache: "no-store" });
    } catch (e) {
      try { method = "GET"; res = await fetcher(url, { method, cache: "no-store" }); }
      catch (e2) { return { url, ok: false, status: -1, exists: false, error: String(e2) }; }
    }
    if (method === "HEAD" && !res.ok && res.status !== 404) {
      try { method = "GET"; res = await fetcher(url, { method, cache: "no-store" }); }
      catch (e3) { return { url, ok: false, status: -1, exists: false, error: String(e3) }; }
    }
    const exists = res.ok && res.status !== 404;
    return { url, ok: res.ok, status: res.status, exists, error: null };
  }

  const primary = primaryConfigUrl ? await check(primaryConfigUrl) : { url: primaryConfigUrl, ok: false, status: 0, exists: false };
  const fallback = await check(defaultConfigUrl);

  const appConfigUrl = join(activePrefix, "config.yaml");

  const cfg = p.domainAssetsConfig || null;
  const logos = summarizeLogos(cfg);
  const hasLocales    = !!(cfg && (cfg.locales || cfg.i18n));
  const hasTabs       = !!(cfg && (cfg.modules?.tabs || cfg.tabs || cfg.ui?.tabs));            // fixed
  const hasCategories = !!(cfg && (cfg.modules?.categories || cfg.categories || cfg.ui?.categories)); // fixed

  const fav = cfg?.favicon || null;
  const hasFavicon = !!(fav && (fav.base || fav["16"] || fav["32"] || fav["apple-touch-icon"] || fav.manifest || fav["mask-icon"]?.href));

  const sampleFiles = [];
  if (logos.has) {
    const key = logos.pickable[0];
    const rel = (typeof (cfg?.logos ?? cfg?.logo) === "string")
      ? (cfg?.logos ?? cfg?.logo)
      : (cfg?.logos?.[key] ?? cfg?.logo?.[key]);
    if (rel) sampleFiles.push({ kind: "logo", relPath: rel });
  }
  if (cfg?.locales?.length) {
    const fr = cfg.locales.find(x => x?.path || x?.dictionary) || cfg.locales[0];
    const rel = fr?.path || fr?.dictionary;
    if (rel) sampleFiles.push({ kind: "locale", relPath: rel });
  }
  if (cfg?.modules?.tabs || cfg?.tabs?.path) {
    const rel = cfg?.modules?.tabs || cfg?.tabs?.path;
    sampleFiles.push({ kind: "tabs", relPath: rel });
  }
  if (hasFavicon) {
    const favRel = fav["32"] || fav["16"] || fav.base || fav["apple-touch-icon"] || fav.manifest || fav["mask-icon"]?.href;
    if (favRel) sampleFiles.push({ kind: "favicon", relPath: favRel });
  }

  const resolvedSamples = await Promise.all(sampleFiles.map(async (sf) => {
    const url = join(activePrefix, sf.relPath);
    const r = await check(url);
    return { ...sf, url, exists: r.exists, status: r.status };
  }));

  return {
    env: p.env || "prod",
    domain,
    assetsBaseUrl: base,
    computedDomainPrefix,
    activePrefix,
    appSource: p.domainAssetsSource || null,
    appConfigUrl,                   // active packs config (may be /domain_default/)
    primaryConfig: { url: primary.url, exists: !!primary.exists, status: primary.status, error: primary.error },
    defaultConfig: { url: fallback.url, exists: !!fallback.exists, status: fallback.status },
    appParsedConfigPresence: {
      hasConfigObject: !!cfg,
      hasLogos: !!logos.has, logoFields: logos.fields,
      hasLocales, hasTabs, hasCategories, hasFavicon
    },
    resolvedSamples,
  };
}
</file>

<file path="index.html">
<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SAVVA  SolidJS</title>

  <!-- Preload theme to avoid flash -->
  <script>
    (function () {
      try {
        const saved = localStorage.getItem("theme");
        const systemDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
        const theme = saved || (systemDark ? "dark" : "light");
        document.documentElement.classList.toggle("dark", theme === "dark");
      } catch { }
    })();
  </script>

  <script>
    (function () {
      // If there is a real path (e.g., /settings) but no hash, rewrite to hash form: /#/settings
      if (!location.hash && location.pathname !== "/") {
        var newHash = "#" + location.pathname + location.search + location.hash;
        history.replaceState(null, "", "/" + newHash);
      }
    })();
  </script>


  <!-- Load app after theme class is set -->
  <script type="module" src="/src/index.jsx"></script>
</head>

<body>
  <div id="root"></div>
</body>

</html>
</file>

<file path="tailwind.config.js">
// tailwind.config.js
export default {
  darkMode: "class",
  content: ["./index.html", "./src/**/*.{js,ts,jsx,tsx}"],
  theme: { extend: {} },
  plugins: [],
};
</file>

<file path="public/domain_default/domain.css">
:root {
  --gradient: linear-gradient(to top left, #000c40, #607d8b);
  --background: 243 100% 98.26%;
  --foreground: 243 10% 0.52%;

  --muted: 243 10% 91.3%;
  --muted-foreground: 243 5% 41.3%;

  --popover: 243 10% 91.3%;
  --popover-foreground: 243 10% 0.65%;

  --card: 243 10% 91.3%;
  --card-foreground: 243 10% 0.65%;

  --border: 243 15% 89.52%;
  --input: 243 15% 89.52%;

  --primary: 243 100% 13%;
  --primary-foreground: 243 2% 91.3%;

  --secondary: 243 5% 81.73%;
  --secondary-foreground: 243 7% 11.3%;

  --accent: 243 5% 95.65%;
  --accent-foreground: 243 7% 11.3%;

  --destructive: 0 84.2% 60.2%;
  --destructive-foreground: 0 0% 98%;

  --ring: 243 100% 13%;

  --radius: 0.5rem;

  --tabs-justify: center;
}

.dark {
  /* CSS: .bg-gradient { background: var(--gradient) } */
  --gradient: linear-gradient(to top left, #acb6e5, #86fde8);

  --background: 244 33.800000000000004% 6.32%;
  --foreground: 244 5.2% 98.95%;

  --muted: 244 26% 23.700000000000003%;
  --muted-foreground: 244 5.2% 57.9%;

  --popover: 244 54.6% 10.27%;
  --popover-foreground: 244 5.2% 98.95%;

  --card: 244 54.6% 10.27%;
  --card-foreground: 244 5.2% 98.95%;

  --border: 244 26% 23.700000000000003%;
  --input: 244 26% 23.700000000000003%;

  --primary: 244 52% 79%;
  --primary-foreground: 244 5.2% 7.9%;

  --secondary: 244 26% 23.700000000000003%;
  --secondary-foreground: 244 5.2% 98.95%;

  --accent: 244 26% 23.700000000000003%;
  --accent-foreground: 244 5.2% 98.95%;

  --destructive: 0 62.8% 30.6%;
  --destructive-foreground: 244 5.2% 98.95%;

  --ring: 244 52% 79%;
}
</file>

<file path="src/components/feed/ContentFeed.jsx">
// src/components/feed/ContentFeed.jsx
import { createSignal, onCleanup, onMount, For, Show, createEffect, on } from "solid-js";
import { useApp } from "../../context/AppContext.jsx";
import PostListView from "./PostListView.jsx";

export default function ContentFeed(props) {
  const { t } = useApp();
  const [items, setItems] = createSignal([]);
  const [page, setPage] = createSignal(0);
  const [hasMore, setHasMore] = createSignal(true);
  const [loading, setLoading] = createSignal(false);

  async function loadMore() {
    if (loading() || !hasMore()) return;
    setLoading(true);
    try {
      const nextPage = page() + 1;
      const chunk = (await props.fetchPage?.(nextPage, props.pageSize || 12)) ?? [];
      if (!chunk.length) setHasMore(false);
      setItems((prev) => prev.concat(chunk));
      setPage(nextPage);
    } finally {
      setLoading(false);
    }
  }

  onMount(() => {
    loadMore();
    const handleScroll = () => {
      const scrollThreshold = 600;
      const scrolledToBottom = window.innerHeight + window.scrollY >= document.documentElement.scrollHeight - scrollThreshold;
      if (scrolledToBottom) loadMore();
    };
    let timeoutId = null;
    const throttledHandleScroll = () => {
      if (timeoutId === null) {
        timeoutId = setTimeout(() => { handleScroll(); timeoutId = null; }, 200);
      }
    };
    window.addEventListener('scroll', throttledHandleScroll, { passive: true });
    onCleanup(() => {
      window.removeEventListener('scroll', throttledHandleScroll);
      if (timeoutId) clearTimeout(timeoutId);
    });
  });

  createEffect(on(() => props.resetOn, () => {
    setItems([]);
    setPage(0);
    setHasMore(true);
    setLoading(false);
    queueMicrotask(loadMore);
  }, { defer: true }));

  return (
    <div class="w-full">
      <PostListView
        items={items()}
        mode={props.mode}
        isRailVisible={props.isRailVisible}
      />
      <Show when={loading()}>
        <div class="py-4 text-sm text-[hsl(var(--muted-foreground))] text-center">{t("common.loading")}</div>
      </Show>
    </div>
  );
}
</file>

<file path="src/components/ui/Tabs.jsx">
// src/components/ui/Tabs.jsx
import { For, createSignal, onMount, onCleanup } from "solid-js";
import { useApp } from "../../context/AppContext.jsx";

export default function Tabs(props) {
  const app = useApp();
  const { t } = app;

  const items = () => props.items || [];
  const value = () => props.value;
  const [compact, setCompact] = createSignal(false);

  onMount(() => {
    // Parse the prop more robustly.
    const compactWidth = parseInt(props.compactWidth, 10);

    // Check if we received a valid number and enable the feature.
    if (!isNaN(compactWidth) && compactWidth > 0) {
      console.log(`[Tabs] Responsive mode enabled with width: ${compactWidth}`);

      const checkWidth = () => {
        setCompact(window.innerWidth <= compactWidth);
      };

      checkWidth(); // Run on initial mount
      window.addEventListener("resize", checkWidth, { passive: true });
      onCleanup(() => window.removeEventListener("resize", checkWidth));
    } else {
      console.log("[Tabs] Responsive mode disabled (compactWidth prop not provided or invalid).");
    }
  });

  return (
    <ul
      class={`tabs ${props.class || ""}`}
      role="tablist"
      aria-label={t("tabs.aria")}
      data-compact={compact() ? "true" : "false"}
    >
      <For each={items()}>
        {(it) => {
          const active = () => it.id === value();
          const disabled = !!it.disabled;
          const tabId = `tab-${it.id}`;

          const onClick = (e) => {
            e.preventDefault();
            if (disabled || active()) return;
            props.onChange?.(it.id);
          };

          const onKeyDown = (e) => {
            if (disabled) return;
            if (e.key === "Enter" || e.key === " ") {
              e.preventDefault();
              if (!active()) props.onChange?.(it.id);
            }
          };

          return (
            <li classList={{ active: active() }} role="presentation" aria-selected={active()}>
              <a
                id={tabId}
                href="#"
                role="tab"
                aria-selected={active() ? "true" : "false"}
                aria-disabled={disabled ? "true" : "false"}
                aria-label={it.label}
                title={it.label}
                tabIndex={disabled ? -1 : 0}
                onClick={onClick}
                onKeyDown={onKeyDown}
              >
                {it.icon ? <span class="tab__icon" aria-hidden="true">{it.icon}</span> : null}
                <span class="tab__label">{it.label}</span>
              </a>
            </li>
          );
        }}
      </For>
    </ul>
  );
}
</file>

<file path="src/ipfs/index.js">
// src/ipfs/index.js
import { fetchWithTimeout } from "../utils/net.js";

function ensureSlash(s) { return s.endsWith("/") ? s : s + "/"; }
function stripPrefix(s, p) { return s.startsWith(p) ? s.slice(p.length) : s; }

function normalizeInput(input) {
  let s = String(input || "").trim();
  if (!s) throw new Error("ipfs: empty input");
  s = stripPrefix(s, "ipfs://");
  s = stripPrefix(s, "/ipfs/");
  s = stripPrefix(s, "ipfs/");
  return s;
}

function buildUrl(baseGateway, cidPath) {
  const base = String(baseGateway || "").trim().replace(/\/+$/, "");
  const path = String(cidPath || "").trim().replace(/^\/+/g, "");
  if (!base || !path) return "";
  const hasIpfs = /\/ipfs$/i.test(base);
  const prefix = hasIpfs ? `${base}/` : `${base}/ipfs/`;
  return prefix + path;
}

async function tryGateways(cidPath, gateways, { timeoutMs = 8000, init = {} } = {}) {
  const errors = [];
  for (const gw of gateways) {
    const url = buildUrl(gw, cidPath);
    try {
      const res = await fetchWithTimeout(url, { timeoutMs, ...init });
      if (res && res.ok) return { res, url, gateway: gw };

      const httpError = new Error(`Gateway ${gw} -> HTTP ${res.status}`);
      httpError.url = url;
      httpError.status = res.status; // Attach status for later inspection
      errors.push(httpError);

    } catch (e) {
      const networkError = new Error(`Gateway ${gw} -> ${e?.name || "Error"}: ${e?.message || e}`);
      networkError.url = url;
      errors.push(networkError);
    }
  }
  const err = new Error("All IPFS gateways failed");
  err.causes = errors;
  // If ANY error was a 404, it's likely a bad CID. Flag it.
  if (errors.some(e => e.status === 404)) {
      err.is404 = true;
  }
  throw err;
}

async function fetchIpfs(input, opts = {}) {
  const { gateways = [], ...rest } = opts;
  if (!gateways || gateways.length === 0) throw new Error("ipfs.fetch: no gateways provided");
  const cidPath = normalizeInput(input);
  const { res, url, gateway } = await tryGateways(cidPath, gateways, { init: rest });
  return { response: res, url, gateway };
}

async function getJSON(input, opts) {
  const { response, url, gateway } = await fetchIpfs(input, { ...opts, headers: { Accept: "application/json", ...(opts?.headers || {}) } });
  return { data: await response.json(), url, gateway };
}

async function getText(input, opts) {
  const { response, url, gateway } = await fetchIpfs(input, opts);
  return { data: await response.text(), url, gateway };
}

async function getBlob(input, opts) {
  const { response, url, gateway } = await fetchIpfs(input, opts);
  return { data: await response.blob(), url, gateway };
}

async function getArrayBuffer(input, opts) {
  const { response, url, gateway } = await fetchIpfs(input, opts);
  return { data: await response.arrayBuffer(), url, gateway };
}

async function fetchBest(app, ipfsPath, options = {}) {
  const { postGateways = [], timeoutMs = 8000, ...fetchOptions } = options;
  const cidPath = normalizeInput(ipfsPath);
  let gatewaysToTry = [];
  
  let effectiveTimeout = timeoutMs;

  if (app.localIpfsEnabled() && app.localIpfsGateway()) {
    gatewaysToTry = [app.localIpfsGateway()];
    effectiveTimeout = 30000;
  } else {
    const systemGateways = app.remoteIpfsGateways() || [];
    gatewaysToTry = [...new Set([...postGateways, ...systemGateways])];
  }

  if (gatewaysToTry.length === 0) {
    throw new Error("No IPFS gateways available to try.");
  }

  return tryGateways(cidPath, gatewaysToTry, { timeoutMs: effectiveTimeout, init: fetchOptions });
}

async function getJSONBest(app, ipfsPath, options = {}) {
  const { response, url, gateway } = await fetchBest(app, ipfsPath, {
    ...options,
    headers: { Accept: "application/json", ...(options.headers || {}) },
  });
  return { data: await response.json(), url, gateway };
}

export const ipfs = {
  fetch: fetchIpfs,
  getJSON,
  getText,
  getBlob,
  getArrayBuffer,
  fetchBest,
  getJSONBest,
  normalizeInput,
  buildUrl,
};
</file>

<file path="src/pages/Docs.jsx">
// src/pages/Docs.jsx
import { createMemo } from "solid-js";
import { useApp } from "../context/AppContext.jsx";
import { useHashRouter } from "../routing/hashRouter";
import DocsIndex from "../components/docs/DocsIndex.jsx";
import DocsContent from "../components/docs/DocsContent.jsx";
import ClosePageButton from "../components/ui/ClosePageButton.jsx";

const trim = (s) => String(s || "").replace(/^\/+|\/+$/g, "");
const fileFromRoute = (route) => {
  if (!String(route || "").startsWith("/docs")) return "index.md";
  const rest = String(route).slice("/docs".length);
  return trim(rest) || "index.md";
};

export default function Docs() {
  const app = useApp();
  const { route, navigate } = useHashRouter();
  const file = createMemo(() => fileFromRoute(route()));
  const onPick = (rel) => navigate(`/docs/${trim(rel || "index.md")}`);
  const title = createMemo(() => app.t("docs.title"));

  return (
    <div class="sv-container sv-container--no-gutter">
      <div class="grid grid-cols-1 md:grid-cols-[280px_minmax(0,1fr)] gap-6 px-[var(--sv-container-gutter)] py-6">
      <ClosePageButton />
        {/* Left sidebar */}
        <aside class="min-w-0">
          <div>
            <div class="flex items-center justify-between">
              <h2 class="text-sm font-semibold mb-2">{title()}</h2>
            </div>
            <DocsIndex active={file()} onPick={onPick} />
          </div>
        </aside>

        {/* Right content */}
        <main class="min-w-0">
          <DocsContent relPath={file()} onPick={onPick} />
        </main>
      </div>
    </div>
  );
}
</file>

<file path="src/index.jsx">
import { render } from "solid-js/web";
import "./index.css";
import App from "./App";
import { AppProvider } from "./context/AppContext.jsx";

const root = document.getElementById("root");

render(() => (
  <AppProvider>
    <App />
  </AppProvider>
), root);
</file>

<file path="src/components/settings/DeveloperSection.jsx">
// src/components/settings/DeveloperSection.jsx
/* src/components/settings/DeveloperSection.jsx */
import { Show, createSignal } from "solid-js";
import { useApp } from "../../context/AppContext.jsx";
import { dbg } from "../../utils/debug";

export default function DeveloperSection() {
  const app = useApp();
  const { t } = app;
  const [copied, setCopied] = createSignal(false);

  async function copyLog() {
    const ok = await dbg.copy();
    setCopied(ok);
    setTimeout(() => setCopied(false), 1500);
  }

  return (
    <section class="bg-[hsl(var(--card))] text-[hsl(var(--card-foreground))] rounded-lg shadow p-4 space-y-3">
      <h3 class="text-lg font-medium">{t("settings.developer.title")}</h3>

      {/* Show translation keys */}
      <label class="flex items-center gap-2">
        <input
          type="checkbox"
          checked={app.showKeys()}
          onInput={(e) => app.setShowKeys(e.currentTarget.checked)}
        />
        <span>{t("settings.developer.showKeys")}</span>
      </label>

      {/* Enable debug logging */}
      <label class="flex items-center gap-2">
        <input
          type="checkbox"
          checked={dbg.enabled()}
          onInput={(e) => dbg.enable(e.currentTarget.checked)}
        />
        <span>{t("settings.developer.debug.enable")}</span>
      </label>

      <div class="flex gap-2">
        <button
          class="px-3 py-1 rounded bg-[hsl(var(--secondary))] text-[hsl(var(--secondary-foreground))] hover:opacity-90"
          onClick={copyLog}
        >
          {t("settings.developer.debug.copy")}
        </button>
        <button
          class="px-3 py-1 rounded bg-[hsl(var(--secondary))] text-[hsl(var(--secondary-foreground))] hover:opacity-90"
          onClick={() => dbg.clear()}
        >
          {t("settings.developer.debug.clear")}
        </button>
      </div>

      <Show when={copied()}>
        <div class="text-xs text-[hsl(var(--primary))]">{t("settings.developer.debug.copied")}</div>
      </Show>
    </section>
  );
}
</file>

<file path="src/i18n/useI18n.js">
// src/i18n/useI18n.js
import { createSignal } from "solid-js";
import en from "./en";
import ru from "./ru";
import sr from "./sr";
import ua from "./ua";
import fr from "./fr";

// Used by the Lang selector for labels
export const LANG_INFO = {
  en: { code: "EN", name: "English" },
  ru: { code: "RU", name: "" },
  fr: { code: "FR", name: "Franais" },
  ua: { code: "UA", name: "" },
  sr: { code: "SR", name: "" },
};

// All built-in application dictionaries. The keys must match LANG_INFO.
const APP_DICTS = { en, ru, fr, ua, sr };

const DEFAULT_LANG = "en";
const LANG_KEY = "lang";
const SHOW_KEYS_KEY = "i18n_show_keys";

let i18nSingleton;

// !!!!! special comment to include the keys generated automatically
// !!!!! Do not edit this section manually
// t("tabs.title.leaders") t("tabs.title.actual") t("tabs.title.comments")
// t("tabs.title.new") t("tabs.title.for-you")

// Domain dictionaries loaded from assets/config.yaml
const [domainDicts, setDomainDicts] = createSignal({});

function normalizeLang(code) {
  const s = String(code || "").trim().toLowerCase();
  const [base] = s.split(/[-_]/); // "en-US" -> "en"
  return base || DEFAULT_LANG;
}

// Keep domain  app  EN fallback order
function resolveKey(lang, key) {
  const d = domainDicts();
  const fromDomain = d[lang]?.[key];
  if (fromDomain != null) return fromDomain;

  const fromApp = APP_DICTS[lang]?.[key];
  if (fromApp != null) return fromApp;

  if (APP_DICTS[DEFAULT_LANG]?.[key] != null) return APP_DICTS[DEFAULT_LANG][key];
  return `[${key}]`;
}

export function useI18n() {
  if (!i18nSingleton) {
    const readInitialLang = () => {
      try {
        const v = localStorage.getItem(LANG_KEY);
        return normalizeLang(v || DEFAULT_LANG);
      } catch {
        return DEFAULT_LANG;
      }
    };
    const readInitialShowKeys = () => {
      try {
        return localStorage.getItem(SHOW_KEYS_KEY) === "1";
      } catch {
        return false;
      }
    };

    const [lang, setLangSignal] = createSignal(readInitialLang());
    const [showKeys, setShowKeysSignal] = createSignal(readInitialShowKeys());

    function setLang(next) {
      const v = normalizeLang(next);
      setLangSignal(v); // <-- commit to signal (reactivity)
      try { localStorage.setItem(LANG_KEY, v); } catch {}
      if (typeof document !== "undefined") {
        document.documentElement.setAttribute("lang", v);
      }
      if (typeof window !== "undefined") {
        window.dispatchEvent(new CustomEvent("savva:lang", { detail: { lang: v } }));
      }
    }

    function setShowKeys(on) {
      const v = !!on;
      setShowKeysSignal(v);
      try { localStorage.setItem(SHOW_KEYS_KEY, v ? "1" : "0"); } catch {}
    }

    const t = (key, params) => {
      let base = resolveKey(lang(), key);
      if (params) {
        for (const [paramKey, paramValue] of Object.entries(params)) {
          base = base.replace(`{${paramKey}}`, String(paramValue));
        }
      }
      return showKeys() ? `${base} [${key}]` : base;
    };

    // Crosstab sync
    if (typeof window !== "undefined") {
      window.addEventListener("storage", (e) => {
        if (e.key === LANG_KEY && e.newValue) setLangSignal(normalizeLang(e.newValue));
        if (e.key === SHOW_KEYS_KEY) setShowKeysSignal(e.newValue === "1");
      });
    }

    // Expose union of builtins + domain dicts (useful for tooling/UI)
    const available = () => {
      const builtin = Object.keys(APP_DICTS);
      const domain = Object.keys(domainDicts());
      return Array.from(new Set([...builtin, ...domain]));
    };

    i18nSingleton = {
      t,
      lang,
      setLang,
      showKeys,
      setShowKeys,
      available,                 // dynamic list now
      setDomainDictionaries: (d) => setDomainDicts(d || {}),
    };
  }
  return i18nSingleton;
}
</file>

<file path="src/styles/tabs.css">
/* src/styles/tabs.css */

.tabs {
  --tabs-active-bg: hsl(var(--background));
  --tabs-active-fg: hsl(var(--foreground));
  --tabs-inactive-bg: hsl(var(--secondary));
  --tabs-inactive-fg: hsl(var(--secondary-foreground));
  --tabs-background: hsl(var(--card));

  list-style: none;
  margin: 0;
  padding-top: 5px;

  background: var(--tabs-background);
  background: var(--gradient);

  display: flex;
  justify-content: center;
  overflow-x: auto;
}

.tabs li {
  position: relative;
  flex-shrink: 0;
}

.tabs a {
  display: block;
  text-decoration: none;
  padding: 7px clamp(5px, 5vw, 80px);
  white-space: nowrap;
  color: var(--tabs-inactive-fg);
  background: var(--tabs-inactive-bg);
  border-top-left-radius: 15px;
  border-top-right-radius: 15px;
}

.tabs .active { z-index: 3; }
.tabs .active a {
  color: var(--tabs-active-fg);
  background: var(--tabs-active-bg);
}

.tabs li:before,
.tabs li:after,
.tabs li a:before,
.tabs li a:after {
  position: absolute;
  bottom: 0;
}

.tabs li:last-child:after,
.tabs li:last-child a:after,
.tabs li:first-child:before,
.tabs li:first-child a:before,
.tabs .active:after,
.tabs .active:before,
.tabs .active a:after,
.tabs .active a:before {
  content: "";
}

.tabs .active:before,
.tabs .active:after {
  background: var(--tabs-active-bg);
  z-index: 1;
}

.tabs li:before,
.tabs li:after {
  background: var(--tabs-inactive-bg);
  width: 10px;
  height: 10px;
}
.tabs li:before { left: -10px; }
.tabs li:after  { right: -10px; }

.tabs li a:before,
.tabs li a:after {
  width: 20px;
  height: 20px;
  border-radius: 10px;
  background: var(--tabs-background);
  z-index: 2;
}

.tabs .active a:after,
.tabs .active a:before {
  background: var(--tabs-inactive-bg);
}

.tabs li:first-child.active a:before,
.tabs li:last-child.active a:after {
  background: var(--tabs-background);
}

.tabs li a:before { left: -20px; }
.tabs li a:after  { right: -20px; }

.tabs li:first-child:before,
.tabs li:first-child a:before,
.tabs li:last-child:after,
.tabs li:last-child a:after {
  content: none;
}

.tabs_panel {
  position: relative;
  background: hsl(var(--background));
  color: hsl(var(--foreground));
  padding: 1rem;
}

.tabs a .tab__icon {
  display: inline-flex;
  vertical-align: middle;
  margin-right: 0.5rem;
  line-height: 0;
}
.tabs a .tab__icon svg { width: 18px; height: 18px; }

/* --- compact mode --- */
.tabs[data-compact="true"] a .tab__icon {
  margin-right: 0;
}
.tabs[data-compact="true"] a {
  padding: 7px clamp(5px, 6vw, 80px);
}
.tabs[data-compact="true"] a .tab__label {
  /* Visually hide but keep in accessibility tree */
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}
</file>

<file path="src/styles/themed-controls.css">
/* src/styles/themed-controls.css

Contents
1) Themed segmented controls
2) Light 1px dialog borders
3) Docs typography (.sv-docs)
4) Code & syntax highlighting (Shiki / pretty-code)
 */

/* ---------------------------------------------- */
/* 1) Themed segmented controls                   */
/* ---------------------------------------------- */

.themed-segment {
  display: inline-flex;
  gap: 6px;
  padding: 4px;
  border: 1px solid hsl(var(--border));
  border-radius: 9999px;
  background: hsl(var(--muted));
}

.themed-pill {
  appearance: none;
  cursor: pointer;
  border: 0;
  border-radius: 9999px;
  padding: 6px 12px;
  line-height: 1;
  font-weight: 600;
  background: transparent;
  color: hsl(var(--muted-foreground));
  outline: none;
}
.themed-pill:hover {
  background: hsl(var(--secondary));
  color: hsl(var(--secondary-foreground));
}
.themed-pill.is-active {
  background: hsl(var(--primary));
  color: hsl(var(--primary-foreground));
}
/* Keyboard focus (accessible) */
.themed-pill:focus-visible {
  outline: 2px solid hsl(var(--primary));
  outline-offset: 2px;
}

.themed-pill--icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 6px 10px;
}
.themed-pill--icon svg { display: block; }

/* ---------------------------------------------- */
/* 2) Light 1px dialog/panel border               */
/* ---------------------------------------------- */

.themed-dialog {
  border: 1px solid hsl(var(--border));
  border-radius: 0.5rem; /* preserves rounding if none set on element */
}

/* ---------------------------------------------- */
/* 3) Docs typography (.sv-docs)                  */
/* ---------------------------------------------- */

.sv-docs h1 {
  margin: 0 0 1rem;
  font-size: 1.75rem;
  line-height: 1.25;
  font-weight: 700;
  color: hsl(var(--foreground));
}
.sv-docs h2 {
  margin: 1.5rem 0 0.75rem;
  font-size: 1.25rem;
  line-height: 1.35;
  font-weight: 600;
  color: hsl(var(--foreground));
}
.sv-docs h3 {
  margin: 1.25rem 0 0.5rem;
  font-size: 1.05rem;
  line-height: 1.35;
  font-weight: 600;
  color: hsl(var(--foreground));
}

.sv-docs p {
  margin: 0.5rem 0 0.85rem;
  line-height: 1.65;
  color: hsl(var(--foreground));
}

.sv-docs ul,
.sv-docs ol {
  margin: 0.6rem 0 0.9rem 1.25rem;
  padding: 0;
}
.sv-docs li { margin: 0.25rem 0; }

.sv-docs a {
  color: hsl(var(--primary));
  text-decoration: underline;
  text-underline-offset: 2px;
}
.sv-docs a:hover { opacity: 0.9; }

.sv-docs blockquote {
  margin: 1rem 0;
  padding: 0.6rem 0.9rem;
  border-left: 3px solid hsl(var(--border));
  background: hsl(var(--accent));
  color: hsl(var(--foreground));
  border-radius: 0.25rem;
}

.sv-docs table {
  width: 100%;
  margin: 1rem 0;
  border-collapse: collapse;
  font-size: 0.95rem;
}
.sv-docs th,
.sv-docs td {
  padding: 0.5rem 0.6rem;
  border: 1px solid hsl(var(--border));
}
.sv-docs th {
  text-align: left;
  background: hsl(var(--muted));
}

/* ---------------------------------------------- */
/* 4) Code & syntax highlighting                  */
/*    (rehype-pretty-code + Shiki)                */
/* ---------------------------------------------- */

/* Tweak here to change density in one place */
.sv-docs { --docs-code-lh: 0.9; } 

.sv-docs pre {
  position: relative;
  margin: 1rem 0 1.25rem;
  padding: 1rem 1.125rem;
  overflow-x: auto;
  border: 1px solid hsl(var(--border));
  border-radius: 0.5rem;
  font-size: 0.9rem;
  line-height: var(--docs-code-lh); /* was 1.45 */
}

/* Avoid double backgrounds inside fenced blocks */
.sv-docs pre code {
  background: transparent;
  padding: 0;
}

/* pretty-code: each line is a span; keep them block-level and inherit the tighter line-height */
.sv-docs pre code > span {
  display: block;
  line-height: inherit; /* ensures tighter spacing applies to each line */
}

/* Inline code */
.sv-docs :not(pre) > code {
  display: inline;
  padding: 0.12rem 0.35rem;
  border: 1px solid hsl(var(--border));
  border-radius: 0.35rem;
  background: hsl(var(--accent));
  color: hsl(var(--foreground));
  font-size: 0.9em;
}

/* Dual-theme token colors produced by Shiki */
.sv-docs code[data-theme*=" "],
.sv-docs code[data-theme*=" "] span {
  color: var(--shiki-light);
  background-color: var(--shiki-light-bg);
}
html.dark .sv-docs code[data-theme*=" "],
html.dark .sv-docs code[data-theme*=" "] span {
  color: var(--shiki-dark);
  background-color: var(--shiki-dark-bg);
}

/* Optional: line/word highlights from pretty-code */
.sv-docs .line--highlighted { background: hsl(var(--accent)); }
.sv-docs .word--highlighted {
  padding: 0.05rem 0.2rem;
  border-radius: 0.2rem;
  background: hsl(var(--primary));
  color: hsl(var(--primary-foreground));
}

/* Heading anchors */
.sv-docs .anchor {
  position: relative;
  color: inherit;
  text-decoration: none;
}
.sv-docs .anchor:hover { text-decoration: underline; }

/* Copy button */
.sv-docs pre .sv-copy-btn {
  position: absolute;
  top: 0.4rem;
  right: 0.4rem;
  padding: 0.2rem 0.55rem;
  border: 1px solid hsl(var(--border));
  border-radius: 0.35rem;
  background: hsl(var(--accent));
  color: hsl(var(--foreground));
  font-size: 0.75rem;
  cursor: pointer;
  opacity: 0;
  transition: opacity 0.2s ease-in-out;
}
.sv-docs pre:hover .sv-copy-btn { opacity: 1; }
@media (prefers-reduced-motion: reduce) {
  .sv-docs pre .sv-copy-btn { transition: none; }
}

/* Let <pre> background follow computed theme vars from Shiki */
.sv-docs pre[data-theme] {
  background: var(--shiki-light-bg, hsl(var(--muted)));
  color: var(--shiki-light, hsl(var(--foreground)));
}
.dark .sv-docs pre[data-theme] {
  background: var(--shiki-dark-bg, hsl(var(--muted)));
  color: var(--shiki-dark, hsl(var(--foreground)));
}

/* Scroll-to-top floating button */
.sv-to-top {
  position: fixed;
  left: 50%;
  bottom: clamp(12px, 2.5vh, 24px);
  transform: translateX(-50%);
  display: inline-flex;
  align-items: center;
  justify-content: center;

  width: 38px;
  height: 38px;
  border-radius: 9999px;

  background: color-mix(in oklab, hsl(var(--card)) 88%, transparent);
  color: hsl(var(--foreground));
  border: 1px solid hsl(var(--border));
  box-shadow: 0 6px 18px rgba(0,0,0,.12);

  opacity: .85;
  backdrop-filter: blur(6px);
  transition: opacity .18s ease, transform .18s ease;
  z-index: 60;
}
.sv-to-top:hover { opacity: 1; transform: translateX(-50%) translateY(-2px); }
.sv-to-top:active { transform: translateX(-50%) translateY(0); }
</file>

<file path="src/components/tabs/NewTab.jsx">
// src/components/tabs/NewTab.jsx
import { createMemo, createResource, createSignal, Show, For, createEffect } from "solid-js";
import ContentFeed from "../feed/ContentFeed.jsx";
import { useApp } from "../../context/AppContext.jsx";
import { loadAssetResource } from "../../utils/assetLoader";
import ViewModeToggle, { viewMode } from "../ui/ViewModeToggle.jsx";

function useDomainCategories(app) {
  const cfg = () => app.domainAssetsConfig?.();
  const relPath = createMemo(() => cfg()?.modules?.categories || null);
  const lang = () => (app.lang?.() || "en").toLowerCase();
  const params = createMemo(() => ({ rel: relPath(), lang: lang() }));
  const [cats] = createResource(params, async ({ rel, lang }) => {
    if (!rel) return [];
    try {
      const data = await loadAssetResource(app, rel, { type: "yaml" });
      const listByLang = data?.locales?.[lang] || data?.locales?.en || [];
      return (Array.isArray(listByLang) ? listByLang : []).map(String);
    } catch (err) {
      console.error(`Failed to load categories from ${rel}:`, err);
      return [];
    }
  });
  return cats;
}

export default function NewTab(props) {
  const app = useApp();
  const lang = createMemo(() => (app.lang?.() || "en").toLowerCase());
  const [category, setCategory] = createSignal("ALL");
  const categoriesRes = useDomainCategories(app);
  const categoriesWithAll = createMemo(() => ["ALL", ...(categoriesRes() || [])]);

  createEffect(() => {
    const newList = categoriesRes();
    const currentSelection = category();
    if (newList && currentSelection !== "ALL" && !newList.includes(currentSelection)) {
      setCategory("ALL");
    }
  });

  const domainName = () => {
    const d = app.selectedDomain?.();
    return typeof d === "string" ? d : d?.name || "";
  };
  const contentList = app.wsMethod ? app.wsMethod("content-list") : null;

  // Create a key that changes when either the domain or category changes.
  const feedResetKey = createMemo(() => `${domainName()}|${category()}`);

  async function fetchPage(page, pageSize) {
    const limit = pageSize;
    const offset = (page - 1) * pageSize;
    try {
      if (!contentList) return [];
      const params = { domain: domainName(), content_type: "post", limit, offset, lang: lang() };
      const cat = category();
      if (cat && cat !== "ALL") {
        params.category = `${lang()}:${cat}`;
      }
      const res = await contentList(params);
      const arr = Array.isArray(res) ? res : Array.isArray(res?.list) ? res.list : [];
      return arr.map((it) => ({
        id: it?.savva_cid || it?.savvaCID || it?.id,
        _raw: it,
      }));
    } catch (err) {
      console.error("fetchPage error:", err);
      return [];
    }
  }

  return (
    <section class="w-full">
      <div class="mb-3 flex items-center gap-3">
        <ViewModeToggle size="md" />
        <div class="ml-auto flex items-center gap-2 min-w-[220px]">
          <span class="text-xs opacity-70">{app.t("newTab.category")}</span>
          <select
            class="flex-1 px-3 h-9 rounded border bg-[hsl(var(--background))] text-[hsl(var(--foreground))] border-[hsl(var(--input))]"
            value={category()}
            onInput={(e) => setCategory(e.currentTarget.value)}
            aria-label={app.t("newTab.category")}
          >
            <For each={categoriesWithAll()}>
              {(c) => <option value={c}>{c === "ALL" ? app.t("categories.all") : c}</option>}
            </For>
          </select>
          <Show when={categoriesRes.loading}>
            <div class="text-xs opacity-70">{app.t("common.loading")}</div>
          </Show>
        </div>
      </div>
      <ContentFeed
        mode={viewMode()}
        fetchPage={fetchPage}
        pageSize={12}
        resetOn={feedResetKey()}
        isRailVisible={props.isRailVisible}
      />
    </section>
  );
}
</file>

<file path="src/components/settings/LocalIpfsSection.jsx">
// LocalIpfsSection.jsx
import { createSignal, Show, For } from "solid-js";
import { useApp } from "../../context/AppContext.jsx";
import { fetchWithTimeout } from "../../utils/net.js";

export default function LocalIpfsSection() {
  const app = useApp();
  const { t } = app;

  const [testing, setTesting] = createSignal(false);
  const [apiUrl, setApiUrl] = createSignal(app.localIpfsApiUrl() || "http://127.0.0.1:5001");

  const [diagRunning, setDiagRunning] = createSignal(false);
  const [diagResults, setDiagResults] = createSignal(null);

  async function runDiagnostics() {
    setDiagRunning(true);
    setDiagResults([]);
    const results = [];
    
    const localApi = apiUrl().trim().replace(/\/+$/, "");
    const localGateway = localApi.replace(/:\d+$/, ":8080");
    const currentOrigin = window.location.origin;

    // Step 1: Check basic API liveness and fetch config
    let config = null;
    try {
      const res = await fetchWithTimeout(`${localApi}/api/v0/config/show`, { method: "POST" });
      if (!res.ok) throw new Error(`API responded with status ${res.status}`);
      config = await res.json();
      results.push({ name: t("ipfs.diag.liveness.name"), status: "ok", details: t("ipfs.diag.liveness.ok") });
    } catch (err) {
      const originsJson = JSON.stringify([currentOrigin]);
      const fixCommand = 
`# 1. ${t("ipfs.diag.fix.daemon")}
ipfs daemon

# 2. ${t("ipfs.diag.fix.browser")}

# 3. ${t("ipfs.diag.fix.cors")}
ipfs config --json API.HTTPHeaders.Access-Control-Allow-Origin '${originsJson}'`;

      results.push({ name: t("ipfs.diag.liveness.name"), status: "error", details: t("ipfs.diag.liveness.error"), fixCommand: fixCommand });
      setDiagResults(results);
      setDiagRunning(false);
      return;
    }
    setDiagResults([...results]);

    // Step 2: Analyze Gateway CORS Configuration
    const gatewayOrigins = config?.Gateway?.HTTPHeaders?.["Access-Control-Allow-Origin"] || [];
    if (gatewayOrigins.includes(currentOrigin) || gatewayOrigins.includes("*")) {
      results.push({ name: t("ipfs.diag.cors.name"), status: "ok", details: t("ipfs.diag.cors.ok") });
    } else {
      const newOriginsList = [...new Set([currentOrigin, ...gatewayOrigins])];
      const fixCommand = `ipfs config --json Gateway.HTTPHeaders.Access-Control-Allow-Origin '${JSON.stringify(newOriginsList)}'`;
      results.push({
        name: t("ipfs.diag.cors.name"),
        status: "error",
        details: t("ipfs.diag.cors.error"),
        fixCommand: fixCommand
      });
    }
    
    // Step 3: Final Live Gateway Fetch Test
    const testCID = app.info()?.savva_contracts?.Config?.abi_cid;
    if (testCID) {
      try {
        const testUrl = `${localGateway}/ipfs/${testCID}`;
        await fetchWithTimeout(testUrl);
        results.push({ name: t("ipfs.diag.fetch.name"), status: "ok", details: t("ipfs.diag.fetch.ok") });
      } catch (err) {
        results.push({ name: t("ipfs.diag.fetch.name"), status: "error", details: t("ipfs.diag.fetch.errorFirewall") });
      }
    } else {
      results.push({ name: t("ipfs.diag.fetch.name"), status: "warn", details: t("ipfs.diag.fetch.warnSkipped") });
    }

    setDiagResults(results);
    setDiagRunning(false);
  }

  async function onEnableLocal() {
    setTesting(true);
    try {
      await app.enableLocalIpfs(apiUrl().trim());
    } finally {
      setTesting(false);
    }
  }

  const statusColorClass = (status) => {
    if (status === 'ok') return 'text-emerald-600';
    if (status === 'error') return 'text-red-600';
    return 'text-amber-500'; // for 'warn'
  };

  return (
    <section class="bg-[hsl(var(--card))] text-[hsl(var(--card-foreground))] rounded-lg shadow p-4 space-y-3">
        <h3 class="text-lg font-medium">{t("settings.localIpfs.title")}</h3>
        <label class="flex items-center gap-2">
            <input type="checkbox" checked={app.localIpfsEnabled()} onInput={(e) => {
                const checked = e.currentTarget.checked;
                if (checked) { onEnableLocal(); } else { app.disableLocalIpfs(); }
            }}/>
            <span>{t("settings.localIpfs.enableCheckbox")}</span>
        </label>
        <div class="grid grid-cols-1 md:grid-cols-[minmax(0,1fr)_auto] gap-2 md:items-end">
            <label class="block">
                <span class="text-sm text-[hsl(var(--muted-foreground))]">{t("settings.localIpfs.apiUrl.label")}</span>
                <input class="mt-1 w-full px-3 py-2 rounded border bg-[hsl(var(--background))] text-[hsl(var(--foreground))] border-[hsl(var(--input))]"
                    value={apiUrl()}
                    onInput={(e) => {
                        const val = e.currentTarget.value;
                        setApiUrl(val);
                        app.setLocalIpfsApiUrl?.(val);
                    }}
                    placeholder="http://127.0.0.1:5001" spellcheck={false}/>
            </label>
            <div class="flex md:self-end">
                <Show when={!app.localIpfsEnabled()}
                    fallback={<button class="h-10 px-3 rounded bg-[hsl(var(--destructive))] text-[hsl(var(--destructive-foreground))] hover:opacity-90" onClick={()=> app.disableLocalIpfs()}>{t("settings.localIpfs.disable")}</button>}>
                    <button class="h-10 px-3 rounded bg-[hsl(var(--primary))] text-[hsl(var(--primary-foreground))] hover:opacity-90 disabled:opacity-60" onClick={onEnableLocal} disabled={testing()} title={t("settings.localIpfs.testEnable")}>
                        {testing() ? t("common.checking") : t("settings.localIpfs.testEnable")}
                    </button>
                </Show>
            </div>
        </div>
        <div class="text-sm text-[hsl(var(--muted-foreground))]">
            {t("settings.localIpfs.status.label")}:{" "}
            <span class={app.localIpfsStatus()==='ok' ? "text-[hsl(var(--primary))]" : app.localIpfsStatus()==='down' ? "text-[hsl(var(--destructive))]" : "opacity-70"}>
                {app.localIpfsStatus()}
            </span>
            <Show when={app.localIpfsEnabled() && app.localIpfsGateway()}>
                <span class="ml-2 opacity-70"> {t("settings.localIpfs.gateway.label")}: {app.localIpfsGateway()}</span>
            </Show>
        </div>

        <Show when={app.localIpfsEnabled()}>
            <div class="pt-2 border-t border-[hsl(var(--border))]">
                <div class="flex items-center justify-between">
                    <h4 class="font-medium">{t("ipfs.diag.title")}</h4>
                    <button class="h-9 px-3 rounded-md border border-[hsl(var(--border))] text-sm hover:bg-[hsl(var(--accent))]"
                        onClick={runDiagnostics}
                        disabled={diagRunning()}>
                        {diagRunning() ? t("common.loading") : t("ipfs.diag.run")}
                    </button>
                </div>
                <Show when={diagResults() && diagResults().length > 0}>
                    <div class="mt-2 space-y-2 text-xs">
                        <For each={diagResults()}>
                            {(result) => (
                                <div class="p-2 rounded bg-[hsl(var(--muted))]">
                                    <div class="flex items-center">
                                        <span class={`font-bold ${statusColorClass(result.status)}`}>
                                            {result.status.toUpperCase()}:
                                        </span>
                                        <span class="font-semibold ml-2">{result.name}</span>
                                    </div>
                                    <p class="mt-1 text-[hsl(var(--muted-foreground))]">{result.details}</p>
                                    <Show when={result.fixCommand}>
                                        <p class="mt-2 font-medium">{t("ipfs.diag.fix.title")}</p>
                                        <pre class="mt-1 p-2 rounded bg-[hsl(var(--background))] text-[hsl(var(--foreground))] font-mono text-[11px] whitespace-pre-wrap break-all">
                                            {result.fixCommand}
                                        </pre>
                                    </Show>
                                </div>
                            )}
                        </For>
                    </div>
                </Show>
            </div>
        </Show>
    </section>
  );
}
</file>

<file path="src/components/Header.jsx">
// src/components/Header.jsx
import { Show, createSignal, onMount } from "solid-js";
import { useApp } from "../context/AppContext.jsx";
import {
  connectWallet,
  walletAccount,
  walletChainId,
  isWalletAvailable,
  eagerConnect,
} from "../blockchain/wallet";
import { getChainLogo } from "../blockchain/chainLogos";
import BrandLogo from "./ui/BrandLogo.jsx";
import Container from "./layout/Container";
import AuthorizedUser from "./auth/AuthorizedUser.jsx";

function shortAddr(addr) {
  if (!addr) return "";
  return addr.slice(0, 6) + "" + addr.slice(-4);
}

export default function Header({ onTogglePane }) {
  const app = useApp();
  const [eagerDone, setEagerDone] = createSignal(false);

  const desiredId = () => app.desiredChainId();
  const mismatched = () =>
    walletChainId() != null &&
    desiredId() != null &&
    walletChainId() !== desiredId();

  onMount(async () => {
    if (isWalletAvailable()) {
      await eagerConnect();
    }
    setEagerDone(true);
  });

  async function onConnect() {
    try {
      await connectWallet();
      if (desiredId()) {
        try { await app.ensureWalletOnDesiredChain(); } catch {}
      }
    } catch (e) {
      console.error(e);
      alert(e?.message || String(e));
    }
  }

  async function copyAddress() {
    try {
      // The text is still copied, but no visual indicator will be shown.
      await navigator.clipboard.writeText(walletAccount());
    } catch (e) {
      console.error("Failed to copy address:", e);
    }
  }

  async function onSwitchChain() {
    try {
      await app.ensureWalletOnDesiredChain();
    } catch (e) {
      console.error(e);
      alert(e?.message || String(e));
    }
  }

  const chainLogoSrc = () => {
    const id = desiredId();
    return id ? getChainLogo(id) : null;
  };

  return (
    <header
      class="
        sticky top-0 z-10
        bg-[hsl(var(--background))] text-[hsl(var(--foreground))]
        shadow-sm
      "
    >
      <Container>
        <div class="h-12 px-2 flex items-center justify-between">
          {/* Left: brand */}
          <div class="flex items-center">
            <BrandLogo class="h-6 sm:h-7" classTitle="text-xl font-bold text-[hsl(var(--card-foreground))]" />
          </div>

          {/* Right: wallet + auth + menu */}
          <div class="flex items-center gap-3">

            <AuthorizedUser />
            
            <Show
              when={walletAccount()}
              fallback={
                <Show when={eagerDone() && isWalletAvailable()}>
                  <button
                    class="
                      px-3 py-1.5 text-sm rounded
                      bg-[hsl(var(--primary))] text-[hsl(var(--primary-foreground))]
                      hover:opacity-90
                    "
                    onClick={onConnect}
                    title={app.t("wallet.connect")}
                    aria-label={app.t("wallet.connect")}
                  >
                    {app.t("wallet.connect")}
                  </button>
                </Show>
              }
            >
              <div class="flex items-center gap-2">
                <button
                  class="
                    px-2 py-1 rounded
                    bg-[hsl(var(--muted))] text-[hsl(var(--muted-foreground))]
                    hover:bg-[hsl(var(--accent))] hover:text-[hsl(var(--accent-foreground))]
                  "
                  onClick={copyAddress}
                  title={app.t("wallet.copyAddress")}
                  aria-label={app.t("wallet.copyAddress")}
                >
                  {shortAddr(walletAccount())}
                </button>

                <Show
                  when={!mismatched()}
                  fallback={
                    <button
                      class="
                        px-2 py-1 rounded
                        bg-[hsl(var(--destructive))] text-[hsl(var(--destructive-foreground))]
                        hover:opacity-90
                      "
                      onClick={onSwitchChain}
                      title={app.t("wallet.changeChain")}
                      aria-label={app.t("wallet.changeChain")}
                    >
                      {app.t("wallet.changeChain")}
                    </button>
                  }
                >
                  <Show when={chainLogoSrc()}>
                    <img
                      src={chainLogoSrc()}
                      alt="chain"
                      class="w-5 h-5"
                      title={app.t("wallet.onRequiredNetwork")}
                    />
                  </Show>
                </Show>
              </div>
            </Show>

            <button
              class="
                p-1 rounded transition
                text-[hsl(var(--muted-foreground))]
                hover:bg-[hsl(var(--muted))]
              "
              onClick={onTogglePane}
              aria-label={app.t("menu.open")}
              title={app.t("menu.open")}
            >
              <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
              </svg>
            </button>
          </div>
        </div>
      </Container>
    </header>
  );
}
</file>

<file path="src/components/SwitchConnectDialog.jsx">
// File: src/components/SwitchConnectDialog.jsx
import { createSignal, createEffect, Show, createMemo, onCleanup } from "solid-js";
import { useApp } from "../context/AppContext";
import { httpBase, configureEndpoints, wsUrl } from "../net/endpoints";

const dn = (d) => (typeof d === "string" ? d : d?.name || "");
const eq = (a, b) => (String(a || "").trim().toLowerCase() === String(b || "").trim().toLowerCase());

function isAbortError(e) {
  const msg = String(e?.message || e || "").toLowerCase();
  if (e?.name === "AbortError") return true;
  if (e?.code === 20) return true;
  if (msg.includes("aborted") || msg.includes("abort") || msg.includes("the operation was aborted")) return true;
  return false;
}

async function fetchInfoJSON(backendLink, { signal } = {}) {
  const base = httpBase(backendLink);
  const res = await fetch(base + "info", { headers: { Accept: "application/json" }, signal });
  if (!res.ok) throw new Error(`/info failed: ${res.status}`);
  return await res.json();
}

export default function SwitchConnectDialog(props) {
  const app = useApp();
  const { t } = app;

  const [backendUrl, setBackendUrl] = createSignal(props.backendLink ?? app.config?.()?.backendLink ?? "");
  const [domain, setDomain] = createSignal(dn(props.domain) || (app.config?.()?.domain || ""));
  const [domains, setDomains] = createSignal([]); // [{ name }]
  const [fetching, setFetching] = createSignal(false);
  const [applying, setApplying] = createSignal(false);
  const [localError, setLocalError] = createSignal("");

  let aborter;

  const selectedDomainObj = createMemo(() => {
    const cur = (domain() || "").trim().toLowerCase();
    return (domains() || []).find((d) => eq(dn(d), cur)) || null;
  });

  createEffect(async () => {
    if (!props.open) return;

    setLocalError("");
    setBackendUrl(props.backendLink ?? app.config?.()?.backendLink ?? "");
    setDomain(dn(props.domain) || (app.config?.()?.domain || ""));
    setDomains([]);

    aborter?.abort();
    aborter = new AbortController();
    setFetching(true);

    try {
      const initialUrl = props.backendLink ?? app.config?.()?.backendLink ?? "";
      const u = new URL(initialUrl);
      if (!/^https?:$/.test(u.protocol)) throw new Error(t("rightPane.switch.validation.protocol"));

      const info = await fetchInfoJSON(initialUrl, { signal: aborter.signal });
      const normalized = (Array.isArray(info?.domains) ? info.domains : [])
        .filter(Boolean)
        .map((d) => (typeof d === "string" ? { name: d } : d))
        .filter((d) => typeof d?.name === "string" && d.name.trim().length > 0);

      normalized.sort((a, b) => (a.name > b.name ? 1 : -1));
      setDomains(normalized);

      if (normalized.length > 0) {
        const wanted = dn(props.domain) || (app.config?.()?.domain || "");
        const resolved =
          normalized.find((d) => eq(d.name, wanted)) ||
          normalized.find((d) => eq(d.name, domain())) ||
          normalized[0];

        const name = resolved.name;
        setDomain(name);
        queueMicrotask(() => setDomain(name));
      } else {
        setLocalError(t("rightPane.switch.noDomains"));
      }
    } catch (e) {
      if (!isAbortError(e)) setLocalError(e.message || String(e));
    } finally {
      setFetching(false);
    }
  });

  onCleanup(() => aborter?.abort());

  async function handleReload() {
    setLocalError("");

    // Normalize the user-entered backend URL (candidate) without touching global config.
    let candidate = (backendUrl() || "").trim();
    try {
      const u = new URL(candidate);
      if (!/^https?:$/.test(u.protocol)) {
        throw new Error(t("rightPane.switch.validation.protocol"));
      }
      // Ensure trailing slash for consistent "base + 'info'" concatenation.
      if (!u.pathname.endsWith("/")) u.pathname += "/";
      candidate = u.toString();
    } catch (e) {
      setLocalError(e.message || t("rightPane.switch.validation.protocol"));
      return;
    }

    setFetching(true);
    aborter?.abort();
    aborter = new AbortController();

    try {
      // Probe the candidate backends /info to list available domains.
      const res = await fetch(candidate + "info", {
        headers: { Accept: "application/json" },
        signal: aborter.signal,
        cache: "no-store",
      });
      if (!res.ok) throw new Error(`/info failed: ${res.status}`);
      const info = await res.json();

      const normalized = (Array.isArray(info?.domains) ? info.domains : [])
        .filter(Boolean)
        .map((d) => (typeof d === "string" ? { name: d } : d))
        .filter((d) => typeof d?.name === "string" && d.name.trim().length > 0);

      normalized.sort((a, b) => (a.name > b.name ? 1 : -1));
      setDomains(normalized);

      if (normalized.length > 0) {
        // Try to keep current/wanted domain if present; otherwise pick the first.
        const prefer = dn(props.domain) || (app.config?.()?.domain || "") || domain();
        const keep =
          normalized.find((d) => eq(d.name, prefer)) ||
          normalized.find((d) => eq(d.name, domain()));
        const name = keep?.name || normalized[0].name;
        setDomain(name);
        queueMicrotask(() => setDomain(name));
      } else {
        setLocalError(t("rightPane.switch.noDomains"));
      }
    } catch (e) {
      if (!isAbortError(e)) setLocalError(e.message || String(e));
    } finally {
      setFetching(false);
    }
  }

  async function onApply() {
    setLocalError("");
    setApplying(true);
    try {
      const url = (backendUrl() || "").trim();
      const chosen = (domain() || "").trim();
      const u = new URL(url);
      if (!/^https?:$/.test(u.protocol)) throw new Error(t("rightPane.switch.validation.protocol"));
      if (!chosen) throw new Error(t("rightPane.switch.validation.domain"));

      // Configure once for the new selection
      configureEndpoints({ backendLink: url, domain: chosen, lang: app.lang ? app.lang() : "en" });

      if (typeof props.onApply === "function") {
        await props.onApply({ backendLink: httpBase(), domain: chosen });
      }

      await app.updateConnect?.({ backendLink: httpBase() });
      await app.setDomain?.(chosen);
      await app.refreshDomainAssets?.();

      // Nudge WS to new URL immediately (no waiting for mounts)
      if (app.ws) {
        app.ws.setUrl(wsUrl());
        app.ws.reconnect("switch-backend");
      }
    } catch (e) {
      if (!isAbortError(e)) setLocalError(e.message || String(e));
      setApplying(false);
      return;
    }

    setApplying(false);
    try { aborter?.abort(); } catch { }
    props.onClose?.();
  }

  return (
    <Show when={props.open}>
      <div class="fixed inset-0 z-40 flex items-center justify-center">
        <div class="absolute inset-0 bg-black/40" onClick={props.onClose} />

        <div class="relative themed-dialog rounded-lg shadow-lg w-[34rem] max-w-[95vw] p-4 bg-[hsl(var(--card))] text-[hsl(var(--card-foreground))]">
          <h3 class="text-lg font-semibold mb-3">
            {t("rightPane.switch.title")}
          </h3>

          <label class="block mb-3">
            <span class="text-sm text-[hsl(var(--muted-foreground))]">{t("rightPane.switch.backend.label")}</span>
            <div class="mt-1 flex gap-2">
              <input
                class="flex-1 px-3 py-2 rounded border bg-[hsl(var(--background))] text-[hsl(var(--foreground))] border-[hsl(var(--input))]"
                value={backendUrl()}
                onInput={(e) => setBackendUrl(e.currentTarget.value)}
                placeholder={t("rightPane.switch.backend.placeholder")}
                spellcheck={false}
              />
              <button
                class="px-3 py-2 rounded bg-[hsl(var(--secondary))] text-[hsl(var(--secondary-foreground))] hover:opacity-90 disabled:opacity-60"
                onClick={handleReload}
                disabled={fetching()}
                title={t("rightPane.switch.reload.title")}
              >
                {fetching() ? t("common.loading") : t("rightPane.switch.reload")}
              </button>
            </div>
            <p class="text-xs text-[hsl(var(--muted-foreground))] mt-1">{t("rightPane.switch.backend.help")}</p>
          </label>

          <label class="block mb-1">
            <span class="text-sm text-[hsl(var(--muted-foreground))]">{t("rightPane.switch.domain.label")}</span>
          </label>
          <select
            class="w-full px-3 py-2 rounded border bg-[hsl(var(--background))] text-[hsl(var(--foreground))] border-[hsl(var(--input))] disabled:opacity-60"
            value={domain()}
            onChange={(e) => setDomain(e.currentTarget.value)}
            disabled={fetching() || domains().length === 0}
          >
            {domains().map((d) => (
              <option value={d.name} selected={eq(d.name, domain())}>
                {d.name}
              </option>
            ))}
          </select>

          <Show when={selectedDomainObj()}>
            <div class="mt-2 text-xs text-[hsl(var(--muted-foreground))] space-y-1">
              <Show when={selectedDomainObj().website}>
                <div>
                  {t("rightPane.switch.domain.website")}:{" "}
                  <a class="underline" href={selectedDomainObj().website} target="_blank" rel="noreferrer">
                    {selectedDomainObj().website}
                  </a>
                </div>
              </Show>
            </div>
          </Show>

          <Show when={localError() || props.error}>
            <p class="mt-2 text-sm text-[hsl(var(--destructive))]">
              {t("common.error")}: {localError() || props.error?.message}
            </p>
          </Show>

          <div class="mt-4 flex gap-2 justify-end">
            <button
              class="px-3 py-2 rounded bg-[hsl(var(--secondary))] text-[hsl(var(--secondary-foreground))] hover:opacity-90"
              onClick={props.onClose}
            >
              {t("common.cancel")}
            </button>
            <button
              class="px-3 py-2 rounded bg-[hsl(var(--destructive))] text-[hsl(var(--destructive-foreground))] hover:opacity-90"
              onClick={props.onReset}
              title={t("rightPane.switch.reset.title")}
            >
              {t("rightPane.switch.reset")}
            </button>
            <button
              class="px-3 py-2 rounded bg-[hsl(var(--primary))] text-[hsl(var(--primary-foreground))] hover:opacity-90 disabled:opacity-60"
              onClick={onApply}
              disabled={props.loading || fetching() || applying()}
            >
              {props.loading || fetching() || applying() ? t("common.applying") : t("common.apply")}
            </button>
          </div>
        </div>
      </div>
    </Show>
  );
}
</file>

<file path="package.json">
{
  "name": "savva-ui-solidjs",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview",
    "release": "node scripts/release.mjs",
    "i18n": "node scripts/i18n.mjs && node scripts/i18n-docs.mjs"
  },
  "dependencies": {
    "@shikijs/themes": "^3.11.0",
    "@solidjs/router": "^0.15.3",
    "dompurify": "^3.2.6",
    "dotenv": "^17.2.1",
    "js-yaml": "^4.1.0",
    "marked": "^16.2.0",
    "openai": "^5.12.2",
    "rehype-autolink-headings": "^7.1.0",
    "rehype-pretty-code": "^0.14.1",
    "rehype-slug": "^6.0.0",
    "rehype-stringify": "^10.0.1",
    "remark-frontmatter": "^5.0.0",
    "remark-gfm": "^4.0.1",
    "remark-parse": "^11.0.0",
    "remark-rehype": "^11.1.2",
    "shiki": "^3.11.0",
    "solid-js": "^1.9.8",
    "unified": "^11.0.5",
    "viem": "^2.33.3",
    "yaml": "^2.8.1"
  },
  "devDependencies": {
    "@tailwindcss/postcss": "^4.1.12",
    "autoprefixer": "^10.4.21",
    "postcss": "^8.5.6",
    "tailwindcss": "^4.1.12",
    "vite": "^7.1.2",
    "vite-plugin-solid": "^2.11.8"
  }
}
</file>

<file path="src/pages/Settings.jsx">
// src/pages/Settings.jsx
import { useApp } from "../context/AppContext.jsx";
import LocalIpfsSection from "../components/settings/LocalIpfsSection.jsx";
import Assets from "../components/settings/Assets.jsx";
import DeveloperSection from "../components/settings/DeveloperSection.jsx";
import ClosePageButton from "../components/ui/ClosePageButton.jsx";

export default function Settings() {
  const app = useApp();
  const { t } = app;

  return (
    <main class="p-4 max-w-3xl mx-auto space-y-6">

      <ClosePageButton />

      <div class="flex items-center justify-between">
        <h2 class="text-2xl font-semibold">{t("settings.title")}</h2>
      </div>

      <LocalIpfsSection />
      <Assets />
      <DeveloperSection />
    </main>
  );
}
</file>

<file path="src/index.css">
/* src/index.css */
@import "tailwindcss";
@import "./styles/tabs.css";
@import "./styles/themed-controls.css";
@import "./styles/layout.css";
@import "../public/domain_default/domain.css";

/* Custom utility for multi-line truncation */
.line-clamp-2 {
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 2;
  overflow: hidden;
}

.line-clamp-3 {
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 3;
  overflow: hidden;
}
</file>

<file path="src/version.js">
// src/version.js
export const APP_VERSION = "0.101";
</file>

<file path="src/i18n/ru.js">
// Auto-generated by scripts/i18n.mjs. Do not edit by hand.
export default {
  "app.versionLabel": "",
  "brand.name": "SAVVA",
  "categories.all": " ",
  "common.apply": "",
  "common.applying": "",
  "common.cancel": "",
  "common.checking": "",
  "common.error": "",
  "common.exists": "",
  "common.fail": "",
  "common.loading": "",
  "common.notFound": " ",
  "common.ok": "",
  "default.avatar": "",
  "default.user": "",
  "docs.article": " ",
  "docs.copied": "   !",
  "docs.copy": "",
  "docs.nav": "",
  "docs.next": "",
  "docs.prev": "",
  "docs.section": "",
  "docs.sidebar.empty": "  .  sidebar.yaml  dev_docs/<lang>/",
  "docs.title": " ",
  "error.connection.message": "     . ,   . ,  .",
  "error.connection.retry": " ",
  "error.connection.title": " ",
  "error.ws.message": "  . ,   .",
  "error.ws.title": " ",
  "ipfs.diag.cors.error": "   CORS.",
  "ipfs.diag.cors.name": " CORS ",
  "ipfs.diag.cors.ok": "CORS  .",
  "ipfs.diag.fetch.errorFirewall": "   - .",
  "ipfs.diag.fetch.name": "   ",
  "ipfs.diag.fetch.ok": " .",
  "ipfs.diag.fetch.warnSkipped": ": ABI CID     /info.",
  "ipfs.diag.fix.browser": "  ,   .  Brave     .   ,   Chrome, ,    '  '   .",
  "ipfs.diag.fix.cors": "   ,   ,    CORS API:",
  "ipfs.diag.fix.daemon": " ,   IPFS-   :",
  "ipfs.diag.fix.title": " ,      (  ):",
  "ipfs.diag.liveness.error": "  .",
  "ipfs.diag.liveness.name": "  API",
  "ipfs.diag.liveness.ok": " .",
  "ipfs.diag.run": " ",
  "ipfs.diag.title": "  IPFS",
  "ipfs.imageNotAvailable": " ",
  "main.tabs.empty": "   .",
  "main.tabs.loading": " ",
  "main.tabs.untitled": " ",
  "menu.open": " ",
  "newTab.category": "",
  "newTab.view.grid": "",
  "newTab.view.group": " ",
  "newTab.view.list": "",
  "rightPane.language": "",
  "rightPane.settings": "",
  "rightPane.switch.backend.help": "  /info   URL    .",
  "rightPane.switch.backend.label": "URL ",
  "rightPane.switch.backend.placeholder": "https://example.com/api/",
  "rightPane.switch.domain.label": "",
  "rightPane.switch.domain.website": "",
  "rightPane.switch.noDomains": "   .      ,    .",
  "rightPane.switch.open": "  / ",
  "rightPane.switch.reload": " ",
  "rightPane.switch.reload.title": " /info    ",
  "rightPane.switch.reset": "    ",
  "rightPane.switch.reset.title": "       default_connect.yaml",
  "rightPane.switch.title": "  / ",
  "rightPane.switch.validation.domain": "    .",
  "rightPane.switch.validation.protocol": "URL     http://  https://",
  "rightPane.theme": "",
  "settings.back": "",
  "settings.dev.assets.baseUrl": " URL ",
  "settings.dev.assets.configUrl": "URL ",
  "settings.dev.assets.configUrl.computed": " URL",
  "settings.dev.assets.configUrl.open": " URL ",
  "settings.dev.assets.diagnostics.default": "  ",
  "settings.dev.assets.diagnostics.error": " ",
  "settings.dev.assets.diagnostics.hasCategories": " ",
  "settings.dev.assets.diagnostics.hasConfig": " ",
  "settings.dev.assets.diagnostics.hasFavicon": " ",
  "settings.dev.assets.diagnostics.hasLocales": " ",
  "settings.dev.assets.diagnostics.hasLogos": " ",
  "settings.dev.assets.diagnostics.hasTabs": " ",
  "settings.dev.assets.diagnostics.noteNetwork": "   .",
  "settings.dev.assets.diagnostics.primary": " ",
  "settings.dev.assets.diagnostics.run": " ",
  "settings.dev.assets.diagnostics.sampleFetches": " ",
  "settings.dev.assets.diagnostics.title": " ",
  "settings.dev.assets.domain": "",
  "settings.dev.assets.env": "",
  "settings.dev.assets.env.prod": "",
  "settings.dev.assets.env.test": "",
  "settings.dev.assets.prefix.active": " ",
  "settings.dev.assets.prefix.computed": " ",
  "settings.dev.assets.source": "",
  "settings.dev.assets.title": "",
  "settings.developer.debug.clear": " ",
  "settings.developer.debug.copied": "    ",
  "settings.developer.debug.copy": " ",
  "settings.developer.debug.enable": "  ",
  "settings.developer.showKeys": "  ",
  "settings.developer.title": "",
  "settings.ipfs.localDisabled": " IPFS ",
  "settings.localIpfs.apiUrl.label": "URL API  IPFS",
  "settings.localIpfs.disable": "",
  "settings.localIpfs.enableCheckbox": "   IPFS",
  "settings.localIpfs.gateway.label": "",
  "settings.localIpfs.status.label": "",
  "settings.localIpfs.testEnable": "  ",
  "settings.localIpfs.title": " IPFS",
  "settings.title": "",
  "stakerLevels.${l.key}": "  {l.key}",
  "stakerLevels.clam": "",
  "stakerLevels.dolphin": "",
  "stakerLevels.fish": "",
  "stakerLevels.guest": "",
  "stakerLevels.orca": "",
  "stakerLevels.seahorse": " ",
  "stakerLevels.shark": "",
  "stakerLevels.shrimp": "",
  "stakerLevels.stingray": "",
  "stakerLevels.whale": "",
  "tabs.aria": " ",
  "tabs.title.${slug(tab.type)}": ": {tab.type}",
  "tabs.title.actual": "",
  "tabs.title.comments": "",
  "tabs.title.for-you": " ",
  "tabs.title.leaders": "",
  "tabs.title.new": "",
  "time.day.plural": "{n}  ",
  "time.day.singular": "{n}  ",
  "time.hour.plural": "{n}  ",
  "time.hour.singular": "{n}  ",
  "time.minute.plural": "{n}  ",
  "time.minute.singular": "{n}  ",
  "time.now": "",
  "ui.mode.dark": " ",
  "ui.mode.light": " ",
  "ui.toTop": "",
  "wallet.changeChain": " ",
  "wallet.connect": " ",
  "wallet.copied": "",
  "wallet.copyAddress": " ",
  "wallet.onRequiredNetwork": "  "
};
</file>

<file path="src/components/main/TabsBar.jsx">
// src/components/main/TabsBar.jsx
import { createResource, Show, createMemo, createSignal, createEffect, batch } from "solid-js";
import { useApp } from "../../context/AppContext";
import { useI18n } from "../../i18n/useI18n";
import { loadAssetResource } from "../../utils/assetLoader";
import { useHashRouter, navigate } from "../../routing/hashRouter";
import Tabs from "../ui/Tabs.jsx";
import { getTabComponent } from "../tabs";
import RightRailLayout from "../tabs/RightRailLayout.jsx";
import TabPanelScaffold from "../tabs/TabPanelScaffold.jsx";

const slug = (s) => String(s || "").trim().toLowerCase();
const firstSeg = (path) => {
  const p = String(path || "/");
  const s = p.startsWith("/") ? p.slice(1) : p;
  return s.split(/[?#/]/, 1)[0] || "";
};
const pathFor = (idOrType) => `/${encodeURIComponent(slug(idOrType)) || ""}`;

function SvgIcon(props) {
  return (
    <svg viewBox="0 0 24 24" class={props.class || "w-4 h-4"} fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
      {props.children}
    </svg>
  );
}
const TrophyIcon = () => <SvgIcon><path d="M8 21h8M12 17v4M7 4h10M7 8a5 5 0 0010 0M7 4a4 4 0 01-4 4M17 4a4 4 0 004 4"/></SvgIcon>;
const BoltIcon = () => <SvgIcon><path d="M13 2L3 14h6l-2 8 10-12h-6l2-8z"/></SvgIcon>;
const CommentIcon = () => <SvgIcon><path d="M4 6h16v8a4 4 0 01-4 4h-3l-4 3v-3H8a4 4 0 01-4-4z"/></SvgIcon>;
const SparklesIcon = () => <SvgIcon><path d="M12 3l1.5 4.5L18 9l-4.5 1.5L12 15l-1.5-4.5L6 9l4.5-1.5zM6 16l.8 2.2L9 19l-2.2.8L6 22l-.8-2.2L3 19l2.2-.8z"/></SvgIcon>;
const HeartIcon = () => <SvgIcon><path d="M12 21s-8-7-8-13a5 5 0 019-3 5 5 0 019 3c0 6-8 13-8 13z"/></SvgIcon>;
const FallbackIcon = () => <SvgIcon><path d="M4 6h16v12H4zM8 10h8M8 14h5"/></SvgIcon>;

function iconForType(type) {
  const k = slug(type);
  if (k === "leaders") return <TrophyIcon />;
  if (k === "actual") return <BoltIcon />;
  if (k === "comments") return <CommentIcon />;
  if (k === "new") return <SparklesIcon />;
  if (k === "for-you" || k === "foryou") return <HeartIcon />;
  return <FallbackIcon />;
}

function iconFromSpec(spec) {
  if (!spec) return null;
  if (typeof spec === "string" && spec.startsWith("emoji:")) {
    const ch = spec.slice("emoji:".length);
    return <span aria-hidden="true" class="inline-block leading-none">{ch}</span>;
  }
  return null;
}

export default function TabsBar() {
  const app = useApp();
  const { t, domainAssetsConfig, selectedDomain, setLastTabRoute } = app;
  const { lang } = useI18n();
  const { route } = useHashRouter();

  const tabsPath = createMemo(() => domainAssetsConfig?.()?.modules?.tabs || "modules/tabs.yaml");

  const [tabsRaw] = createResource(
    () => tabsPath(),
    async (relPath) => {
      if (!relPath) return [];
      const data = (await loadAssetResource(app, relPath, { type: "yaml" })) || {};
      const list = Array.isArray(data) ? data : Array.isArray(data.tabs) ? data.tabs : [];
      return list.map((x, i) => ({
        id: x?.id ?? x?.type ?? `tab_${i}`,
        type: x?.type ?? x?.id ?? `tab_${i}`,
        _raw: x,
      }));
    }
  );

  const [selectedId, setSelectedId] = createSignal("");

  const items = createMemo(() =>
    (tabsRaw() || []).map((tab) => {
      const label = t(`tabs.title.${slug(tab.type)}`) || t("main.tabs.untitled");
      const explicit = iconFromSpec(tab._raw.icon);
      const auto = iconForType(tab.type);
      return { id: tab.id, label, icon: explicit || auto, type: tab.type };
    })
  );

  createEffect(() => {
    const list = tabsRaw();
    if (!list || list.length === 0) return setSelectedId("");

    const key = firstSeg(route());
    const match = list.find(t => slug(t.id) === key || slug(t.type) === key);

    if (match) {
      if (selectedId() !== match.id) {
        setSelectedId(match.id);
        setLastTabRoute(route());
      }
    } else {
      const first = list[0];
      const defaultPath = pathFor(first.type || first.id);
      batch(() => {
        setSelectedId(first.id);
        navigate(defaultPath, { replace: true });
        setLastTabRoute(defaultPath);
      });
    }
  });

  function handleTabChange(nextId) {
    const entry = (tabsRaw() || []).find((t) => t.id === nextId);
    if (!entry) return;
    const newPath = pathFor(entry.type || entry.id);
    if (route() !== newPath) {
      navigate(newPath);
    }
  }

  const activeTab = createMemo(() => (tabsRaw() || []).find(t => t.id === selectedId()));
  const rightPanelConfig = createMemo(() => activeTab()?._raw?.right_panel);
  const isRailVisible = createMemo(() => rightPanelConfig()?.available);

  return (
    <section class="w-full">
      <div class="sv-container sv-container--no-gutter">
        <Show when={!tabsRaw.loading} fallback={<div class="p-4 text-sm text-center">{t("main.tabs.loading")}</div>}>
          <Tabs items={items()} value={selectedId()} onChange={handleTabChange} compactWidth={768} />
        </Show>

        <div class="tabs_panel">
          <Show when={activeTab()} keyed>
            {(tab) => {
              const Comp = getTabComponent(tab.type);
              const title = t(`tabs.title.${slug(tab.type)}`) || t("main.tabs.untitled");

              return (
                <RightRailLayout rightPanelConfig={rightPanelConfig()}>
                  <Show when={Comp} fallback={<TabPanelScaffold title={title} />}>
                    <Comp title={title} tab={tab} isRailVisible={isRailVisible()} />
                  </Show>
                </RightRailLayout>
              );
            }}
          </Show>
        </div>
      </div>
    </section>
  );
}
</file>

<file path="src/context/AppContext.jsx">
// src/context/AppContext.jsx
import * as Solid from "solid-js";
import { parse } from "yaml";
import { getChainMeta } from "../blockchain/chains";
import { switchOrAddChain } from "../blockchain/wallet";
import { pushToast, pushErrorToast } from "../components/ui/toast.js";
import { useI18n } from "../i18n/useI18n";
import { fetchWithTimeout } from "../utils/net.js";
import { configureEndpoints } from "../net/endpoints";
import { loadAssetResource } from "../utils/assetLoader.js";
import { useLocalIpfs } from "../hooks/useLocalIpfs.js";

function ensureSlash(s) { if (!s) return ""; return s.endsWith("/") ? s : s + "/"; }
const dn = (d) => (typeof d === "string" ? d : d?.name || "");
const eq = (a, b) => String(a || "").trim().toLowerCase() === String(b || "").trim().toLowerCase();

const AppContext = Solid.createContext();
const OVERRIDE_KEY = "connect_override";
const DEFAULT_DOMAIN_ASSETS_PREFIX = "/domain_default/";
const ASSETS_ENV_KEY = "domain_assets_env";
const AUTH_USER_KEY = "savva_auth_user"; // Key for localStorage

function pickPersistable(cfg) { if (!cfg) return null; return { domain: cfg.domain || "", backendLink: ensureSlash(cfg.backendLink || "") }; }
function loadOverride() { try { const raw = localStorage.getItem(OVERRIDE_KEY); if (!raw) return null; return pickPersistable(JSON.parse(raw)); } catch { return null; } }
function saveOverride(obj) { try { if (!obj) localStorage.removeItem(OVERRIDE_KEY); else localStorage.setItem(OVERRIDE_KEY, JSON.stringify(pickPersistable(obj))); } catch { } }

export function AppProvider(props) {
  const i18n = useI18n();
  const ipfs = useLocalIpfs({ pushToast, pushErrorToast, t: i18n.t });

  const [config, setConfig] = Solid.createSignal(null);
  const [info, setInfo] = Solid.createSignal(null);
  const [error, setError] = Solid.createSignal(null);
  const [loading, setLoading] = Solid.createSignal(true);
  const [lastUpdatedAt, setLastUpdatedAt] = Solid.createSignal(null);
  const [lastTabRoute, setLastTabRoute] = Solid.createSignal("/");

  const [assetsEnv, setAssetsEnvState] = Solid.createSignal(localStorage.getItem(ASSETS_ENV_KEY) || "prod");
  function setAssetsEnv(next) {
    const v = next === "test" ? "test" : "prod";
    localStorage.setItem(ASSETS_ENV_KEY, v);
    setAssetsEnvState(v);
  }

  async function fetchInfo(cfg) {
    const res = await fetch(cfg.backendLink + "info", { headers: { Accept: "application/json" } });
    if (!res.ok) throw new Error(`/info failed: ${res.status}`);
    return await res.json();
  }

  async function applyConfig(nextCfg) {
    setConfig(nextCfg);
    const data = await fetchInfo(nextCfg);
    setInfo(data);
    setLastUpdatedAt(Date.now());
    try { configureEndpoints({ backendLink: nextCfg.backendLink, domain: nextCfg.domain || "" }); } catch { }
  }

  async function init() {
    setLoading(true);
    setError(null);
    try {
      // 1. Load persisted authorized user from localStorage
      try {
        const savedUser = localStorage.getItem(AUTH_USER_KEY);
        if (savedUser) {
          setAuthorizedUser(JSON.parse(savedUser));
        }
      } catch (e) {
        console.error("Failed to load authorized user:", e);
        localStorage.removeItem(AUTH_USER_KEY);
      }

      // 2. Load backend/domain configuration
      const res = await fetch("/default_connect.yaml", { cache: "no-store" });
      if (!res.ok) throw new Error(`YAML load failed: ${res.status}`);
      const text = await res.text();
      const data = parse(text) || {};
      if (!data.backendLink) throw new Error("Missing backendLink in config");

      const baseCfg = { domain: data.domain || "", backendLink: ensureSlash(data.backendLink), gear: !!data.gear };
      const ovr = loadOverride();
      const merged = { ...baseCfg, ...(ovr ? { ...ovr } : {}) };
      
      // 3. Apply config and fetch /info from the backend
      await applyConfig(merged);

    } catch (e) {
      setError(e);
    } finally {
      setLoading(false);
    }
  }

  // This onMount now correctly calls the unified init function.
  Solid.onMount(init);
  function login(userData) {
    // Expects userData to be an object, e.g., { address: '0x...' }
    // We will expand this later with the signature/token.
    if (!userData || !userData.address) return;
    setAuthorizedUser(userData);
    try {
      localStorage.setItem(AUTH_USER_KEY, JSON.stringify(userData));
    } catch (e) {
      console.error("Failed to save authorized user:", e);
    }
  }

  // MODIFICATION: The logout function is now async and handles the API call and WS reconnect.
  async function logout() {
    // 1. Call the /logout API endpoint to clear the server's auth cookie.
    // `credentials: 'include'` is necessary to send the cookie that needs to be cleared.
    try {
      await fetch(`${httpBase()}logout`, {
        method: 'POST', // POST is safer for actions that change state.
        credentials: 'include'
      });
    } catch (e) {
      console.error("Logout API call failed, proceeding with client-side logout.", e);
    }

    // 2. Clear the authorized user from the signal and local storage.
    setAuthorizedUser(null);
    try {
      localStorage.removeItem(AUTH_USER_KEY);
    } catch (e) {
      console.error("Failed to clear authorized user:", e);
    }

    // 3. Reconnect the WebSocket to establish a new, non-authorized session.
    getWsClient()?.reconnect('user-logged-out');
  }

  // This is where you would handle a 401 error from a global fetch interceptor later
  function handleAuthError() {
    console.warn("Authorization error detected, logging out.");
    logout();
  }

  async function updateConnect(partial) {
    try {
      setLoading(true); setError(null);
      const cur = config() || {};
      const next = { ...cur, ...partial, backendLink: ensureSlash(partial?.backendLink ?? cur.backendLink) };
      const backendChanged = next.backendLink !== cur.backendLink;
      if (backendChanged) {
        await applyConfig(next);
      } else {
        setConfig(next);
        setLastUpdatedAt(Date.now());
        try { configureEndpoints({ backendLink: next.backendLink, domain: next.domain || "" }); } catch { }
      }
      saveOverride(next);
    } catch (e) {
      setError(e);
      pushErrorToast(e, { op: "updateConnect", backendLink: partial?.backendLink ?? config()?.backendLink, domain: partial?.domain ?? config()?.domain });
    } finally { setLoading(false); }
  }

  function setDomain(nextDomain) {
    const cur = config() || {};
    const next = { ...cur, domain: nextDomain || "" };
    setConfig(next);
    saveOverride(next);
    setLastUpdatedAt(Date.now());
    try { configureEndpoints({ backendLink: next.backendLink, domain: next.domain || "" }); } catch { }
  }

  async function clearConnectOverride() {
    logout(); // Ensure user is logged out
    saveOverride(null);
    await init();
  }

  Solid.onMount(init);

  // --- Domain resolution ---
  const supportedDomains = Solid.createMemo(() => {
    const list = info()?.domains;
    if (!Array.isArray(list)) return [];
    const res = [];
    const seen = new Set();
    for (const d of list) {
      const name = typeof d === "string" ? d : (d && d.name) || "";
      const website = typeof d === "object" ? (d.website || d.url || d.link || "") : "";
      const key = name.trim().toLowerCase();
      if (!key || seen.has(key)) continue;
      seen.add(key);
      res.push({ name, website });
    }
    return res;
  });

  // IMPORTANT: prefer explicit config domain (YAML/override). If it isn't in /info, still use it.
  const selectedDomain = Solid.createMemo(() => {
    const explicit = String(config()?.domain || "").trim();
    if (explicit) {
      const hit = supportedDomains().find((d) => eq(d.name, explicit));
      return hit || explicit; // string if not present in /info
    }
    // no explicit domain: take the first from /info if available
    return supportedDomains()[0] || "";
  });
  const selectedDomainName = Solid.createMemo(() => dn(selectedDomain()) || "");

  // --- Blockchain target ---
  const desiredChainId = Solid.createMemo(() => typeof info()?.blockchain_id === "number" ? info().blockchain_id : null);
  const desiredChain = Solid.createMemo(() => { const id = desiredChainId(); return id ? getChainMeta(id) : null; });
  async function ensureWalletOnDesiredChain() { const meta = desiredChain(); if (!meta) throw new Error("Unknown target chain"); await switchOrAddChain(meta); }

  // --- IPFS gateways ---
  const remoteIpfsGateways = Solid.createMemo(() => {
    const arr = info()?.ipfs_gateways;
    return Array.isArray(arr) ? arr.filter(Boolean).map((s) => ensureSlash(s.trim())).filter(Boolean) : [];
  });
  const activeIpfsGateways = Solid.createMemo(() => {
    if (ipfs.localIpfsEnabled() && ipfs.localIpfsGateway()) return [ensureSlash(ipfs.localIpfsGateway())];
    return remoteIpfsGateways();
  });

  // --- Assets base URL from /info ---
  const assetsBaseUrl = Solid.createMemo(() => {
    const baseProd = info()?.assets_url || "";
    const baseTest = info()?.temp_assets_url || "";
    const base = assetsEnv() === "test" ? baseTest : baseProd;
    return ensureSlash(base || "");
  });

  // --- Domain assets state ---
  const [domainAssetsConfig, setDomainAssetsConfig] = Solid.createSignal(null);
  const [domainAssetsSource, setDomainAssetsSource] = Solid.createSignal(null); // "domain" | "default" | null
  const [domainAssetsPrefix, setDomainAssetsPrefix] = Solid.createSignal(DEFAULT_DOMAIN_ASSETS_PREFIX);
  const domainAssetsPrefixActive = Solid.createMemo(() => domainAssetsPrefix() || DEFAULT_DOMAIN_ASSETS_PREFIX);
  const [authorizedUser, setAuthorizedUser] = Solid.createSignal(null);

  function assetUrl(relPath) {
    const rel = String(relPath || "").replace(/^\/+/, "");
    const prefix = domainAssetsPrefixActive();
    if (!prefix) return "";
    return ensureSlash(prefix) + rel;
  }

  // --- Load domain dictionaries (i18n) from the active assets pack ---
  const [domainDictionaries] = Solid.createResource(
    () => {
      const cfg = domainAssetsConfig();
      if (!cfg) return null;
      const locales = Array.isArray(cfg.locales) ? cfg.locales : [];
      const items = locales
        .map((l) => {
          const code = (l?.code || "").toLowerCase();
          const path = l?.dictionary || l?.file || (code ? `i18n/${code}.yaml` : "");
          if (!code || !path) return null;
          return { code, path };
        })
        .filter(Boolean);
      if (items.length === 0) return null;
      const rev = `${domainAssetsPrefixActive()}|${cfg.assets_cid || cfg.cid || ""}`;
      return { items, rev };
    },
    async (key) => {
      if (!key) return {};
      const out = {};
      for (const { code, path } of key.items) {
        try {
          const url = assetUrl(path);
          const res = await fetchWithTimeout(url, { timeoutMs: 8000, cache: "no-store" });
          if (!res.ok) continue;
          const text = await res.text();
          const parsed = parse(text) || {};
          const normalized = {};
          for (const [k, v] of Object.entries(parsed)) normalized[k] = typeof v === "string" ? v : String(v);
          out[code] = normalized;
        } catch { /* ignore */ }
      }
      return out;
    }
  );

  Solid.createEffect(() => {
    const dicts = domainDictionaries() || {};
    if (i18n && typeof i18n.setDomainDictionaries === "function") {
      i18n.setDomainDictionaries(dicts);
    }
  });

    // --- Auto-logout on domain/backend change ---
  Solid.createEffect(() => {
    const currentConfig = config(); // Track dependency on the config object
    const user = authorizedUser();

    // If there is a logged-in user and their authorized domain
    // does not match the app's currently configured domain, log them out.
    if (user && currentConfig && user.domain !== currentConfig.domain) {
      logout();
      // Optionally, notify the user.
      pushToast({
        type: 'info',
        message: 'You have been logged out due to a domain change.'
      });
    }
  });

  // --- Refresh domain assets (config.yaml + prefix)
  async function refreshDomainAssets() {
    const base = assetsBaseUrl();
    const domain = selectedDomainName();
    const computed = base && domain ? ensureSlash(base) + domain + "/" : "";
    const defaultPrefix = DEFAULT_DOMAIN_ASSETS_PREFIX;

    // Helper to load and parse config.yaml from a prefix
    async function tryLoad(prefix) {
      if (!prefix) return null;
      const url = ensureSlash(prefix) + "config.yaml";
      let res;
      try {
        res = await fetchWithTimeout(url, { timeoutMs: 8000, cache: "no-store" });
      } catch { return null; }
      if (!res.ok) return null;
      try {
        const text = await res.text();
        return parse(text) || {};
      } catch { return null; }
    }

    // 1) Try domain-specific pack
    let source = null;
    let usedPrefix = computed || "";
    let cfg = await tryLoad(usedPrefix);
    if (cfg) {
      source = "domain";
    } else {
      // 2) Fallback to default pack
      usedPrefix = defaultPrefix;
      cfg = await tryLoad(usedPrefix);
      source = cfg ? "default" : null;
    }

    setDomainAssetsPrefix(usedPrefix || defaultPrefix);
    setDomainAssetsSource(source);
    setDomainAssetsConfig(cfg || null);
  }

  // React to changes in assets base, env, or domain
  Solid.createEffect(() => {
    // Build a reactive key to avoid redundant fetches
    const key = `${assetsBaseUrl()}|${assetsEnv()}|${selectedDomainName()}`;
    if (!assetsBaseUrl()) {
      setDomainAssetsPrefix(DEFAULT_DOMAIN_ASSETS_PREFIX);
      setDomainAssetsSource(null);
      setDomainAssetsConfig(null);
      return;
    }
    // Run async without blocking the effect
    Promise.resolve().then(refreshDomainAssets);
  });

  // Also re-apply when /info finishes loading for the first time
  Solid.createEffect(() => { if (info()) Promise.resolve().then(refreshDomainAssets); });

  const value = {
    config, info, error, loading, lastUpdatedAt,
    ...ipfs,
    supportedDomains, selectedDomain,
    desiredChainId, desiredChain, remoteIpfsGateways, activeIpfsGateways,
    assetsEnv, setAssetsEnv, assetsBaseUrl,
    domainAssetsConfig, domainAssetsSource, domainAssetsPrefix: domainAssetsPrefixActive,
    refreshDomainAssets, assetUrl,
    reload: init, updateConnect, clearConnectOverride, setDomain, ensureWalletOnDesiredChain,
    t: i18n.t, lang: i18n.lang, setLang: i18n.setLang,
    showKeys: i18n.showKeys, setShowKeys: i18n.setShowKeys, i18nAvailable: i18n.available,
    lastTabRoute, setLastTabRoute,
    authorizedUser,
    login,
    logout,
    handleAuthError,
  };

  return <AppContext.Provider value={value}>{props.children}</AppContext.Provider>;
}

export function useApp() {
  const ctx = Solid.useContext(AppContext);
  if (!ctx) throw new Error("useApp must be used inside <AppProvider>");
  if (typeof window !== "undefined") window.__app = ctx;
  return ctx;
}
</file>

<file path="src/components/RightPane.jsx">
import { createSignal, Show, createMemo, createEffect } from "solid-js";
import { navigate } from "../routing/hashRouter";
import { useApp } from "../context/AppContext.jsx";
import SwitchConnectDialog from "./SwitchConnectDialog.jsx";
import ThemeToggle from "./ui/ThemeToggle.jsx";
import LangSelector from "./ui/LangSelector.jsx";
import RightPaneFooter from "./RightPaneFooter.jsx";

export default function RightPane({ isOpen, onClose }) {
  const app = useApp();
  const { t } = app;
  const [showSwitch, setShowSwitch] = createSignal(false);

  const handlePanelClick = (e) => { if (e.target === e.currentTarget) onClose(); };

  const domainLangCodes = createMemo(() => {
    const fromDomain = (app.domainAssetsConfig?.()?.locales || []).map((l) => l.code).filter(Boolean);
    return fromDomain.length > 0 ? fromDomain : ["en"];
  });

  const showLangSelector = createMemo(() => domainLangCodes().length > 1);

  createEffect(() => {
    const availableCodes = domainLangCodes();
    const currentLang = app.lang?.();

    if (!availableCodes.includes(currentLang)) {
      app.setLang?.(availableCodes[0]);
    }
  });

  return (
    <>
      <div
        class={`fixed top-0 right-0 w-64 h-full bg-[hsl(var(--popover))] text-[hsl(var(--popover-foreground))] shadow-lg z-40 ${isOpen() ? "right-0" : "right-[-256px]"} transition-all duration-300`}
        onClick={handlePanelClick}
        data-testid="right-pane"
        style="border-left: 1px solid hsl(var(--border));"
      >
        <div class="h-full flex flex-col p-4 space-y-3">
          <nav class="pt-2">
            <ul class="space-y-3">
              <li><ThemeToggle /></li>

              <Show when={showLangSelector()}>
                <li><LangSelector codes={domainLangCodes()} /></li>
              </Show>

              <li>
                <div
                  class="px-2  rounded cursor-pointer hover:bg-[hsl(var(--accent)))]"
                  role="button" tabIndex={0}
                  onClick={() => { navigate("/docs"); onClose(); }}
                  onKeyDown={(e) => { if (e.key === "Enter" || e.key === " ") { e.preventDefault(); navigate("/docs"); onClose(); } }}
                  aria-label={t("docs.nav")}
                  title={t("docs.nav")}
                >
                  {t("docs.nav")}
                </div>
              </li>
              <Show when={app.config()?.gear}>
                <li>
                  <div
                    class="px-2  rounded cursor-pointer hover:bg-[hsl(var(--accent)))]"
                    role="button" tabIndex={0}
                    onClick={() => setShowSwitch(true)}
                    onKeyDown={(e) => { if (e.key === "Enter" || e.key === " ") { e.preventDefault(); setShowSwitch(true); } }}
                  >
                    {t("rightPane.switch.open")}
                  </div>
                </li>
              </Show>
              <li>
                <div
                  class="px-2 rounded cursor-pointer hover:bg-[hsl(var(--accent)))]"
                  role="button" tabIndex={0}
                  onClick={() => { navigate("/settings"); onClose(); }}
                  onKeyDown={(e) => { if (e.key === "Enter" || e.key === " ") { e.preventDefault(); navigate("/settings"); onClose(); } }}
                >
                  {t("rightPane.settings")}
                </div>
              </li>
            </ul>
          </nav>
          <RightPaneFooter />
        </div>
      </div>

      {isOpen() && (
        <div
          class="fixed inset-0 z-20"
          style={{ "background-color": "rgba(0,0,0,0.2)" }}
          data-testid="overlay"
          onClick={onClose}
        />
      )}

      <Show when={showSwitch()} keyed>
        <SwitchConnectDialog
          open={true}
          domain={app.config()?.domain}
          backendLink={app.config()?.backendLink}
          loading={app.loading()}
          error={app.error()}
          onApply={() => { }}
          onReset={app.clearConnectOverride}
          onClose={() => setShowSwitch(false)}
        />
      </Show>
    </>
  );
}
</file>

<file path="src/i18n/en.js">
// Auto-generated by scripts/i18n.mjs. Do not edit by hand.
export default {
  "app.versionLabel": "Version",
  "brand.name": "SAVVA",
  "categories.all": "All Categories",
  "common.apply": "Apply",
  "common.applying": "Applying",
  "common.cancel": "Cancel",
  "common.checking": "Checking",
  "common.error": "Error",
  "common.exists": "Exists",
  "common.fail": "Fail",
  "common.loading": "Loading",
  "common.notFound": "Not found",
  "common.ok": "OK",
  "default.avatar": "avatar",
  "default.user": "user",
  "docs.article": "Documentation article",
  "docs.copied": "Copied",
  "docs.copy": "Copy",
  "docs.nav": "Developer Docs",
  "docs.next": "Next",
  "docs.prev": "Previous",
  "docs.section": "Section",
  "docs.sidebar.empty": "No docs yet. Add sidebar.yaml under dev_docs/<lang>/",
  "docs.title": "Developer Docs",
  "error.connection.message": "The application could not connect to the backend server. It may be temporarily offline. Please try again later.",
  "error.connection.retry": "Refresh Page",
  "error.connection.title": "Connection Failed",
  "error.ws.message": "Unable to connect. Please try again.",
  "error.ws.title": "Connection Error",
  "ipfs.diag.cors.error": "CORS configuration issue.",
  "ipfs.diag.cors.name": "Gateway CORS Check",
  "ipfs.diag.cors.ok": "CORS is configured correctly.",
  "ipfs.diag.fetch.errorFirewall": "Fetch failed due to firewall.",
  "ipfs.diag.fetch.name": "Live Gateway Fetch",
  "ipfs.diag.fetch.ok": "Fetch successful.",
  "ipfs.diag.fetch.warnSkipped": "Skipped: ABI CID not found in /info response.",
  "ipfs.diag.fix.browser": "If it's running, check your browser. For Brave, disable Shields for this site. For other browsers like Chrome, you may need to 'Allow Insecure content' in Site Settings.",
  "ipfs.diag.fix.cors": "If it still fails, run this command to fix the API CORS policy:",
  "ipfs.diag.fix.daemon": "First, ensure your IPFS daemon is running in a terminal:",
  "ipfs.diag.fix.title": "To fix, run this in your terminal (then restart the daemon):",
  "ipfs.diag.liveness.error": "Node is not responding.",
  "ipfs.diag.liveness.name": "API Liveness Check",
  "ipfs.diag.liveness.ok": "Node is live.",
  "ipfs.diag.run": "Run Diagnostics",
  "ipfs.diag.title": "IPFS Node Diagnostics",
  "ipfs.imageNotAvailable": "Image not available",
  "main.tabs.empty": "This tab is empty for now.",
  "main.tabs.loading": "Loading tabs",
  "main.tabs.untitled": "Untitled",
  "menu.open": "Open menu",
  "newTab.category": "Category",
  "newTab.view.grid": "Grid View",
  "newTab.view.group": "View Group",
  "newTab.view.list": "List View",
  "rightPane.language": "Language",
  "rightPane.settings": "Settings",
  "rightPane.switch.backend.help": "The app will fetch /info from this URL to list supported domains.",
  "rightPane.switch.backend.label": "Backend URL",
  "rightPane.switch.backend.placeholder": "https://example.com/api/",
  "rightPane.switch.domain.label": "Domain",
  "rightPane.switch.domain.website": "Website",
  "rightPane.switch.noDomains": "Backend returned no domains. You can still apply, but the domain will be empty.",
  "rightPane.switch.open": "Switch backend / domain",
  "rightPane.switch.reload": "Load domains",
  "rightPane.switch.reload.title": "Fetch /info and refresh the domain list",
  "rightPane.switch.reset": "Reset to defaults",
  "rightPane.switch.reset.title": "Clear local override and reload defaults from default_connect.yaml",
  "rightPane.switch.title": "Switch backend / domain",
  "rightPane.switch.validation.domain": "Domain cannot be empty.",
  "rightPane.switch.validation.protocol": "Backend URL must start with http:// or https://",
  "rightPane.theme": "Theme",
  "settings.back": "Back",
  "settings.dev.assets.baseUrl": "Assets base URL",
  "settings.dev.assets.configUrl": "Config URL",
  "settings.dev.assets.configUrl.computed": "Computed URL",
  "settings.dev.assets.configUrl.open": "Open Config URL",
  "settings.dev.assets.diagnostics.default": "Default config",
  "settings.dev.assets.diagnostics.error": "Diagnostics error",
  "settings.dev.assets.diagnostics.hasCategories": "Has categories",
  "settings.dev.assets.diagnostics.hasConfig": "Has config",
  "settings.dev.assets.diagnostics.hasFavicon": "Favicon detected",
  "settings.dev.assets.diagnostics.hasLocales": "Has locales",
  "settings.dev.assets.diagnostics.hasLogos": "Has logos",
  "settings.dev.assets.diagnostics.hasTabs": "Has tabs",
  "settings.dev.assets.diagnostics.noteNetwork": "Check your network connection.",
  "settings.dev.assets.diagnostics.primary": "Primary config",
  "settings.dev.assets.diagnostics.run": "Run diagnostics",
  "settings.dev.assets.diagnostics.sampleFetches": "Sample fetches",
  "settings.dev.assets.diagnostics.title": "Asset diagnostics",
  "settings.dev.assets.domain": "Domain",
  "settings.dev.assets.env": "Environment",
  "settings.dev.assets.env.prod": "Production",
  "settings.dev.assets.env.test": "Test",
  "settings.dev.assets.prefix.active": "Active prefix",
  "settings.dev.assets.prefix.computed": "Computed prefix",
  "settings.dev.assets.source": "Source",
  "settings.dev.assets.title": "Assets",
  "settings.developer.debug.clear": "Clear log",
  "settings.developer.debug.copied": "Copied log to clipboard",
  "settings.developer.debug.copy": "Copy log",
  "settings.developer.debug.enable": "Enable debug logging",
  "settings.developer.showKeys": "Show API Keys",
  "settings.developer.title": "Developer Settings",
  "settings.ipfs.localDisabled": "Local IPFS disabled",
  "settings.localIpfs.apiUrl.label": "Local IPFS API URL",
  "settings.localIpfs.disable": "Disable",
  "settings.localIpfs.enableCheckbox": "Use local IPFS node",
  "settings.localIpfs.gateway.label": "Gateway",
  "settings.localIpfs.status.label": "Status",
  "settings.localIpfs.testEnable": "Test & enable",
  "settings.localIpfs.title": "Local IPFS",
  "settings.title": "Settings",
  "stakerLevels.${l.key}": "Staker Level {l.key}",
  "stakerLevels.clam": "Clam",
  "stakerLevels.dolphin": "Dolphin",
  "stakerLevels.fish": "Fish",
  "stakerLevels.guest": "Guest",
  "stakerLevels.orca": "Orca",
  "stakerLevels.seahorse": "Seahorse",
  "stakerLevels.shark": "Shark",
  "stakerLevels.shrimp": "Shrimp",
  "stakerLevels.stingray": "Stingray",
  "stakerLevels.whale": "Whale",
  "tabs.aria": "Section tabs",
  "tabs.title.${slug(tab.type)}": "Tab: {tab.type}",
  "tabs.title.actual": "Current",
  "tabs.title.comments": "Comments",
  "tabs.title.for-you": "For You",
  "tabs.title.leaders": "Leaders",
  "tabs.title.new": "New",
  "time.day.plural": "{n} days ago",
  "time.day.singular": "{n} day ago",
  "time.hour.plural": "{n} hours ago",
  "time.hour.singular": "{n} hour ago",
  "time.minute.plural": "{n} minutes ago",
  "time.minute.singular": "{n} minute ago",
  "time.now": "Now",
  "ui.mode.dark": "Dark mode",
  "ui.mode.light": "Light mode",
  "ui.toTop": "Back to Top",
  "wallet.changeChain": "Change network",
  "wallet.connect": "Connect wallet",
  "wallet.copied": "Copied",
  "wallet.copyAddress": "Copy address",
  "wallet.onRequiredNetwork": "On required network"
};
</file>

<file path="src/App.jsx">
// src/App.jsx
import { createSignal, onMount, Show } from "solid-js";
import Header from "./components/Header";
import RightPane from "./components/RightPane";
import Settings from "./pages/Settings";
import Docs from "./pages/Docs";
import { useHashRouter } from "./routing/hashRouter";
import { useApp } from "./context/AppContext.jsx";
import Toaster from "./components/Toaster";
import MainView from "./components/main/MainView";
import DomainCssLoader from "./theme/DomainCssLoader.jsx";
import FaviconLoader from "./theme/FaviconLoader.jsx";
import GoogleAnalyticsLoader from "./theme/GoogleAnalyticsLoader.jsx";
import WsConnector from "./net/WsConnector.jsx";
import ConnectionError from "./components/main/ConnectionError.jsx"; // Import the new component
import Spinner from "./components/ui/Spinner.jsx"; // Import a spinner for loading state
import AssetDebugTap from "./dev/AssetDebugTap.jsx";

export default function App() {
  const [isPaneOpen, setIsPaneOpen] = createSignal(false);
  const { route } = useHashRouter();
  const app = useApp();

  onMount(() => {
    const handleKeydown = (e) => { if (e.key === "Escape") setIsPaneOpen(false); };
    document.addEventListener("keydown", handleKeydown);
    return () => document.removeEventListener("keydown", handleKeydown);
  });

  const togglePane = () => setIsPaneOpen(!isPaneOpen());
  const isDocs = () => route() === "/docs" || route().startsWith("/docs/");

  return (
    <Show
      when={!app.loading()}
      fallback={
        <div class="fixed inset-0 flex items-center justify-center bg-[hsl(var(--background))]">
          <Spinner class="w-8 h-8" />
        </div>
      }
    >
      <Show
        when={!app.error()}
        fallback={<ConnectionError error={app.error()} />}
      >
        <div class="min-h-screen bg-[hsl(var(--background))] text-[hsl(var(--foreground))] transition-colors duration-300">
          <DomainCssLoader />
          <FaviconLoader />
          <GoogleAnalyticsLoader />
          <WsConnector />

          <Header onTogglePane={togglePane} />
          
          <Show when={route() === "/settings"} fallback={
            <Show when={isDocs()} fallback={<MainView />}>
              <Docs />
            </Show>
          }>
            <Settings />
          </Show>

          <RightPane isOpen={isPaneOpen} onClose={togglePane} />
          <Toaster />
          <AssetDebugTap />
        </div>
      </Show>
    </Show>
  );
}
</file>

</files>
